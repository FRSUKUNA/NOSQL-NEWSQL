{
    "database": "CockroachDB",
    "report_date": "2025-12-30 19:40:35 UTC",
    "total_versions": 7,
    "total_bug_fixes": 1330,
    "total_operational_changes": 296,
    "versions": [
        {
            "version": "26.1",
            "url": "https://www.cockroachlabs.com/docs/releases/v26.1",
            "bug_fixes": [
                "Fixed a bug where modifying a scheduled backup without changing the schedule could cause the next incremental backup to be skipped.",
                "Fixed a bug that allowed columns to be dropped despite being referenced by a routine. This could occur when a column was only referenced as a target column in the SET clause of an UPDATE statement within the routine. This fix only applies to newly-created routines. In versions prior to v26.1, the fix must be enabled by setting the session variableprevent_update_set_column_drop.",
                "Fixed a bug that caused newly-created routines to incorrectly prevent dropping columns that were not directly referenced, most notably columns referenced by computed column expressions. The fix is gated behind the session settinguse_improved_routine_deps_triggers_and_computed_cols, which is off by default prior to v26.1.",
                "Fixed a bug that could cause incorrect query results when using prepared statements with NULL placeholders. The bug has existed since v21.2 and violated SQL NULL-equality semantics by returning rows with NULL values when the result set should have been empty.From v21.2 to v25.3, the bug occurred when all of the following were true:The query was run with an explicit or implicit prepared statementThe query had an equality filter on a placeholder and a UNIQUE columnThe column contained NULL valuesThe placeholder was assigned to NULL during executionStarting in v25.4, the requirements were loosened: the column no longer needed to be UNIQUE, and the bug could reproduce if the column was included in any index.",
                "Fixed a bug where theschema_lockedtable storage parameter could be bypassed by combiningSET (schema_locked=false)with other schema changes in the sameALTER TABLEstatement using comma syntax. Schema-locked tables now correctly reject such combined statements.",
                "Fixed a bug that could cause an internal error in some cases for PL/pgSQL routines that perform database reads within an exception block.",
                "Fixed a bug where a SQL statement with side effects (e.g.,INSERT) inside a PL/pgSQL routine could be dropped if it used anINTOclause and none of the target variables were referenced. This bug had been present since v23.2.",
                "Fixed a bug where renaming a column that participated in multiple hash-sharded indexes would fail.",
                "Fixed a bug whereORDER BYclauses in user-defined set-returning SQL functions withOUTparameters were ignored when the function was called directly in aSELECTlist (e.g.,SELECT f()). The ordering is now properly preserved and enforced.",
                "The pgwire server now exits promptly on context cancellation.",
                "Fixed a bounded memory leak that could occur during table statistics collection on tables that contain both very wide (10 KiB or more) and small (under 400B)BYTES-like values within the same row, along with virtual computed columns. This bug had been present since stats collection on virtual computed columns was introduced in v24.1.",
                "Temporary schema cleanup no longer retries after poisoned transaction errors, reducing log noise.",
                "When changing the time interval on theMetricspage, the DB Console previously sent duplicate requests for metrics data. This has been fixed, and the UI now issues a single, efficient request when updating the time interval.",
                "Previously, CockroachDB would omit execution statistics inEXPLAIN ANALYZEoutput for mutation nodes when aRETURNINGclause was used. The bug was present since before v21.1 and is now fixed.",
                "Fixed a bug where CockroachDB could encounter avector encoder doesn't support ForcePut yeterror when executingCOPYcommands concurrently with certain schema changes. The bug had existed since before v23.2.",
                "Fixed a bug causing aREAD COMMITTEDorSNAPSHOTisolation transaction to be committed despite returning a non-ambiguous error.",
                "Fixed a bug in type-checking placeholders withUNKNOWNtypes. It could cause incorrect results in some cases.",
                "Fixed a bug whereEXPORT CSVandEXPORT PARQUETcould cause a node crash when their result rows were used as input to a mutation, such as anINSERT, within the same SQL statement. This bug had been present since before v22.1.",
                "Idle latencyon theTransaction Detailspage in the DB Console is now reported more accurately. Previously, transactions that used prepared statements (e.g., with placeholders) overcounted idle time, while those that included observer statements (common in the SQL CLI) undercounted it.",
                "Fixed a bug that caused panics when executingCOPYinto a table with hidden columns and expression indexes. The panic only occurred when the session settingexpect_and_ignore_not_visible_columns_in_copywas enabled. This bug was introduced withexpect_and_ignore_not_visible_columns_in_copyin v22.1.0.",
                "Vector index backfill jobs now correctly report progress in theSHOW JOBSoutput.",
                "Fixed a bug whereRESTOREof a database with aSECONDARY REGIONdid not apply the lease preferences for that region.",
                "Fixed a bug where a changefeed could perform many unnecessary job progress saves during an initial scan.",
                "Fixed a bug where CockroachDB would not log events forTxnRowsReadandTxnRowsWrittenguardrails for internal queries into theSQL_INTERNAL_PERFlogging channel. The bug was present since v21.2.",
                "Fixed a bug that caused internal errors forINSERT .. ON CONFLICT .. DO UPDATEstatements when the target table had both a computed column and aBEFOREtrigger. This bug was present since triggers were introduced in v24.3.0.",
                "Fixed a bug where a changefeed targeting only a subset of a table's column families could become stuck.",
                "Fixed a bug where CockroachDB would hit an internal error when performing an inverted join using an inverted index in which the first prefix column hadDESCdirection. The bug was present since v21.1.",
                "Fixed a bug where thekvflowcontrol.send_queue.scheduled.force_flushmetric was missing a decrement, resulting in a value of greater than0even when there was no ongoing force flush.",
                "Fixed a bug that would causeWITH READ VIRTUAL CLUSTERto be ignored if any other options were passed when runningCREATE VIRTUAL CLUSTER FROM REPLICATION.",
                "Internal assertions that verifyNumRange = 0in the first histogram bucket, used to catch malformed statistics, now run only in test builds to avoid crashing production queries.",
                "Fixed a bug in which range counts in table statistics histograms were not handled correctly after a user-definedENUMtype was modified.",
                "Fixed a bug in thecockroach node draincommand where draining a node using virtual clusters (such as clusters running Physical Cluster Replication (PCR)) could return before the drain was complete, possibly resulting in shutting down the node while it still had active SQL clients and range leases.",
                "Fixed a bug where a race condition in range splits could result in a regressed Raft state on a post-split range. This condition was extremely rare, and only observed during internal testing.",
                "Corrected a potential deadlock during vector index creation.",
                "Fixed a bug that would result in a node crash if a PCR or LDR URI usedsslinline=truewithsslmode=disable.",
                "Fixed a bug where CockroachDB could corrupt the first bucket of table statistic histograms in certain cases, causing underestimates for range counts near the lower end of the domain.",
                "Added proper dependency handling when adding a constraint withNOT VALIDthat references a user-defined function (UDF).",
                "Fixed a bug that prevented the optimizer from recognizing correlated filters when one of the filtered columns had a single distinct value across all rows. This could lead to suboptimal query plans in some cases.",
                "The username remapping functionality specified by theserver.identity_map.configurationcluster setting now matches identities and usernames with a case-insensitive comparison.",
                "Previously, the forecasted statistics shown inSHOW STATISTICS ... WITH FORECASTcould be inconsistent with those in the stats cache, depending on whetherWITH MERGEwas specified. Forecasted statistics are now displayed consistently, regardless of theWITH MERGEclause.",
                "Fixed a bug where CockroachDB could crash when executingEXPLAIN ANALYZEstatements using the pausable portal model. This would occur when the query was executed via the extended PGWire protocol (Parse,Bind,Execute) with themultiple_active_portals_enabledsession variable set. The bug was present since v23.2.",
                "INSPECTcan now be run on tables with indexes that storeREFCURSOR-typed columns.",
                "Fixes a bug whereDROP SCHEMA CASCADEcould run into an error with complex references from triggers.",
                "Fixed a bug where the job responsible for compacting stats for the SQL activity state could enter an unschedulable state. Fixes: #155165",
                "Fixed a bug where reads and writes performed by routines (user-defined functions and stored procedures) and apply joins were not included inbytes read,rows read, androws writtenstatement execution statistics. This bug had been present since before v23.2.",
                "INSPECTnow correctly checks index consistency at the historical timestamp when usingAS OF SYSTEM TIME, even for spans with no current data.",
                "TheINSPECTstatement now detects dangling secondary index entries even when the primary index spans contain no data.",
                "Fixed an internal error that could occur when replacing a user-defined function or stored procedure usingCREATE OR REPLACE, if the existing signature included multipleDEFAULTexpressions. This bug was introduced in v24.2, when support forDEFAULTexpressions was added.",
                "INSPECTno longer fails when checking index consistency on indexes with virtual key columns. Such indexes will now be skipped.",
                "Fixed a bug where DML statements on regional by row tables with unique indexes that do not reference the region could sometimes fail underREAD COMMITTEDisolation.",
                "Fixed a bug where Zone Config Extensions incorrectly prevented users from removing non-voting read replicas from multi-region databases. Users can now setnum_replicasequal tonum_votersto remove read replicas while maintaining the required number of voting replicas for their database's survival goal. This allows reducing storage costs without compromising availability guarantees.",
                "Fixed a bug in theltree2textbuilt-in function where the returnedTEXTvalue was incorrectly wrapped in single quotes. This bug had been present since theltree2textfunction was introduced in v25.4.0.",
                "Fixed a bug that caused incorrect results for queries that filter indexedLTREEcolumns with the<@(contained-by) operator. This bug was present since v25.4.0.",
                "Fixed a bug where the \"atomic\"COPYcommand (controlled via thecopy_from_atomic_enabledsession setting,trueby default) could encounterRETRY_COMMIT_DEADLINE_EXCEEDEDtransaction errors if the whole command took 1 minute or more. This bug occurred only when the vectorized engine was used forCOPY.",
                "Fixed a bug that caused transactions to fail with the error message:failed indeterminate commit recovery: programming error: timestamp change by implicitly committed transaction.",
                "Fixed a bug in JSONPath index acceleration where queries usingjsonb_path_existswith a root key (e.g.,$.b) incorrectly returned no results when the queried JSON was an array. This fix enables unwrapping a single array layer at the root, allowing the path to be evaluated against each element. Only v25.4 releases were affected.",
                "Fixed a bug that prevents largeTRUNCATEoperations from completing due tocommand is too largeerrors.",
                "Fixed a bug that caused incorrectgossip.callbacks.pending_durationmetric values to be recorded.",
                "Fixed a bug where transactions running concurrently with aGRANTorREVOKEon virtual tables or via external connections could observe modifications incorrectly.",
                "Fixed a bug where CockroachDB could encounter an internal error when evaluating aCOPY FROMcommand in a transaction after it was rolled back to a savepoint. The bug was present since before v23.2.",
                "Fixed a bug that could cause internal errors for queries using generic query plans withNULLplaceholder values.",
                "Fixed a bug that could cause a schema change to be stuck in the reverting state if theinfer_rbr_region_col_using_constraintstorage parameter was being set at the same time as adding a constraint that had a foreign key violation."
            ],
            "operational_changes": [
                "Theallow_unsafe_internalssetting now defaults tofalse, restricting access to thesystemandcrdb_internalnamespaces. Queries to these namespaces will now fail unless access is manually enabled. Usage is also audited.",
                "Jobs that are paused due to a specific reason, including jobs which pause themselves when encountering errors such as running out of disk space, now record that reason in their displayed status field ofSHOW JOBS.",
                "The following metrics are now marked as essential to support end-user troubleshooting of authentication latency issues:auth.jwt.conn.latencyauth.cert.conn.latencyauth.password.conn.latencyauth.ldap.conn.latencyauth.gss.conn.latencyauth.scram.conn.latencyauth.ldap.conn.latency.internal",
                "The metricssql.select.started.count,sql.insert.started.count,sql.update.started.count, andsql.delete.started.countare now emitted with labels under the common metric namesql.started.count, using aquery_typelabel to distinguish each operation.",
                "Added the cluster settingstorage.unhealthy_write_duration(defaults to 20s), which is used to indicate to the allocator that a store's disk is unhealthy. The cluster settingkv.allocator.disk_unhealthy_io_overload_scorecontrols the overload score assigned to a store with an unhealthy disk, where a higher score results in preventing lease or replica transfers to the store, or shedding of leases by the store. The default value of that setting is 0, so the allocator behavior is unaffected.",
                "Added two new changefeed metrics for tracking the max skew between a changefeed's slowest and fastest span/table. The metrics are gauge metrics with the nameschangefeed.progress_skew.{span}andchangefeed.progress_skew.{table}.",
                "Added the cluster settingstorage.snapshot.recreate_iter_duration(default 20s), which controls how frequently a long-lived storage engine iterator, backed by an engine snapshot, will be closed and recreated. Currently, it is only used for iterators used in rangefeed catchup scans.",
                "Added cluster settingsql.schema.approx_max_object_count(default: 20,000) to prevent creation of new schema objects when the limit is exceeded. The check uses cached table statistics for performance and is approximate - it may not be immediately accurate until table statistics are updated by the background statistics refreshing job. Clusters that have been running stably with a larger object count should raise the limit or disable the limit by setting the value to 0. In future releases, the default value for this setting will be raised as more CockroachDB features support larger object counts.",
                "Cleaned up redundant and misleading metrics.",
                "Fixed thechangefeed.parallel_io_pending_rowsmetric's y-axis label to match the metric's definition.",
                "Added a metric calledchangefeed.parallel_io_workersto track the number of workers in ParallelIO.",
                "Events related to changefeed operations are now routed to theCHANGEFEEDchannel, while sampled queries and transactions, along with certain SQL performance events, are logged toSQL_EXEC. To continue using the previous logging channels, setlog.channel_compatibility_mode.enabledtotrue.",
                "Successfully completed automatic SQL stats collecton jobs are now automatically purged rather than being retained for the full default job retention period.",
                "The cluster settingstorage.snapshot.recreate_iter_duration(default20s) controls how frequently a long-lived engine iterator, backed by an engine snapshot, will be closed and recreated. Currently, it is only used for iterators used in rangefeed catchup scans.",
                "Add support forCREATE LOGICAL REPLICATION STREAMin situations where the source table has a column with a sequence expression."
            ],
            "total_bug_fixes": 62,
            "total_operational_changes": 15,
            "date": "December 17, 2025",
            "release_type": "Regular"
        },
        {
            "version": "25.4",
            "url": "https://www.cockroachlabs.com/docs/releases/v25.4",
            "bug_fixes": [
                "A mechanism that prevents unsafe replication changes from causing loss of quorum now functions correctly. An internal function has been fixed to properly return errors, enhancing the reliability of replication safeguards.",
                "Fixed a bug where CockroachDB could encounter avector encoder doesn't support ForcePut yeterror when executingCOPYcommands concurrently with certain schema changes. The bug had existed since before v23.2.",
                "Fixed a bug that could cause a schema change to be stuck in the reverting state if theinfer_rbr_region_col_using_constraintstorage parameter was being set at the same time as adding a constraint that had a foreign key violation.",
                "Fixed a bug where CockroachDB would hit an internal error when performing an inverted join using an inverted index in which the first prefix column hadDESCdirection. The bug was present since v21.1.",
                "Fixed a bug in thecockroach node draincommand where draining a node using virtual clusters (such as clusters running Physical Cluster Replication (PCR)) could return before the drain was complete, possibly resulting in shutting down the node while it still had active SQL clients and range leases.",
                "Fixed an internal error that could occur when replacing a user-defined function or stored procedure usingCREATE OR REPLACE, if the existing signature included multipleDEFAULTexpressions. This bug was introduced in v24.2, when support forDEFAULTexpressions was added.",
                "Fixed a bug where the job responsible for compacting stats for the SQL activity state could enter an unschedulable state.",
                "Fixed a bug where DML statements on regional by row tables with unique indexes that do not reference the region could sometimes fail underREAD COMMITTEDisolation.",
                "Fixed a bug that prevented the optimizer from recognizing correlated filters when one of the filtered columns had a single distinct value across all rows. This could lead to suboptimal query plans in some cases.",
                "Fixed a bug where changefeeds using CDC queries could sometimes unexpectedly fail after a schema change with a descriptor retrieval error.",
                "Fixed a bug whereDROP SCHEMA CASCADEwith complex references from triggers could run into an error.",
                "Fixed a bug in theltree2textbuilt-in function where the returnedTEXTvalue was incorrectly wrapped in single quotes. This bug had been present since theltree2textfunction was introduced in v25.4.0.",
                "Fixed a bug where the \"atomic\"COPYcommand (controlled via thecopy_from_atomic_enabledsession setting,trueby default) could encounterRETRY_COMMIT_DEADLINE_EXCEEDEDtransaction errors if the whole command took 1 minute or more. This bug occurred only when the vectorized engine was used forCOPY.",
                "Fixed a bug that caused incorrect results for queries that filter indexedLTREEcolumns with the<@(contained-by) operator. This bug was present since v25.4.0.",
                "Fixed a bug that caused incorrectgossip.callbacks.pending_durationmetric values to be recorded.",
                "Fixed a bug in JSONPath index acceleration where queries usingjsonb_path_existswith a root key (e.g.,$.b) incorrectly returned no results when the queried JSON was an array. This fix enables unwrapping a single array layer at the root, allowing the path to be evaluated against each element. This bug was present since v25.4.0.",
                "Fixed a bug that could cause internal errors for queries using generic query plans withNULLplaceholder values.",
                "Fixed a bug where CockroachDB could encounter an internal error when evaluating aCOPY FROMcommand in a transaction after it was rolled back to a savepoint. The bug was present since before v23.2.",
                "Fixed a bug that caused internal errors forINSERT .. ON CONFLICT .. DO UPDATEstatements when the target table had both a computed column and aBEFOREtrigger. This bug was present since triggers were introduced in v24.3.0.",
                "Disable a feature (kv.lock_table.unreplicated_lock_reliability.split.enabled) that could lead to a node crash.",
                "Previously, we could corrupt the first bucket of table statistic histograms in certain cases, causing underestimates for range counts near the lower end of the domain, which is now fixed.",
                "A potential deadlock during vector index creation has been corrected.",
                "Added proper dependency handling when adding a constraint withNOT VALIDthat references a user-defined function (UDF).",
                "Fixed a bug that caused internal errors forINSERT .. ON CONFLICT .. DO UPDATEstatements when the target table had both a computed column and aBEFOREtrigger. This bug was present since triggers were introduced in v24.3.0.",
                "Vector index backfill will now properly track job progress in SHOW JOBS output.",
                "A bug has been fixed that caused panics when executingCOPYinto a table with hidden columns and expression indexes. The panic only occurred when theexpect_and_ignore_not_visible_columns_in_copysetting was enabled. This bug has been present sinceexpect_and_ignore_not_visible_columns_in_copywas introduced in v22.1.0.",
                "Idle latencyon theTransaction Detailspage in the DB Console is now reported more accurately. Previously, transactions that used prepared statements (e.g., with placeholders) overcounted idle time, while those that included observer statements (common in the SQL CLI) undercounted it.",
                "Fixed a bug whereRESTOREof a database with aSECONDARY REGIONdid not apply the lease preferences for that region.",
                "A bug where a changefeed could perform many unnecessary job progress saves during an initial scan has been fixed.",
                "A bug where a changefeed targeting only a subset of a table's column families could become stuck has been fixed.",
                "Fixed a bug where a CockroachDB node could crash when executing DO statements that contain user-defined types (possibly non-existing) in non-default configuration.",
                "Fixed a deadlock inDROP COLUMN CASCADEoperations when dropping columns referenced bySTOREDcomputed columns.",
                "Fixed a bug whereALTER POLICYwas incorrectly dropping dependency tracking for functions, sequences, or types in policy expressions.",
                "Fixed a bug where we would not show the pgwireRowDescriptionforEXECUTEstatements that were themselves prepared using the pgwireParsecommand.",
                "Fixed a runtime error that could be hit if a new secondary index had a name collision with a primary index.",
                "Fixed a bug where theschema_lockedstorage parameter was not being enforced on theTRUNCATEcommand, which could cause changefeed jobs to fail.",
                "Fixed a bug introduced in v21.2 whereIMPORToperations with multiple CSV files could incorrectly reset the bulk summary after processing the first file, causing the actual progress to be overwritten with anilvalue.",
                "Fixed a bug introduced in v25.1.0 that would cause a node panic if aSIGINTsignal was sent during the execution of aCHECK EXTERNAL CONNECTIONcommand.",
                "Fixed a bug where index creation could fail due to validation errors if the schema change was retried or paused/resumed during the backfill.",
                "Fixed an issue where hot range logging for virtual clusters omitted some hot ranges.",
                "Removed unnecessary Kafka topic creation that could cause changefeed startup to fail when usingchangefeed.new_kafka_sink_enabled=false.",
                "Fixed a bug that would cause aCALLstatement executed via a portal in the extended wire protocol to result in an error likeunknown portal \"\"if the stored procedure containedCOMMITorROLLBACKstatements. The bug had existed since PL/pgSQL transaction control statements were introduced in v24.1. The fix is off by default in versions prior to v25.3.",
                "Fixed a bug present since v24.1 where the allocator could make rebalancing decisions based on stale data, failing to account for recent local lease transfers not yet reflected in store capacity or gossip.",
                "A bug where a changefeed that was created before v25.2 could fail after upgrading to v25.2 with the error messageboth legacy and current checkpoint set on change aggregator spechas now been fixed.",
                "CockroachDB now supports decodingVECTORandBOX2Dtypes from the binary format of the PostgreSQL extended protocol (pgwire).",
                "TheRESET ALLstatement no longer affects the following session variables:is_superuserrolesession_authorizationtransaction_isolationtransaction_prioritytransaction_statustransaction_read_onlyThis better matches PostgreSQL behavior forRESET ALL. In addition, theDISCARD ALLstatement no longer errors whendefault_transaction_use_follower_readsis enabled.",
                "CockroachDB now prohibitsORDER BYand join equality operations onREFCURSORtypes, matching PostgreSQL behavior.",
                "Previously, CockroachDB could hit an internal error when performing aDELETE,UPDATE, orUPSERTwhere the initial scan of the mutation is locking and is on a table different from the one being mutated. A possible workaround wasSET enable_implicit_select_for_update = false, but this could increase contention. The bug was introduced in v25.2 and is now fixed.",
                "Fixes a race condition when advancing a changefeed aggregator's frontier. When hit, the race condition could result in an internal error that would shut down the kvfeed and cause the changefeed to retry.",
                "CockroachDB now supports case-insensitive matching for keyword identifiers in JSONPath queries. Note that the special identifiersTRUE,FALSE, andNULLare parsed case-insensitively in CockroachDB, but are case-sensitive in PostgreSQL. For example,SELECT '$.active == TrUe'::jsonpath;succeeds in CockroachDB, but fails in PostgreSQL.",
                "In v25.1, automatic partial statistics collection was enabled by default (by setting thesql.stats.automatic_partial_collection.enabledcluster setting totrue). Partial statistics collection may encounter certain expected scenarios that were previously reported as failed stats jobs with PostgreSQL error code55000. These errors are benign and are no longer reported. Instead, the stats job will be marked as \"succeeded,\" though no new statistics will be created.",
                "Fixed a minor bug that caused inconsistent behavior with the very rarely used\"char\"type (distinct fromCHAR).",
                "CockroachDB now allowsEXPLAINof mutation statements in read-only transaction mode, matching PostgreSQL behavior. Note thatEXPLAIN ANALYZEof mutations is still disallowed, since this variant actually executes the statement.",
                "Fixed an issue where some SQL metrics were not reported whenserver.child_metrics.enabledwas enabled,server.child_metrics.include_aggregate.enabledwas disabled, andsql.metrics.application_name.enabledandsql.metrics.database_name.enabledwere also disabled. Specifically, metrics with no children now report their aggregate metrics regardless of theserver.child_metrics.include_aggregate.enabledcluster setting.",
                "Fixed a bug where database login could fail during LDAP, JWT, or OIDC authentication if the user's external group memberships did not correspond to any existing roles in the database. The login will now succeed, and no roles will be granted or revoked in this scenario.",
                "Fixed a slow memory leak that was introduced in v25.1.8, v25.2.1, v25.2.2, and v25.3 betas. The leak would accumulate whenever a node executed a part of the distributed plan (although the gateway node of the plan was not affected), and could only be mitigated by restarting the node.",
                "Attempting to create a vector index with the legacy schema changer will now fail gracefully instead of crashing the node.",
                "Improved split and scatter behavior forCREATE INDEXwhen statistics are available for key columns.",
                "Fixed a bug that was preventing the row-level TTL table storage parameters (e.g.,ttl_select_batch_size,ttl_delete_batch_size,ttl_delete_rate_limit,ttl_select_rate_limit) from being set to0, which is their default value.",
                "Fixed an issue where discarding zone configs on sequences did not actually remove the configuration.",
                "Fixed a bug where modifying a changefeed withALTER CHANGEFEEDthat either unset or left thegc_protect_expires_afteroption unset would cause the changefeed's max PTS age to become unbounded instead of being set to the default value configured by thechangefeed.protect_timestamp.max_agecluster setting.",
                "Fixed a bug that would allow a race condition in foreign key cascades underREAD COMMITTEDandREPEATABLE READisolation levels.",
                "Fixed a bug where the entire schema would become inaccessible if a table was referenced as an implicit record type by a user-defined function (UDF) while the table was undergoing anIMPORT.",
                "Fixed invalid zone configurations that were generated when adding a super region to a 3-region database with a secondary region and region survivability. Previously, this could result in assigning more than the allowed number of replicas.",
                "Addressed a bug onschema_lockedtables when a column is dropped, andschema_lockedis toggled for the user.",
                "Fixed thepg_catalog.pg_typeenties for the \"any\" and \"trigger\" pseudotypes.",
                "Fixed an issue where Row Level Security (RLS) policies with missing dependencies during table-level restores could cause inconsistent state or restore failures.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to go undetected, potentially causing incomplete backups.",
                "Previously, CockroachDB could encounter an internal errortrying to add a column of UNKNOWN type at ...in rare cases when handlingCASEorORoperations. This bug was present since v20.2 and is now fixed.",
                "Fixed a bug wheredebug.zipfiles collected from clusters withdisallow_full_table_scansenabled were missing system table data.",
                "Fix handling of empty arrays in JSONPath lax mode comparisons. Empty arrays now return false for comparisons in lax mode and null in strict mode, matching PostgreSQL behavior.",
                "Fixed a bug whereDROP USERsucceeded even though a role owned default privileges, which could leave invalid privilege entries in the system.",
                "Fixed a bug where sequences could lose references to triggers, allowing them to be dropped incorrectly.",
                "Previously, CockroachDB could incorrectly elevate the number of rows deleted on tables with multiple column families. The bug was present v19.2 and is now fixed. Note that the data was deleted correctly, but the \"rows affected\" number was wrong.",
                "Added an automatic repair for dangling or invalid entries in thesystem.commentstable.",
                "Previously, CockroachDB could hit an errorERROR: span with results after resume span...when evaluating some queries withORDER BY ... DESCin an edge case. This bug was present since v22.1 and is now fixed.",
                "Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column.",
                "Fixed a bug where executing certain statements withBETWEEN SYMMETRICexpressions could panic if used with values of different types, such as... b'bytes' BETWEEN SYMMETRIC 'a' AND 'c'.",
                "Fixed a bug whereSHOW TABLESwould show inaccurate row counts if the most recent statistics collection was partial.",
                "Fixed a bug that preventedRESTOREfrom working if there were computed columns orON UPDATEexpressions that referenced user-defined functions (UDFs). This bug was introduced in v25.3.0.",
                "Fixed a bug that allowed foreign-key violations to result from some combinations of concurrentREAD COMMITTEDandSERIALIZABLEtransactions. If bothSERIALIZABLEand weaker-isolation transactions will concurrently modify rows involved in foreign-key relationships, theSERIALIZABLEtransactions must have the following session variables set in order to prevent any possible foreign-key violations:SET enable_implicit_fk_locking_for_serializable = on;SET enable_shared_locking_for_serializable = on;SET enable_durable_locking_for_serializable = on;",
                "Added theuse_soft_limit_for_distribute_scansession variable (default:false), which controls whether CockroachDB uses the soft row count estimate when deciding whether an execution plan should be distributed. In v25.1, the physical planning heuristics were changed such that large constrained table scans, estimated to scan at least 10,000 rows (controlled viadistribute_scan_row_count_threshold), would force plan distribution whendistsql=auto. However, if the scan had a \"soft limit\" CockroachDB would still use the full estimate (for example,10,000inestimated row count: 100â€“10,000), sometimes unnecessarily distributing queries and increasing latency. Theuse_soft_limit_for_distribute_scansession variable addresses this by allowing the planner to use the soft limit when deciding whether a scan is \"large\".",
                "pg_class.pg_dependnow contains entries withdeptype='i'(internal) for identity columns that own sequences. These previously haddeptype='a'(auto).",
                "Fixed a bug that caused an error when dropping a column and aUNIQUE WITHOUT INDEXconstraint that referenced it in the same transaction.",
                "Fixed a bug where views could not reference thecrdb_regioncolumn from their underlying tables in expressions."
            ],
            "operational_changes": [
                "Two new changefeed metrics for tracking the max skew between a changefeed's slowest and fastest span/table have been added. The metrics are gauge metrics with the nameschangefeed.progress_skew.{span,table}.",
                "The metricssql.select.started.count,sql.insert.started.count,sql.update.started.count, andsql.delete.started.countare now emitted with labels under the common metric namesql.started.count, using aquery_typelabel to distinguish each operation.",
                "Added the cluster settingstorage.unhealthy_write_duration(defaults to 20s), which is used to indicate to the allocator that a store's disk is unhealthy. The cluster settingkv.allocator.disk_unhealthy_io_overload_scorecontrols the overload score assigned to a store with an unhealthy disk, where a higher score results in preventing lease or replica transfers to the store, or shedding of leases by the store. The default value of that setting is 0, so the allocator behavior is unaffected.",
                "Added cluster settingsql.schema.approx_max_object_count(default: 20,000) to prevent creation of new schema objects when the limit is exceeded. The check uses cached table statistics for performance and is approximate - it may not be immediately accurate until table statistics are updated by the background statistics refreshing job. Clusters that have been running stably with a larger object count should raise the limit or disable the limit by setting the value to 0. In future releases, the default value for this setting will be raised as more CockroachDB features support larger object counts.",
                "Removed thebulkio.backup.deprecated_full_backup_with_subdir.enabledcluster setting, since backups will now fail if this is set to true.",
                "Raised the cache size for the storage engine's block cache to 256 MiB. Note that production systems should always configure this setting.",
                "Deprecated the bespoke restore and import event logs. For any deployment that is reliant on those logs, use the status change event log which now plumbs the SQL user that owns the job.",
                "Theincremental_locationoption is now deprecated and will be removed in a future release. This feature was added so customers could define different TTL policies for incremental backups vs full backups. Users can still do this since incremental backups are by default stored in a distinct directory relative to full backups ({collection_root}/incrementals).",
                "Added the cluster settingkvadmission.use_range_tenant_id_for_non_admin.enabled, which can be used to disable the behavior where Admission Control uses the range's tenant ID for non-admin requests. This behavior is enabled by default.",
                "CockroachDB now logs access to internal system tables and schemas considered unsafe (e.g.,crdb_internalandsystem). A message is emitted to theSENSITIVE_ACCESSlog channel when a user overrides theallow_unsafe_internalssetting or is denied access to these areas.",
                "A newchangefeedfile group that collects changefeed logs has been added to the default logging configuration.",
                "The/health/restart_safetyendpoint indicates when it is unsafe to terminate a node.",
                "Added the following cluster settings for configuring blob file rewrite compactions:storage.value_separation.rewrite_minimum_ageandstorage.value_separation.compaction_garbage_threshold.",
                "The default value ofserver.mem_profile.total_dump_size_limit(which controls how much space can be used by automatically collected heap profiles) has been increased from 256MiB to 512MiB.",
                "Added new experimental values for compression cluster settings to the storage engine.",
                "Thestorage.value_separation.enabledcluster setting is now enabled by default. This enables value separation for SSTables, where values exceeding a certain size threshold are stored in separate blob files rather than inline in the SSTable. This helps improve write performance (write amplification) by avoiding rewriting such values during compactions.",
                "A structured event is now logged to theSQL_SCHEMAchannel when theREFRESH MATERIALIZED VIEWstatement is executed.",
                "Removed thestorage.columnar_blocks.enabledcluster setting; columnar blocks are always enabled.",
                "A new feature is now available that automatically captures Go execution traces on a scheduled interval. This feature incurs a performance penalty and is generally intended for use under the guidance of Cockroach Labs Support. It can be configured using the following cluster settings:obs.execution_tracer.interval: Enables the tracer and sets the interval for capturing traces. Set to a value greater than 0 to activate.obs.execution_tracer.duration: Specifies the duration for each captured trace.obs.execution_tracer.total_dump_size_limit: Sets the maximum disk space allowed for storing execution traces. Older traces are automatically deleted when this limit is reached.",
                "Introduced the cluster settingsql.stats.error_on_concurrent_create_stats.enabled, which modifies how CockroachDB reacts to concurrent auto stats jobs. The default,true, maintains the previous behavior. Settingsql.stats.error_on_concurrent_create_stats.enabledtofalsewill cause the concurrent auto stats job to be skipped with just a log entry and no increased error counters.",
                "The value ofsql.stats.error_on_concurrent_create_stats.enablednow defaults tofalse, suppressing error counters for auto stats jobs that fail due to concurrent stats jobs in progress.",
                "Updated TTL job replanning to be less sensitive by focusing specifically on detecting when nodes become unavailable rather than reacting to all plan differences. The cluster settingsql.ttl.replan_flow_thresholdmay have been set to0to work around the TTL replanner being too sensitive; this fix will alleviate that and any instance that had setreplan_flow_thresholdto0can be reset back to the default.",
                "Addedauth.ldap.conn.latency.internalmetric to denote the internal authentication time for LDAP auth method.",
                "Introduced two new logging channels:KV_EXECandCHANGEFEED. TheKV_EXECchannel is intended for KV events that do not fall into theKV_DISTRIBUTIONchannel. TheCHANGEFEEDchannel is intended for changefeed-related events that are currently logged to theTELEMETRYchannel. This change does not include logic to move existing logs to the new channels.",
                "Restricted access to internal tables in thecrdb_internalschema. Only a predefined allowlist of internal objects is accessible when the session variableallow_unsafe_internalsis enabled or when the caller is internal.",
                "In a future major release, changefeed events will be logged to theCHANGEFEEDlogging channel instead ofTELEMETRY. To test the impact of this change before upgrading, set the cluster settinglog.channel_compatibility_mode.enabledtofalse. This redirects changefeed logs to theCHANGEFEEDchannel and should be tested only in non-production environments.",
                "In a future major release, SQL performance events will be logged to theSQL_EXECchannel instead of theSQL_PERFandSQL_INTERNAL_PERFchannels. To test the impact of this change, you can set the new cluster settinglog.channel_compatibility_mode.enabledtofalse. This redirects SQL performance logs to theSQL_EXECchannel. This setting should not be used in production environments, as it may affect downstream logging pipelines.",
                "Restricted access to allcrdb_internalbuilt-ins unless the session variableallow_unsafe_internalsis set totrue, or the caller is internal.",
                "In a future major release,sampled_queryandsampled_transactionevents will move from theTELEMETRYchannel to theSQL_EXEClogging channel. To test for potential logging pipeline impacts of these changes, setlog.channel_compatibility_mode.enabledtofalse. Avoid testing in production, as this setting changes live log behavior.",
                "Delegate queries (such asSHOW DATABASES) are now excluded from unsafe SQL checks that restrict access to thesystemdatabase andcrdb_internalschema. This change ensures that these commands continue to function even when access to internal components is otherwise restricted.",
                "The Physical Cluster Replication (PCR) reader tenant is always destroyed on cutover",
                "SYSTEMprivileges are inherited in read-only mode in standby Physical Cluster Replication (PCR) clusters.",
                "You can now output transaction traces to the logs in Jaeger-compatible JSON format. This is controlled by thesql.trace.txn.jaeger_json_output.enabledcluster setting, which is disabled by default. When enabled, traces triggered by probabilistic sampling or statement latency thresholds will be formatted for easier ingestion by tools that support the Jaeger tracing format.",
                "You can now exclude internal transactions from probabilistic transaction tracing and latency-based logging by setting thesql.trace.txn.include_internal.enabledcluster setting to false. This setting is enabled by default to preserve the current behavior, but disabling it is recommended when debugging customer workloads to reduce noise in trace output."
            ],
            "total_bug_fixes": 85,
            "total_operational_changes": 34,
            "date": "December 12, 2025",
            "release_type": "Regular Release"
        },
        {
            "version": "25.3",
            "url": "https://www.cockroachlabs.com/docs/releases/v25.3",
            "bug_fixes": [
                "A mechanism that prevents unsafe replication changes from causing loss of quorum now functions correctly. An internal function has been fixed to properly return errors, enhancing the reliability of replication safeguards.",
                "Fixed a bug where the \"atomic\"COPYcommand (controlled via thecopy_from_atomic_enabledsession setting,trueby default) could encounterRETRY_COMMIT_DEADLINE_EXCEEDEDtransaction errors if the whole command took 1 minute or more. This bug occurred only when the vectorized engine was used forCOPY.",
                "Attempting to create a vector index with the legacy schema changer will now fail gracefully instead of crashing the node.",
                "Fixed a bug that could cause internal errors for queries using generic query plans withNULLplaceholder values.",
                "Fixed a bug where CockroachDB could encounter an internal error when evaluating aCOPY FROMcommand in a transaction after it was rolled back to a savepoint. The bug was present since before v23.2.",
                "Fixed a bug where CockroachDB could encounter avector encoder doesn't support ForcePut yeterror when executingCOPYcommands concurrently with certain schema changes. The bug had existed since before v23.2.",
                "Fixed a bug that could cause a schema change to be stuck in the reverting state if theinfer_rbr_region_col_using_constraintstorage parameter was being set at the same time as adding a constraint that had a foreign key violation.",
                "Fixed a bug where the job responsible for compacting stats for the SQL activity state could enter an unschedulable state.",
                "Fixed a bug where CockroachDB didn't include reads and writes performed by routines (user-defined functions and stored procedures) as well as apply joins into thebytes read,rows read, androws writtenstatement execution statistics. The bug had been present since before v23.2.",
                "Fixed a bug where changefeeds using CDC queries could sometimes unexpectedly fail after a schema change with a descriptor retrieval error.",
                "Fixed a bug in thecockroach node draincommand where draining a node using virtual clusters (such as clusters running Physical Cluster Replication (PCR)) could return before the drain was complete, possibly resulting in shutting down the node while it still had active SQL clients and range leases.",
                "Fixed a bug where anINSERTstatement could fail with a type checking error while adding aBIT(n)column.",
                "Fixed a bug where index creation could fail due to validation errors if the schema change was retried or paused/resumed during the backfill.",
                "Fixed a bug introduced in v25.1.0 that would cause a node panic if aSIGINTsignal was sent during the execution of aCHECK EXTERNAL CONNECTIONcommand.",
                "Fixed a bug whereALTER POLICYwas incorrectly dropping dependency tracking for functions, sequences, or types in policy expressions.",
                "Fixed a bug introduced in v25.1 where CockroachDB nodes could crash when executingDOstatements that referenced (possibly nonexistent) user-defined types in non-default configurations. The crash only occurred if additional logging was enabled (for example, with thesql.log.all_statements.enabledcluster setting).",
                "Fixed a runtime error that could be hit if a new secondary index had a name collision with a primary index.",
                "Fixed a bug where theschema_lockedstorage parameter was not being enforced on theTRUNCATEcommand, which could cause changefeed jobs to fail.",
                "Fixed a bug that caused panics when executingCOPYinto a table with hidden columns and expression indexes. The panic only occurred when the session settingexpect_and_ignore_not_visible_columns_in_copywas enabled. This bug was introduced withexpect_and_ignore_not_visible_columns_in_copyin v22.1.0.",
                "Disabled thekv.lock_table.unreplicated_lock_reliability.split.enabledfeature, which could lead to a node crash.",
                "Fixed a bug where the presence of duplicate temporary tables in a backup caused the restore to fail with an error containing the textrestoring table desc and namespace entries: table already exists.",
                "Addressed a bug onschema_lockedtables when a column is dropped, andschema_lockedis toggled for the user.",
                "Fixed a bug that could cause excessive memory allocations when compacting timeseries keys.",
                "Fixed a bug whereDROP USERsucceeded even though a role owned default privileges, which could leave invalid privilege entries in the system.",
                "Previously, CockroachDB could hit an errorERROR: span with results after resume span...when evaluating some queries withORDER BY ... DESCin an edge case. This bug was present since v22.1 and is now fixed.",
                "Fixed a bug whereSHOW TABLESwould show inaccurate row counts if the most recent statistics collection was partial.",
                "Fixed a bug that preventedRESTOREfrom working if there were computed columns orON UPDATEexpressions that referenced user-defined functions (UDFs). This bug was introduced in v25.3.0.",
                "Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column.",
                "Fixed a bug that allowed foreign-key violations to result from some combinations of concurrentREAD COMMITTEDandSERIALIZABLEtransactions. If bothSERIALIZABLEand weaker-isolation transactions will concurrently modify rows involved in foreign-key relationships, theSERIALIZABLEtransactions must have the following session variables set in order to prevent any possible foreign-key violations:SET enable_implicit_fk_locking_for_serializable = on;SET enable_shared_locking_for_serializable = on;SET enable_durable_locking_for_serializable = on;",
                "Added an automatic repair for dangling or invalid entries in thesystem.commentstable.",
                "Added theuse_soft_limit_for_distribute_scansession variable (default:false), which controls whether CockroachDB uses the soft row count estimate when deciding whether an execution plan should be distributed. In v25.1, the physical planning heuristics were changed such that large constrained table scans, estimated to scan at least 10,000 rows (controlled viadistribute_scan_row_count_threshold), would force plan distribution whendistsql=auto. However, if the scan had a \"soft limit\" CockroachDB would still use the full estimate (for example,10,000inestimated row count: 100â€“10,000), sometimes unnecessarily distributing queries and increasing latency. Theuse_soft_limit_for_distribute_scansession variable addresses this by allowing the planner to use the soft limit when deciding whether a scan is \"large\".",
                "Fixed a bug where views could not reference thecrdb_regioncolumn from their underlying tables in expressions.",
                "Fixed a bug where the entire schema would become inaccessible if a table was referenced as an implicit record type by a user-defined function (UDF) while the table was undergoing anIMPORT.",
                "Fixed invalid zone configurations that were generated when adding a super region to a 3-region database with a secondary region and region survivability. Previously, this could result in assigning more than the allowed number of replicas.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to go undetected, potentially causing incomplete backups.",
                "Fixed a memory accounting issue in the client certificate cache that caused multiple allocations to be reported for the same certificate. The cache now accurately tracks memory usage and includes a safeguard to prevent it from negatively affecting SQL operations.",
                "Previously, CockroachDB could encounter an internal errortrying to add a column of UNKNOWN type at ...in rare cases when handlingCASEorORoperations. This bug was present since v20.2 and is now fixed.",
                "Fixed a bug wheredebug.zipfiles collected from clusters withdisallow_full_table_scansenabled were missing system table data.",
                "Fixed a bug where sequences could lose references to triggers, allowing them to be dropped incorrectly.",
                "Previously, CockroachDB could hit an errorERROR: span with results after resume span...when evaluating some queries withORDER BY ... DESCin an edge case. This bug was present since v22.1 and is now fixed.",
                "Fixed a slow memory leak that was introduced in v25.1.8, v25.2.1, v25.2.2, and v25.3 betas. The leak would accumulate whenever a node executed a part of the distributed plan (the gateway node of the plan was not affected), and could only be mitigated by restarting the node.",
                "Fixed an issue where some SQL metrics were not reported whenserver.child_metrics.enabledwas enabled,server.child_metrics.include_aggregate.enabledwas disabled, andsql.metrics.application_name.enabledandsql.metrics.database_name.enabledwere also disabled. Specifically, metrics with no children now report their aggregate metrics regardless of theserver.child_metrics.include_aggregate.enabledcluster setting.",
                "Fixed a bug that would allow a race condition in foreign key cascades underREAD COMMITTEDandREPEATABLE READisolation levels.",
                "Fixed an issue where discarding zone configs on sequences did not actually remove the configuration.",
                "Fixed a bug that would cause aCALLstatement executed via a portal in the extended wire protocol to result in an error likeunknown portal \"\"if the stored procedure containedCOMMITorROLLBACKstatements. The bug had existed since PL/pgSQL transaction control statements were introduced in v24.1. The fix is off by default in versions prior to v25.3.",
                "In v25.1, automatic partial statistics collection was enabled by default (by setting thesql.stats.automatic_partial_collection.enabledcluster setting totrue). Partial statistics collection may encounter certain expected scenarios that were previously reported as failed stats jobs with PostgreSQL error code55000. These errors are benign and are no longer reported. Instead, the stats job will be marked as \"succeeded,\" though no new statistics will be created.",
                "CockroachDB now prohibitsORDER BYand join equality operations onREFCURSORtypes, matching PostgreSQL behavior.",
                "Fixed an issue where CockroachDB could hit an internal error when performing aDELETE,UPDATE, orUPSERTwhere the initial scan of the mutation is locking and is on a table different from the one being mutated. A possible workaround wasSET enable_implicit_select_for_update = false, but this could increase contention. The bug was introduced in v25.2 and is now fixed.",
                "Fixed a bug where using column families on tables with vector indexes would cause the index to fail to return results.",
                "Large mutation statements (INSERT,UPDATE,DELETE,UPSERT) are now less likely to encounter contention with automatic table statistics collection in some cases. The bug was present since v19.1.",
                "Fixed a bug that allowed a column to be dropped from a table even if it was referenced in theRETURNINGclause of anUPDATEorDELETEstatement in a routine. In releases prior to v25.3, the fix must be enabled by setting the session variableuse_improved_routine_dependency_trackingtoon.",
                "Fixed a bug wherelibpqclients using the async API could hang with large result sets (Python: psycopg; Ruby: ActiveRecord, ruby-pg).",
                "Restore no longer gets stuck in therevertingstate after failed cleanup of dropped temporary system tables.",
                "Fixed an issue where self-referencing triggers did not have their dependencies properly recorded, which could lead to broken dependencies.",
                "Fixed a security issue where optimizer predicate reordering could leak information about hidden rows protected by row-level security (RLS) policies.",
                "Fixed a bug on the SQL Activity Statements and Transactions pages where the time picker failed to support sub-hour time ranges whensql.stats.aggregation.intervalwas set to a value under 1 hour. Previously, selecting a short time window (e.g., 10 minutes) would query for a full hour of data. This fix ensures that the selected time range is respected, enabling more precise analysis of recent activity.",
                "FUNCTIONandPROCEDUREare now shown via\\h SHOW CREATEin the CLI doc.",
                "Fixed a bug where functions lost their row-level security (RLS) policy backreferences, leading to schema change failures.",
                "Fixed a bug whereALTER TABLEwas modifying identity attributes on columns not backed by a sequence.",
                "Fixed an error incrdb_internal.table_spanswhen a table's schema had been dropped.",
                "Fixed a bug where introspection queries (e.g., querying thecrdb_internalsystem catalog) could fail if a dropped constraint referenced a column that was also being dropped.",
                "Fixed a bug where adding multiple columns in a single statement withAddGeometryColumnwould cause runtime errors.",
                "Fixed a bug where using valueschangefeed.aggregator.flush_jitter,min_checkpoint_frequencysuch thatchangefeed.aggregator.flush_jitter * min_checkpoint_frequency < 1would cause a panic. Jitter will now be disabled in this case.",
                "Fixed a bug that could cause queries that perform work in parallel to ignore the requested quality-of-service level. Affected operations include lookup joins, DistSQL execution, and foreign-key checks.",
                "Improved the performance ofSHOW CREATE TABLEon multi-region databases with large numbers of objects.",
                "Fixed a bug where runningDROP INDEXon a hash-sharded index did not properly detect dependencies from functions and procedures on the shard column. This caused theDROP INDEXstatement to fail with an internal validation error. Now the statement returns a correct error message, and usingDROP INDEX ... CASCADEworks as expected by dropping the dependent functions and procedures.",
                "Fixed a bug that prevented variable references using ordinal syntax (like$1) from reflecting updates to the variable. Referencing variables declared in PL/pgSQL blocks (instead of parameters) via ordinal syntax is now disallowed. The bug had existed since v24.1.",
                "Fixed a bug that caused index expression elements of primary keys to be shown incorrectly in the output ofSHOW CREATE TABLE.",
                "Fixed a bug that could lead to schema changes hanging after a cluster recovered from availability issues.",
                "Previously, on a table with multiple column families, CockroachDB could encounter aNon-nullable column \"â€¹Ã—â€º:â€¹Ã—â€º\" with no valueerror in rare cases during table statistics collection. The bug was present since v19.2 and is now fixed.",
                "Fixed a bug that could cause a row-level TTL job to fail with the error \"comparison of two different versions of enum\" if anENUMtype referenced by the table experienced a schema change.",
                "Fixed a bug where the physical cluster replication (PCR) reader catalog job could hit validation errors when schema objects had dependencies between them (for example, when a sequence's default expression was being removed).",
                "Creating a vector index on a table that contains aNULLvector value will no longer cause an internal error.",
                "Fixed an internal assertion failure that could occur during operations likeALTER TYPEorALTER DATABASE ... ADD REGIONwhen temporary tables were present.",
                "Row-level security (RLS)SELECTpolicies duringUPDATEoperations are now only applied when referenced columns appear in theSETorWHEREclauses, matching the behavior of PostgreSQL. This improves compatibility.",
                "Fixed an issue where using inline log configuration could cause internal errors on the DB Console's Logs page for a node at#/node/{nodeID}/logs.",
                "Fixed an integer overflow in thesplit_partfunction when using extremely negative field positions like Go'smath.MinInt64.",
                "Fixed incorrect application ofSELECTpolicies toRETURNINGclauses inINSERTandUPDATEwhen no table columns were referenced.",
                "Fixed a bug that preventedTRUNCATEfrom succeeding if any indexes on the table had back-reference dependencies, such as from a view or function referencing the index.",
                "Fixed a bug whereALTER TABLEoperations with multiple commands could generate invalid zone configurations.",
                "Fixed a bug where an invalid comment in thesystem.commenttable for a schema object could make it inaccessible.",
                "Fixed a bug where a CockroachDB node could crash when executingDOstatements that contain currently unsupported DDL statements likeCREATE TYPEin a non-default configuration (additional logging needed to be enabled, e.g., via thesql.log.all_statements.enabledcluster setting). This bug was introduced in v25.1.",
                "Prevent use of future timestamps when usingAS OF SYSTEM TIMEwithCREATE TABLE ... ASand materialized views. Previously, such timestamps could cause errors, delays, or hangs.",
                "Fixed an internal error that could be hit whenADD COLUMN UNIQUEandALTER PRIMARY KEYwere executed within the same transaction.",
                "Fixed a bug that prevented temporary views and sequences from being created if thepg_tempschema was explicitly specified in the qualified name of the object being created.",
                "Fixed a bug where CockroachDB would not use the vectorized fast path forCOPYwhen it was supported. The bug was only present in previous v25.2 releases.",
                "Errors triggered by DB Console activity no longer cause the node to crash.",
                "Fixed a bug to prevent HTTP connections from stopping server shutdown.",
                "The MVCC timestamp is now emitted correctly when themvcc_timestampis used with CDC queries.",
                "Fixed a bug in v25.2.0 where a vector search operator could drop user-supplied filters if the same vector column was indexed twice and a vector index with no prefix columns was defined after a vector index with prefix columns.",
                "Fixed a bug that could cause thecockroachprocess tosegfaultwhen collecting runtime execution traces (typically collected via theAdvanced Debugpage in the Console).",
                "Fixed a data race in thecloudstoragesink.",
                "Fixed a bug where thekv.rangefeed.closed_timestamp.slow_rangeswould not be incremented when a rangefeed closed timestamp was slower than the target threshold.",
                "Fixed a bug that could cause anAFTERtrigger to fail withclient already committed or rolled back the transactionif the query also contained foreign-key cascades. The bug had existed sinceAFTERtriggers were introduced in v24.3.",
                "Prevent dropping columns or indexes that are still referenced by triggers. Previously, these operations could succeed silently, potentially breaking trigger functionality.",
                "Fixed a bug where searching a vector with a query vector that doesn't match the dimensions of the vector column in the table would cause a node to crash.",
                "Specifying types for a subset of columns in a generator function's column definition list now results in a syntax error instead of an internal error.",
                "Fixed a bug that caused the SQL Activity > Statement Fingerprint page to fail to load details for statements run with application names containing a#character.",
                "CockroachDB could previously incorrectly evaluateto_regclass,to_regnamespace,to_regproc,to_regprocedure,to_regrole, andto_regtypebuiltin functions when the query using them happened to be evaluated in distributed fashion. The bug has been present since the introduction of these builtins in v23.1 and is now fixed.",
                "Fixed a bug that caused the optimizer to ignore index hints when optimizing some forms of prepared statements. This could result in one of two unexpected behaviors: a query errors with the messageindex cannot be used for this querywhen the index can actually be used; or a query uses an index that does not adhere to the hint. The hints relevant to this bug are regular index hints, e.g.,SELECT * FROM tab@index,FORCE_INVERTED_INDEX, andFORCE_ZIGZAG.",
                "Fixed a bug where thepg_catalog.pg_policytable could contain duplicate OID values when multiple tables had policies with the same policy ID. All rows inpg_policynow have unique OIDs as required.",
                "Fixed a bug where therolbypassrlscolumn inpg_rolesandpg_authidtables always returned false, even for roles with theBYPASSRLSoption.",
                "Fixed a bug that could cause stable expressions to be folded in cached query plans. The bug could cause stable expressions likecurrent_settingto return the wrong result if used in a prepared statement. The bug was introduced in point releases v23.2.22, v24.1.14, v24.3.9, and v25.1.2, and the v25.2 alpha.",
                "Fixed an issue where updating child metrics and reinitializing metrics at the same time could cause scrape errors.",
                "Fixed a runtime panic in thesubstring_indexfunction that occurred when the count argument was the minimum 64-bit integer value.",
                "Fixed a memory leak in index backfill jobs where completed spans were duplicated in memory on each progress update after resuming from a checkpoint. This could cause out-of-memory (OOM) errors when backfilling indexes on large tables with many ranges. This bug affected release version v25.2.0 and pre-release versions v25.2.0-alpha.3 through v25.2.0-rc.1.",
                "Fixed a bug where prepared statements on schema changes could fail with runtime errors.",
                "Fixed an issue with logical data replication (LDR) where the presence of a unique index may cause spurious dead letter queue (DLQ) entries if the unique index has a smaller index ID than the primary key index.",
                "Scheduled backups now prevent multiple compaction jobs from running in parallel on its backups.",
                "Removal of triggers during a restore now accounts for back references that existed because of triggers."
            ],
            "operational_changes": [
                "Added the cluster settingkvadmission.use_range_tenant_id_for_non_admin.enabled, which can be used to disable the behavior where admission control uses the range's tenant ID for non-admin requests. This behavior is disabled by default.",
                "auth.ldap.conn.latency.internalhas been added to denote the internal authentication time for ldap auth method.",
                "Updated TTL job replanning to be less sensitive by focusing specifically on detecting when nodes become unavailable rather than reacting to all plan differences. The cluster settingsql.ttl.replan_flow_thresholdmay have been set to0to work around the TTL replanner being too sensitive; this fix will alleviate that and any instance that had setreplan_flow_thresholdto0can be reset back to the default.",
                "A new feature is now available that automatically captures Go execution traces on a scheduled interval. This feature incurs a performance penalty and is generally intended for use under the guidance of Cockroach Labs Support. This feature can be configured using the following cluster settings:obs.execution_tracer.interval: Enables the tracer and sets the interval for capturing traces. Set to a value greater than 0 to activate.obs.execution_tracer.duration: Specifies the duration for each captured trace.obs.execution_tracer.total_dump_size_limit: Sets the maximum disk space allowed for storing execution traces. Older traces are automatically deleted when this limit is reached.",
                "The value ofsql.stats.error_on_concurrent_create_stats.enablednow defaults tofalse, suppressing error counters for auto stats jobs that fail due to concurrent stats jobs in progress.",
                "Introduced the following cluster settings for enabling and configuringvalue separation in the storage engine:storage.value_separation.enabled,storage.value_separation.minimum_size, andstorage.value_separation.max_reference_depth.",
                "Non-admin users no longer have access to changefeed jobs they do not own and which are not owned by a role of which they are a member, regardless of whether they have theCHANGEFEEDprivilege on the table or tables those jobs may be watching. Admin users, or those with globalSHOWJOB/CONTROLJOBprivileges, can still interact with all jobs, regardless of ownership.",
                "In order to selectively capture traces for transactions running in an active workload without having to capture them via statement diagnostic bundles, customers can now use thesql.trace.txn.sample_ratecluster setting to enable tracing for a fraction of their workload. Thesql.trace.txn.enable_thresholdwill still need to be set to a positive value to provide a filter for how slow a transaction needs to be after being sampled to merit emitting a trace. Traces are emitted to theSQL_EXEClogging channel.",
                "Added the following cluster settings for configuring blob file rewrite compactions:storage.value_separation.rewrite_minimum_ageandstorage.value_separation.compaction_garbage_threshold.",
                "Added thereplicas.cpunanospersecondmetric. Notably, when child labels are enabled, this metric exposes evaluation-related Replica CPU usage by tenant.",
                "CockroachDB now raises an error when encountering improper inline SSL credentials instead of panicking.",
                "Restore will now re-attemptAdminSplitKV requests instead of immediately failing and pausing the job.",
                "Added analter_changefeedstructured log event to provide more visibility into when anALTER CHANGEFEEDevent occurred and what changed.",
                "Added new timeseries metrics to thestorage.value_separation.*namespace for observing the behavior ofstorage engine value separation.",
                "Prometheus metrics are now also available at the/metricsendpoint, in addition to the existing/_status/varsendpoint. The new/metricsendpoint emits statically labeled metrics and will evolve more rapidly as CockroachDB migrates metrics to use labels instead of defining different metric names. For compatibility, users can continue to use/_status/vars, where metric names will remain stable.",
                "Added the new latency metrics:sql.service.latency.historical,sql.service.latency.consistent,sql.exec.latency.historical, andsql.exec.latency.consistentfor easier query optimizations.",
                "Partial index schema changes are supported in replicating tables whenlogical_replication.consumer.immediate_mode_writeris not set tolegacy-kv.",
                "The cluster settingserver.client_cert_expiration_cache.capacityhas been deprecated. The client certificate cache now evicts client certificates based on expiration time.",
                "Logs for hot ranges (hot_ranges_statsevents) have been moved to theHEALTHlogging channel.",
                "Added a new metric,kv.loadsplitter.cleardirection, which increments when the load-based splitter observes that more than 80% of replica access samples are moving in a single direction (either left/descending or right/ascending).",
                "When theserver.telemetry.hot_ranges_stats.enabledcluster setting is enabled, nodes check for hot ranges every minute instead of every 4 hours. A node logs its hot ranges when any single replica exceeds 250 ms of CPU time per second. In multi-tenant deployments, the check runs every 5 minutes and logs hot ranges for the entire cluster.",
                "Added the metricchangefeed.checkpoint.timestamp_countthat measures the number of unique timestamps in a changefeed span-level checkpoint. It may be useful to monitor this metric to determine if quantization settings should be changed.",
                "In a physical cluster replication (PCR) deployment, it is not possible for the standby system virtual cluster, or the reader virtual cluster to upgrade the reader virtual cluster by setting the version cluster setting. It is necessary to:Upgrade the standby system virtual cluster.Upgrade the primary system virtual cluster.Upgrade the primary virtual cluster.Wait for the replicated time to advance past the time the primary virtual cluster upgraded.Shut down the reader virtual cluster.Upgrade the destination host cluster.Re-initialize the reader virtual cluster withALTER VIRTUAL CLUSTER SET REPLICATION READ VIRTUAL CLUSTER.",
                "Added job tracing support to changefeeds."
            ],
            "total_bug_fixes": 110,
            "total_operational_changes": 24,
            "date": "December 12, 2025",
            "release_type": "Innovation Release"
        },
        {
            "version": "25.2",
            "url": "https://www.cockroachlabs.com/docs/releases/v25.2",
            "bug_fixes": [
                "A mechanism that prevents unsafe replication changes from causing loss of quorum now functions correctly. An internal function has been fixed to properly return errors, enhancing the reliability of replication safeguards.",
                "Fixed a bug that could cause internal errors for queries using generic query plans withNULLplaceholder values.",
                "Fixed a bug where changefeeds using CDC queries could sometimes unexpectedly fail after a schema change with a descriptor retrieval error.",
                "Fixed a bug in thecockroach node draincommand where draining a node using virtual clusters (such as clusters running Physical Cluster Replication (PCR)) could return before the drain was complete, possibly resulting in shutting down the node while it still had active SQL clients and range leases.",
                "Fixed a bug where anINSERTstatement could fail with a type checking error while adding aBIT(n)column.",
                "Fixed a bug where index creation could fail due to validation errors if the schema change was retried or paused/resumed during the backfill.",
                "Fixed a bug introduced in v25.1.0 that would cause a node panic if aSIGINTsignal was sent during the execution of aCHECK EXTERNAL CONNECTIONcommand.",
                "Fixed a bug whereALTER POLICYwas incorrectly dropping dependency tracking for functions, sequences, or types in policy expressions.",
                "Fixed a runtime error that could be hit if a new secondary index had a name collision with a primary index.",
                "Fixed a bug that caused panics when executingCOPYinto a table with hidden columns and expression indexes. The panic only occurred when the session settingexpect_and_ignore_not_visible_columns_in_copywas enabled. This bug was introduced withexpect_and_ignore_not_visible_columns_in_copyin v22.1.0.",
                "Disabled thekv.lock_table.unreplicated_lock_reliability.split.enabledfeature, which could lead to a node crash.",
                "Fixed a bug where the presence of duplicate temporary tables in a backup caused the restore to fail with an error containing the textrestoring table desc and namespace entries: table already exists.",
                "Fixed a bug wheredebug.zipfiles collected from clusters withdisallow_full_table_scansenabled were missing system table data.",
                "Addressed a bug onschema_lockedtables when a column is dropped, andschema_lockedis toggled for the user.",
                "Fixed a bug that could cause excessive memory allocations when compacting timeseries keys.",
                "Fixed a bug whereDROP USERsucceeded even though a role owned default privileges, which could leave invalid privilege entries in the system.",
                "Previously, CockroachDB could hit an errorERROR: span with results after resume span...when evaluating some queries withORDER BY ... DESCin an edge case. This bug was present since v22.1 and is now fixed.",
                "Fixed a bug whereSHOW TABLESwould show inaccurate row counts if the most recent statistics collection was partial.",
                "Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column.",
                "Fixed a bug that allowed foreign-key violations to result from some combinations of concurrentREAD COMMITTEDandSERIALIZABLEtransactions. If bothSERIALIZABLEand weaker-isolation transactions will concurrently modify rows involved in foreign-key relationships, theSERIALIZABLEtransactions must have the following session variables set in order to prevent any possible foreign-key violations:SET enable_implicit_fk_locking_for_serializable = on;SET enable_shared_locking_for_serializable = on;SET enable_durable_locking_for_serializable = on;",
                "Added an automatic repair for dangling or invalid entries in thesystem.commentstable.",
                "Added theuse_soft_limit_for_distribute_scansession variable (default:false), which controls whether CockroachDB uses the soft row count estimate when deciding whether an execution plan should be distributed. In v25.1, the physical planning heuristics were changed such that large constrained table scans, estimated to scan at least 10,000 rows (controlled viadistribute_scan_row_count_threshold), would force plan distribution whendistsql=auto. However, if the scan had a \"soft limit\" CockroachDB would still use the full estimate (for example,10,000inestimated row count: 100â€“10,000), sometimes unnecessarily distributing queries and increasing latency. Theuse_soft_limit_for_distribute_scansession variable addresses this by allowing the planner to use the soft limit when deciding whether a scan is \"large\".",
                "Fixed a bug where views could not reference thecrdb_regioncolumn from their underlying tables in expressions.",
                "Fixed an issue where the mvcc_timestamp field was incorrectly returning zero values when used with CDC queries. The timestamp is now emitted correctly.",
                "Fixed a bug where database login could fail during LDAP, JWT, or OIDC authentication if the user's external group memberships did not correspond to any existing roles in the database. The login will now succeed, and no roles will be granted or revoked in this scenario.",
                "Fixed a bug that would cause aCALLstatement executed via a portal in the extended wire protocol to result in an error likeunknown portal \"\"if the stored procedure containedCOMMITorROLLBACKstatements. The bug had existed since PL/pgSQL transaction control statements were introduced in v24.1. The fix will be off by default in versions prior to v25.3, and can be toggled on by settinguse_proc_txn_control_extended_protocol_fix = true.",
                "Fixed a slow memory leak that was introduced in v25.1.8, v25.2.1, v25.2.2, and v25.3 betas. The leak would accumulate whenever a node executed a part of the distributed plan (the gateway node of the plan was not affected), and could only be mitigated by restarting the node.",
                "Fixed an issue where some SQL metrics were not reported whenserver.child_metrics.enabledwas enabled,server.child_metrics.include_aggregate.enabledwas disabled, andsql.metrics.application_name.enabledandsql.metrics.database_name.enabledwere also disabled. Specifically, metrics with no children now report their aggregate metrics regardless of theserver.child_metrics.include_aggregate.enabledcluster setting.",
                "Fixed a bug that would allow a race condition in foreign key cascades underREAD COMMITTEDandREPEATABLE READisolation levels.",
                "Fixed an issue where discarding zone configs on sequences did not actually remove the configuration.",
                "Fixed a bug where the entire schema would become inaccessible if a table was referenced as an implicit record type by a user-defined function (UDF) while the table was undergoing anIMPORT.",
                "Fixed invalid zone configurations that were generated when adding a super region to a 3-region database with a secondary region and region survivability. Previously, this could result in assigning more than the allowed number of replicas.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups.",
                "Fixed a memory accounting issue in the client certificate cache that caused multiple allocations to be reported for the same certificate. The cache now accurately tracks memory usage and includes a safeguard to prevent it from negatively affecting SQL operations.",
                "Previously, CockroachDB could encounter an internal errortrying to add a column of UNKNOWN type at ...in rare cases when handlingCASEorORoperations. This bug was present since v20.2 and is now fixed.",
                "Previously, CockroachDB could hit an errorERROR: span with results after resume span...when evaluating some queries withORDER BY ... DESCin an edge case. This bug was present since v22.1 and is now fixed.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups.",
                "Fixed a data race in thecloudstoragesink.",
                "Fixed a bug where searching a vector with a query vector that doesn't match the dimensions of the vector column in the table would cause a node to crash.",
                "Fixed a bug where functions lost their row-level security (RLS) policy backreferences, leading to schema change failures.",
                "Fixed an error incrdb_internal.table_spansthat could occur when a table's schema had been dropped.",
                "Fixed a bug where adding multiple columns in a single statement withAddGeometryColumnwould cause runtime errors.",
                "Fixed a bug wherelibpqclients using the async API could hang with large result sets (Python: psycopg; Ruby: ActiveRecord, ruby-pg).",
                "Previously, CockroachDB could hit an internal error when performing aDELETE,UPDATE, orUPSERTwhere the initial scan of the mutation is locking and is on a table different from the one being mutated. A possible workaround wasSET enable_implicit_select_for_update = false, but this could increase contention. The bug was introduced in v25.2 and is now fixed.",
                "TheRESET ALLstatement no longer affects the following session variables:is_superuserrolesession_authorizationtransaction_isolationtransaction_prioritytransaction_statustransaction_read_onlyThis better matches PostgreSQL behavior forRESET ALL. In addition, theDISCARD ALLstatement no longer errors whendefault_transaction_use_follower_readsis enabled.",
                "In v25.1, automatic partial statistics collection was enabled by default (by setting thesql.stats.automatic_partial_collection.enabledcluster setting totrue). Partial statistics collection may encounter certain expected scenarios that were previously reported as failed stats jobs with PostgreSQL error code55000. These errors are benign and are no longer reported. Instead, the stats job will be marked as \"succeeded,\" though no new statistics will be created.",
                "Fixed a slow memory leak that was introduced in v25.1.8, v25.2.1, v25.2.2, and v25.3 betas. The leak would accumulate whenever a node executed a part of the distributed plan (the gateway node of the plan was not affected), and could only be mitigated by restarting the node.",
                "Fixed an issue where some SQL metrics were not reported whenserver.child_metrics.enabledwas enabled,server.child_metrics.include_aggregate.enabledwas disabled, andsql.metrics.application_name.enabledandsql.metrics.database_name.enabledwere also disabled. Specifically, metrics with no children now report their aggregate metrics regardless of theserver.child_metrics.include_aggregate.enabledcluster setting.",
                "Fixed a bug that would allow a race condition in foreign key cascades underREAD COMMITTEDandREPEATABLE READisolation levels.",
                "Fixed a bug where the entire schema would become inaccessible if a table was referenced as an implicit record type by a user-defined function (UDF) while the table was undergoing anIMPORT.",
                "Fixed a bug that could cause thecockroachprocess tosegfaultwhen collecting runtime execution traces (typically collected via theAdvanced Debugpage in the Console).",
                "Fixed a bug where thekv.rangefeed.closed_timestamp.slow_rangeswould not be incremented when a rangefeed closed timestamp was slower than the target threshold.",
                "Fixed a bug that could cause anAFTERtrigger to fail withclient already committed or rolled back the transactionif the query also contained foreign-key cascades. The bug had existed sinceAFTERtriggers were introduced in v24.3.",
                "Fixed a bug that caused the SQL Activity > Statement Fingerprint page to fail to load details for statements run with application names containing a#character.",
                "Previously, CockroachDB could incorrectly evaluate theto_regclass,to_regnamespace,to_regproc,to_regprocedure,to_regrole, andto_regtypebuilt-in functions when the query using them was evaluated in a distributed fashion. The bug was introduced with these built-in functions in v23.1 and is now fixed.",
                "Fixed a bug that caused the optimizer to ignore index hints when optimizing some forms of prepared statements. This could result in one of two unexpected behaviors: a query errors with the messageindex cannot be used for this querywhen the index can actually be used; or a query uses an index that does not adhere to the hint. The hints relevant to this bug are regular index hints, e.g.,SELECT * FROM tab@index,FORCE_INVERTED_INDEX, andFORCE_ZIGZAG.",
                "Fixed a bug where thepg_catalog.pg_policytable could contain duplicate OID values when multiple tables had policies with the same policy ID. All rows inpg_policynow have unique OIDs as required.",
                "Fixed a bug that could cause stable expressions to be folded in cached query plans. The bug could cause stable expressions likecurrent_settingto return the wrong result if used in a prepared statement. The bug was introduced in v23.2.22, v24.1.14, v24.3.9, v25.1.2, and the v25.2 alpha.",
                "Fixed a runtime panic in thesubstring_indexfunction that occurred when the count argument was the minimum 64-bit integer value.",
                "Fixed a memory leak in index backfill jobs where completed spans were duplicated in memory on each progress update after resuming from a checkpoint. This could cause out-of-memory (OOM) errors when backfilling indexes on large tables with many ranges. This bug affected release version v25.2.0 and pre-release versions v25.2.0-alpha.3 through v25.2.0-rc.1.",
                "Fixed a bug where prepared statements on schema changes could fail with runtime errors.",
                "Fixed a bug whereALTER TABLEwas modifying identity attributes on columns not backed by a sequence.",
                "Improved the performance ofSHOW CREATE TABLEon multi-region databases with large numbers of objects.",
                "Fixed a bug that could cause queries that perform work in parallel to ignore the requested quality-of-service level. Affected operations include lookup joins, DistSQL execution, and foreign-key checks.",
                "Fixed a bug where runningDROP INDEXon a hash-sharded index did not properly detect dependencies from functions and procedures on the shard column. This caused theDROP INDEXstatement to fail with an internal validation error. Now the statement returns a correct error message, and usingDROP INDEX ... CASCADEworks as expected by dropping the dependent functions and procedures.",
                "Fixed a bug that could lead to schema changes hanging after a cluster recovered from availability issues.",
                "Previously, on a table with multiple column families, CockroachDB could encounter aNon-nullable column \"â€¹Ã—â€º:â€¹Ã—â€º\" with no valueerror in rare cases during table statistics collection. The bug was present since v19.2 and is now fixed.",
                "Fixed a bug that could cause a row-level TTL job to fail with the error \"comparison of two different versions of enum\" if anENUMtype referenced by the table experienced a schema change.",
                "Fixed a bug where the physical cluster replication (PCR) reader catalog job could hit validation errors when schema objects had dependencies between them (for example, when a sequence's default expression was being removed).",
                "Creating a vector index on a table that contains aNULLvector value will no longer cause an internal error.",
                "Row-level security (RLS)SELECTpolicies duringUPDATEoperations are now only applied when referenced columns appear in theSETorWHEREclauses, matching the behavior of PostgreSQL. This improves compatibility.",
                "Fixed an internal assertion failure that could occur during operations likeALTER TYPEorALTER DATABASE ... ADD REGIONwhen temporary tables were present.",
                "Fixed incorrect application of row-level security (RLS)SELECTpolicies toRETURNINGclauses inINSERTandUPDATEwhen no table columns were referenced.",
                "Fixed a bug that preventedTRUNCATEfrom succeeding if any indexes on the table had back-reference dependencies, such as from a view or function referencing the index.",
                "Fixed a bug that could lead to a node stall.",
                "Fixed an integer overflow in thesplit_partfunction when using extremely negative field positions like Go'smath.MinInt64.",
                "Fixed a bug where an invalid comment in thesystem.commenttable for a schema object could make it inaccessible.",
                "Fixed a bug where a CockroachDB node could crash when executingDOstatements that contain currently unsupported DDL statements likeCREATE TYPEin a non-default configuration (additional logging needed to be enabled, e.g., via thesql.log.all_statements.enabledcluster setting). This bug was introduced in v25.1.",
                "Prevent use of future timestamps when usingAS OF SYSTEM TIMEwithCREATE TABLE ... ASand materialized views. Previously, such timestamps could cause errors, delays, or hangs.",
                "Fixed a bug where CockroachDB would not use the vectorized fast path forCOPYwhen it was supported. The bug was only present in previous v25.2 releases.",
                "Fixed an internal error that could be hit whenADD COLUMN UNIQUEandALTER PRIMARY KEYwere executed within the same transaction.",
                "Fixed a bug whereALTER TABLEoperations with multiple commands could generate invalid zone configurations.",
                "Fixed a bug in v25.2.0 where a vector search operator could drop user-supplied filters if the same vector column was indexed twice and a vector index with no prefix columns was defined after a vector index with prefix columns.",
                "Fixed an issue where updating child metrics and reinitializing metrics at the same time could cause scrape errors.",
                "Fixed a runtime panic in thesubstring_indexfunction that occurred when the count argument was the minimum 64-bit integer value.",
                "Fixed a memory leak in index backfill jobs where completed spans were duplicated in memory on each progress update after resuming from a checkpoint. This could cause out-of-memory (OOM) errors when backfilling indexes on large tables with many ranges. This bug affected release version v25.2.0 and pre-release versions v25.2.0-alpha.3 through v25.2.0-rc.1.",
                "NULLvectors can now be inserted into tables with vector indexes.",
                "Fixed a bug that caused vector indexes to return incorrect or no results from a standby reader in a physical cluster replication (PCR) setup. This bug existed in alpha versions of v25.2 and in v25.2.0-beta.1.",
                "Fixed a bug that allowed a set-returning PL/pgSQL function to be created before the version change was finalized. This bug existed in v25.2 alpha and beta releases.",
                "Fixed a bug where CockroachDB could encounter an internal error when fetching from theWITH HOLDcursor withFETCH FIRSTandFETCH ABSOLUTE. The bug was only present in v25.2 alpha and beta releases.",
                "Fixed a bug that could cause a changefeed to complete erroneously when one of its watched tables encounters a schema change.",
                "Fixed a bug in the DB Console where tables with page size dropdowns failed to update when a new page size option was selected. Tables now update correctly.",
                "Fixed the following bugs in theSchedulespage of the DB Console:Where theSchedulespage displayed only a subset of a cluster's schedules. TheSchedulespage now correctly displays all schedules.Where manually updating theshoworstatusparameters in the URL (e.g.,http://127.0.0.1:8080/#/schedules?status=ACTIVE&show=50) caused theSchedulespage to fail to load.",
                "Fixed a bug in theSQL Activity Statementspage where filtering byStatement Typereturned no results. The filter now works as expected.",
                "Fixed a bug in the DB Console where theDrop unused indextag appeared multiple times for an index on theIndexestab of theTable Detailspage.",
                "Fixed an issue where hot range logging for virtual clusters omitted some hot ranges.",
                "MVCC garbage collection is now fully subject to IO admission control. Previously, it was possible for MVCC GC to cause store overload (such as LSM inversion) when a large amount of data would become eligible for garbage collection. Should any issues arise from subjecting MVCC GC to admission control, thekv.mvcc_gc.queue_kv_admission_control.enabledcluster setting can be set tofalseto restore the previous behavior.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed an issue where change data capture queries on tables without columns would fail with an internal error:unable to determine result columns.",
                "Previously, statement bundle collection could encounternot enough privilegeserrors when retrieving necessary information (e.g., cluster settings, table statistics, etc.) when the user that requested the bundle was different from the user that actually ran the query. This is now fixed. The bug was present since v20.2 and would result in partially incomplete bundles.",
                "Fixed an issue where databases, tables, and indexes were not appearing on the Hot Ranges page for application virtual clusters.",
                "Fixed a bug where index backfills unnecessarily merged new data written to an index, which could lead to extra contention.",
                "Column IDs are now validated when starting animmediatemode logical data replication stream.",
                "Fixed a bug where a GC threshold error (which appears as \"batch timestamp must be after replica GC threshold ...\") could cause a schema change that backfills data to fail. Now, the error will cause the backfill to be retried at a higher timestamp to avoid the error.",
                "Fixed a bug where index backfill progress before aPAUSE/RESUMEwould not get tracked.",
                "Fixed a bug that could cause a function reference to be left behind if a procedure referred to another procedure that depended on a a table, and that table was dropped withCASCADE.",
                "Fixed a potential deadlock that could occur during client certificate updates while metrics were being collected. This issue affected the reliability of certificate expiration reporting.",
                "Previously, the fieldsmaximum memory usageandmax sql temp disk usagein theEXPLAIN ANALYZEoutput could be under-reported for distributed plans when memory-intensive operations were fully performed on the remote nodes. This is now fixed. The bug existed in v22.1 and later.",
                "TheALTER VIRTUAL CLUSTER SET REPLICATION READ VIRTUAL CLUSTERsyntax is now supported for adding a reader virtual cluster for an existing physical cluster replication (PCR) standby cluster.",
                "Fixed a bug where index backfills unnecessarily merged new data written to an index, which could lead to extra contention.",
                "Fixed a bug that could leave behind a dangling reference to a dropped role if that role had default privileges granted to itself. The bug was caused by defining privileges such as:ALTER DEFAULT PRIVILEGES FOR ROLE self_referencing_role GRANT INSERT ON TABLES TO self_referencing_role.",
                "Fixed a bug that caused changefeeds to fail on startup when scanning a single key.",
                "Fixed a bug where secondary indexes could be unusable by DML statements while a primary key swap was occurring, if the new primary key did not contain columns from the old primary key.",
                "Fixed a crash due touse of enum metadata before hydrationwhen using LDR with user-defined types.",
                "MVCC garbage collection is now fully subject to IO admission control. Previously, it was possible for MVCC GC to cause store overload (such as LSM inversion) when a large amounts of data would become eligible for garbage collection. Should any issues arise from subjecting MVCC GC to admission control, thekv.mvcc_gc.queue_kv_admission_control.enabledcluster setting can be set tofalseto restore the previous behavior.",
                "Fixed a bug where CockroachDB would encounter an internal error when decoding the gists of plans withCALLstatements. The bug had been present since v23.2.",
                "Fixed a bug where calling a stored procedure could drop the procedure if it hadOUTparameters that were not used by the calling routine. This bug had existed since PL/pgSQLCALLstatements were introduced in v24.1.",
                "Fixed a bug where CockroachDB incorrectly resolved routine overloads in some cases. Previously, it allowed creating routines with signatures differing only in type width (e.g.,f(p VARCHAR(1))andf(p VARCHAR(2))), which is not permitted in PostgreSQL. This required precise type casting during invocation. Similarly, when dropping a routine, CockroachDB previously required exact types, unlike PostgreSQL, which is more lenient (e.g.,DROP FUNCTION f(VARCHAR)would fail in the preceding example). This bug had existed since v23.1.",
                "The reader virtual cluster now starts if the user begins a physical cluster replication (PCR) stream from a cursor viaALTER VIRTUAL CLUSTER virtual_cluster START REPLICATION OF physical_cluster ON pgurl WITH READ VIRTUAL CLUSTER.",
                "Previously, storage parameters with the same key would lead to ambiguity. This has now been fixed and an error surfaced if duplicate storage parameters are specified.",
                "Fixed a bug where the errorbatch timestamp T must be after replica GC thresholdcould occur during a schema change backfill operation, causing the schema change job to retry infinitely. Now, this error is treated as permanent, and will cause the job to enter thefailedstate.",
                "Previously, whenever CockroachDB collected a statement bundle when plan-gist-based matching was used, theplan.txtfile would be incomplete. This bug is now fixedâ€”it had been present since the introduction of the plan-gist-based matching feature in v23.1, but was partially addressed in the v24.2 release.",
                "Previously,EXPLAIN ANALYZEof mutation statements would always getactual row count: 1execution statistic for the corresponding mutation node in the plan, regardless of how many rows were actually modified. The bug has been present since before v22.2 and is now fixed.",
                "Fixed a bug where sometimes activating diagnostics for SQL activity appeared unresponsive, with no state or status update upon activating. Now, the status should always reflect that diagnostics are active or that a statement bundle is downloadable.",
                "Theto_regclass,to_regtype,to_regrole, and related functions now returnNULLfor any numerical input argument.",
                "Fixed a rare bug in which a query might fail with the errorcould not find computed column expression for column in tablewhile dropping a virtual computed column from the table. This bug was introduced in v23.2.4.",
                "The optimizer could produce incorrect query plans for queries using trigram similarity filters (e.g.,col % 'val') whenpg_trgm.similarity_thresholdwas set to0. This bug was introduced in v22.2.0 and is now fixed. Note that this issue does not affect v24.2.0 and later releases when theoptimizer_use_trigram_similarity_optimizationsession variable (introduced in v24.2.0) is set to its default valuetrue, as it would skip this behavior.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter abatch timestamp must be after replica GC thresholderror.",
                "Fixed a bug that existed only in pre-release versions of v25.1. The bug could cause creation of a PL/pgSQL routine with a common table expression (CTE) to fail with an error like the following:unexpected root expression: with.",
                "Configuring replication controls on a partition name of an index that is not unique across all indexes will correctly impact only that partition.",
                "TheData distributionpage in Advanced Debug will no longer crash if there areNULLvalues forraw_sql_configincrdb_internal.zones.",
                "Fixed a bug where dropping a table with a trigger using the legacy schema changer could leave an orphaned reference in the descriptor. This occurred when two tables were dependent on each other via a trigger, and the table containing the trigger was dropped.",
                "Addressed a bug that could cause concurrent DML operations to prevent primary key changes from succeeding.",
                "Fixed a bug that prevented transaction retry errors encountered during implicit transactions from being automatically retried internally if theautocommit_before_ddlsession variable was enabled and the statement was a schema change.",
                "A step in the v25.1 upgrade finalization process that required backfilling jobs now uses locks to ensure it makes progress even when there is contention on the jobs table, which will prevent the possibility of becoming stuck under heavy load.",
                "Fixed a bug that could preventSHOW CREATE TABLEfrom working if a database was offline (e.g., due to aRESTOREon that database).",
                "Fixed a bug that prevented starting multi-table logical data replication (LDR) streams on tables that used user-defined types.",
                "Fixed a bug that could causenil pointer dereferenceerrors when executing statements with UDFs. The error could also occur when executing statements with some built-in functions, likeobj_description.",
                "Fixed a bug where a node that was drained as part of decommissioning may have interrupted SQL connections that were still active during drain (and for which drain would have been expected to wait).",
                "Fixed a bug where the fraction completed and internal checkpoints during an index backfill operation would stop getting written if any of the periodic fraction/checkpoint write operations failed. Additional logging was added so that progress is logged in addition to being written to the job record. This bug affected schema change operations, such as creating an index or adding a non-nullable column to a table.",
                "Fixed a bug that could cause gateway nodes to panic when performing anUPSERTon a table with aBOOLprimary key column and a partial index with the primary key column as the predicate expression.",
                "Fixed a bug where CockroachDB could incorrectly evaluate casts to someOIDtypes (likeREGCLASS) in some cases. The bug has been present since at least v22.1.",
                "Transactions that enter theabortedstate now release locks they are holding immediately, provided there is noSAVEPOINTactive in the transaction.",
                "Fixed a bug when running withautocommit_before_ddlthat could cause a runtime error when binding a previously prepared DDL statement.",
                "Fixed a bug where orphaned leases were not properly cleaned up.",
                "Previously, theCREATE LOGICALLY REPLICATEDsyntax would always create the destination side table with the source side name, instead of the user-provided name. This change ensures the user-provided name is used.",
                "Fixed a bug that would preventCREATE TRIGGERandDROP TRIGGERstatements from working if theautocommit_before_ddlsetting was enabled, and if the statement was either sent as a prepared statement or as part of a batch of multiple statements.",
                "Fixed a bug that could cause the upgrade to v25.1 to crash if a job was missing from the virtual table, for example, if a malformed job had no payload information.",
                "The TTL deletion job now includes a retry mechanism that progressively reduces the batch size when encountering contention. This improves the chances of successful deletion without requiring manual adjustments to TTL job settings.",
                "Fixed an issue where removed nodes could leave persistent entries incrdb_internal.gossip_alerts.",
                "Invalid default expressions could cause backfilling schema changes to retry forever.",
                "Fast failback could succeed even if the destination cluster's protected timestamp had been removed, causing the reverse stream to enter a crashing loop. This fix ensures the failback command fast fails.",
                "Fixed an issue where dropping a database with triggers could fail due to an undropped back reference to a trigger function.",
                "Fixed a bug where replication controls on indexes and partitions would not get properly updated during an index backfill (in the declarative schema changer) to its new ID; effectively discarding the replication controls set on it before the backfill.",
                "Addressed a bug whereCREATE SEQUENCEcould succeed under with aDROP SCHEMAorDROP DATABASEin progress.",
                "Fixed a bug in client certificate expiration metrics.",
                "Physical cluster replication (PCR) reader catalogs could have orphan rows insystem.namespaceafter an object is renamed.",
                "Fixed a bug where during validation of a table-level zone configuration, inherited values were incorrectly populated from the default range instead of from the parent database.",
                "Fixed a bug that would send a replica outside of a tenant known region, whenSURVIVE REGION FAILUREwas set and exactly 3 regions were configured."
            ],
            "operational_changes": [
                "In order to selectively capture traces for transactions running in an active workload without having to capture them via statement diagnostic bundles, customers can now use thesql.trace.txn.sample_ratecluster setting to enable tracing for a fraction of their workload. Thesql.trace.txn.enable_thresholdwill still need to be set to a positive value to provide a filter for how slow a transaction needs to be after being sampled to merit emitting a trace. Traces are emitted to theSQL_EXEClogging channel.",
                "Updated TTL job replanning to be less sensitive by focusing specifically on detecting when nodes become unavailable rather than reacting to all plan differences. The cluster settingsql.ttl.replan_flow_thresholdmay have been set to0to work around the TTL replanner being too sensitive; this fix will alleviate that and any instance that had setreplan_flow_thresholdto0can be reset back to the default.",
                "Introduced a cluster setting,sql.stats.error_on_concurrent_create_stats.enabled, which modifies how CockroachDB reacts to concurrent auto stats jobs. The default,true, maintains the previous behavior. Settingsql.stats.error_on_concurrent_create_stats.enabledtofalsewill cause the concurrent auto stats job to be skipped with just a log entry and no increased error counters.",
                "Whenserver.telemetry.hot_ranges_stats.enabledcluster setting is enabled, nodes now log hot ranges every minute if they exceed 250ms of CPU time per second. In multi-tenant deployments, this check occurs every 5 minutes at the cluster level, improving visibility into transient performance issues.",
                "Added a new metric,kv.loadsplitter.cleardirection, which increments when the load-based splitter observes that more than 80% of replica access samples are moving in a single direction (either left/descending or right/ascending).",
                "Added the metricchangefeed.checkpoint.timestamp_countthat measures the number of unique timestamps in a changefeed span-level checkpoint. It may be useful to monitor this metric to determine if quantization settings should be changed.",
                "Logs for hot ranges (hot_ranges_statsevents) have been moved to theHEALTHlogging channel.",
                "To prevent unnecessary queuing in admission control CPU queues, set thegoschedstats.always_use_short_sample_period.enabledcluster setting totruefor any production cluster.",
                "Logical data replication (LDR) now supports partial indexes by default.",
                "Thekv.mvcc_gc.queue_kv_admission_control.enabledcluster setting was retired.",
                "debug zipqueries are now attributed to internal SQL metrics. As a result, users will no longer see their impact on the SQL charts in the DB Console.",
                "Theserver.client_cert_expiration_cache.capacitycluster setting has been removed. Thesecurity.certificate.expiration.clientandsecurity.certificate.ttl.clientmetrics now report the lowest value observed for a user in the last 24 hours.",
                "Previously, the user provided in the source URI in the logical data replication (LDR) stream required theREPLICATIONSOURCEprivilege at the system level. With this change, the user only needs this privilege on the source tables (i.e., a table-level privilege).",
                "AllALTER VIRTUAL CLUSTER REPLICATION JOBcommands for physical cluster replication (PCR), except forALTER VIRTUAL CLUSTER SET REPLICATION SOURCE, will require theREPLICATIONDESTprivilege, in addition toMANAGEVIRTUALCLUSTER.ALTER VIRTUAL CLUSTER SET REPLICATION SOURCEnow requires theREPLICATIONSOURCEprivilege. If the ingestion job was created before v25.1, the user can still alter the replication job without theREPLICATIONDESTprivilege.",
                "Removed thestorage.queue.store-failuresmetric.",
                "Customers must provide URIs as external connections to create logical data replication (LDR) statements.",
                "The following cluster settings have been deprecated:sql.metrics.statement_details.plan_collection.enabledsql.metrics.statement_details.plan_collection.period",
                "Reduced noise when using dynamically provisioned logging sinks.",
                "Added metrics for monitoring changefeed span-level checkpoint creation:changefeed.checkpoint.create_nanos, which measures the time it takes to create a changefeed checkpoint.changefeed.checkpoint.total_bytes, which measures the total size of a changefeed checkpoint in bytes.changefeed.checkpoint.span_count, which measures the number of spans in a changefeed checkpoint.",
                "The following schema changes are now allowlisted to run during LDR.ALTER INDEX RENAME.ALTER INDEX .. NOT VISIBLE.ALTER TABLE .. ALTER COLUMN .. SET DEFAULT.ALTER TABLE .. ALTER COLUMN .. DROP DEFAULT.ALTER TABLE .. ALTER COLUMN SET VISIBLE.",
                "Addedsql.statement_timeout.countto track the number of SQL statements that fail due to exceeding the statement timeout.",
                "Added thesql.transaction_timeout.countmetric to track the number of SQL statements that fail due to exceeding the transaction timeout.",
                "Added thejobs.row_level_ttl.num_delete_batch_retriesmetric to track the number of times the TTL job had to reduce the batch size and try again.",
                "To create a logical data replication (LDR) stream, users require theREPLICATIONDESTprivilege, instead of theREPLICATIONprivilege.",
                "To create a physical cluster replication (PCR) stream, users require theREPLICATIONDESTprivilege, in addition to the already requiredMANAGEVIRTUALCLUSTERprivilege.",
                "Removed thekv.snapshot_receiver.excise.enablecluster setting. Excise is now enabled unconditionally.",
                "Introduced the cluster settingserver.child_metrics.include_aggregate.enabled, which modifies the behavior of Prometheus metric reporting (/_status/vars). By default, it is set totrue, which maintains the existing behavior. It can be sert tofalseto stop the reporting of the aggregate time series that prevents issues with double counting when querying metrics.",
                "When configuring thesql.ttl.default_delete_rate_limitcluster setting, a notice is displayed informing that the TTL rate limit is per leaseholder per node with a link to the docs.",
                "Added a newenvelopetypeenrichedfor changefeeds.",
                "Added support for theenrichedenvelope type to Avro format changefeeds.",
                "The cluster settingchangefeed.new_webhook_sink_enabled/changefeed.new_webhook_sink.enabledis no longer supported. The new webhook sink has been enabled by default since v23.2, and the first version webhook sink has been removed.",
                "The cluster settingchangefeed.new_pubsub_sink_enabled/changefeed.new_pubsub_sink.enabledis no longer supported. The new Google Cloud Pub/Sub sink has been enabled by default since v23.2, and the first version Pub/Sub sink has been removed.",
                "DROP INDEXcan now only be run whensql_safe_updatesis set tofalse."
            ],
            "total_bug_fixes": 159,
            "total_operational_changes": 33,
            "date": "December 12, 2025",
            "release_type": "LTS (Long Term Support)"
        },
        {
            "version": "24.3",
            "url": "https://www.cockroachlabs.com/docs/releases/v24.3",
            "bug_fixes": [
                "A mechanism that prevents unsafe replication changes from causing loss of quorum now functions correctly. An internal function has been fixed to properly return errors, enhancing the reliability of replication safeguards.",
                "Fixed a bug where the job responsible for compacting stats for the SQL activity state could enter an unschedulable state.",
                "Fixed a bug where changefeeds using CDC queries could sometimes unexpectedly fail after a schema change with a descriptor retrieval error.",
                "Fixed a bug in thecockroach node draincommand where draining a node using virtual clusters (such as clusters running Physical Cluster Replication (PCR)) could return before the drain was complete, possibly resulting in shutting down the node while it still had active SQL clients and range leases.",
                "Fixed a bug where anINSERTstatement could fail with a type checking error while adding aBIT(n)column.",
                "Fixed a bug that caused panics when executingCOPYinto a table with hidden columns and expression indexes. The panic only occurred when the session settingexpect_and_ignore_not_visible_columns_in_copywas enabled. This bug was introduced withexpect_and_ignore_not_visible_columns_in_copyin v22.1.0.",
                "Fixed a bug where the presence of duplicate temporary tables in a backup caused the restore to fail with an error containing the textrestoring table desc and namespace entries: table already exists.",
                "Fixed a bug where invalid default expressions could cause backfilling schema changes to retry forever.",
                "Fixed a bug that could cause excessive memory allocations when compacting timeseries keys.",
                "Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column.",
                "Fixed a bug that allowed foreign-key violations to result from some combinations of concurrentREAD COMMITTEDandSERIALIZABLEtransactions. If bothSERIALIZABLEand weaker-isolation transactions will concurrently modify rows involved in foreign-key relationships, theSERIALIZABLEtransactions must have the following session variables set in order to prevent any possible foreign-key violations:SET enable_implicit_fk_locking_for_serializable = on;SET enable_shared_locking_for_serializable = on;SET enable_durable_locking_for_serializable = on;",
                "Added an automatic repair for dangling or invalid entries in thesystem.commentstable.",
                "Fixed a bug where views could not reference thecrdb_regioncolumn from their underlying tables in expressions.",
                "Fixed an issue where themvcc_timestampfield was incorrectly returning zero values when used with CDC queries. The timestamp is now emitted correctly.",
                "Fixed a bug that would allow a race condition in foreign key cascades underREAD COMMITTEDandREPEATABLE READisolation levels.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups.",
                "Fixed a memory accounting issue in the client certificate cache that caused multiple allocations to be reported for the same certificate. The cache now accurately tracks memory usage and includes a safeguard to prevent it from negatively affecting SQL operations.",
                "Fixed a bug wheredebug.zipfiles collected from clusters withdisallow_full_table_scansenabled were missing system table data.",
                "Fixed a memory accounting issue in the client certificate cache that caused multiple allocations to be reported for the same certificate. The cache now accurately tracks memory usage and includes a safeguard to prevent it from negatively affecting SQL operations.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups.",
                "Fixed a data race in thecloudstoragesink.",
                "Fixed an error incrdb_internal.table_spansthat could occur when a table's schema had been dropped.",
                "Fixed a bug wherelibpqclients using the async API could hang with large result sets (Python: psycopg; Ruby: ActiveRecord, ruby-pg).",
                "TheRESET ALLstatement no longer affects the following session variables:is_superuserrolesession_authorizationtransaction_isolationtransaction_prioritytransaction_statustransaction_read_onlyThis better matches PostgreSQL behavior forRESET ALL. In addition, theDISCARD ALLstatement no longer errors whendefault_transaction_use_follower_readsis enabled.",
                "Fixed a bug that would allow a race condition in foreign key cascades underREAD COMMITTEDandREPEATABLE READisolation levels.",
                "Fixed a bug that could cause anAFTERtrigger to fail withclient already committed or rolled back the transactionif the query also contained foreign-key cascades. The bug had existed sinceAFTERtriggers were introduced in v24.3.",
                "Fixed a bug that could potentially cause a changefeed to complete erroneously when one of its watched tables encounters a schema change.",
                "Fixed a bug that caused the SQL Activity > Statement Fingerprint page to fail to load details for statements run with application names containing a#character.",
                "Fixed a bug that could cause thecockroachprocess tosegfaultwhen collecting runtime execution traces (typically collected via theAdvanced Debugpage in the Console).",
                "Fixed a bug that caused the optimizer to ignore index hints when optimizing some forms of prepared statements. This could result in one of two unexpected behaviors: a query errors with the messageindex cannot be used for this querywhen the index can actually be used; or a query uses an index that does not adhere to the hint. The hints relevant to this bug are regular index hints, e.g.,SELECT * FROM tab@index,FORCE_INVERTED_INDEX, andFORCE_ZIGZAG.",
                "Fixed the database filter in the DB Console's Hot Ranges page, which was broken in v24.3.3, and updated the locality filter to remove duplicate entries.",
                "Fixed a bug that could cause stable expressions to be folded in cached query plans. The bug could cause stable expressions likecurrent_settingto return the wrong result if used in a prepared statement. The bug was introduced in v23.2.22, v24.1.14, v24.3.9, v25.1.2, and the v25.2 alpha.",
                "Fixed a bug where prepared statements on schema changes could fail with runtime errors.",
                "Fixed a bug whereALTER TABLEwas modifying identity attributes on columns not backed by a sequence.",
                "Fixed an issue with logical data replication (LDR) where the presence of a unique index could have caused spurious dead-letter queue (DLQ) entries if the unique index had a smaller index ID than the primary key index.",
                "Fixed a bug where using valueschangefeed.aggregator.flush_jitterandmin_checkpoint_frequencysuch thatchangefeed.aggregator.flush_jitter * min_checkpoint_frequency < 1would cause a panic. Jitter will now be disabled in this case.",
                "Fixed a bug in the DB Console where theDrop unused indextag appeared multiple times for an index on theIndexestab of the table details page.",
                "Fixed the following bugs in theSchedulespage of the DB Console:Fixed a bug where theSchedulespage displayed only a subset of a cluster's schedules. TheSchedulespage now correctly displays all schedules.Fixed a bug where manually updating theshoworstatusparameters in the URL (e.g.,http://127.0.0.1:8080/#/schedules?status=ACTIVE&show=50) caused theSchedulespage to fail to load.",
                "Fixed a bug in theSQL Activity Statementspage where filtering byStatement Typereturned no results. The filter now works as expected.",
                "Improved the performance ofSHOW CREATE TABLEon multi-region databases with large numbers of objects.",
                "Fixed a bug where runningDROP INDEXon a hash-sharded index did not properly detect dependencies from functions and procedures on the shard column. This caused theDROP INDEXstatement to fail with an internal validation error. Now the statement returns a correct error message, and usingDROP INDEX ... CASCADEworks as expected by dropping the dependent functions and procedures.",
                "Fixed a bug where a node that was drained as part of decommissioning may have interrupted SQL connections that were still active during drain (and for which drain would have been expected to wait).",
                "Fixed a bug that could lead to schema changes hanging after a cluster recovered from availability issues.",
                "Previously, on a table with multiple column families, CockroachDB could encounter aNon-nullable column \"â€¹Ã—â€º:â€¹Ã—â€º\" with no valueerror in rare cases during table statistics collection. The bug was present since v19.2 and is now fixed.",
                "Fixed a bug that could cause a row-level TTL job to fail with the error \"comparison of two different versions of enum\" if anENUMtype referenced by the table experienced a schema change.",
                "Fixed a bug where the physical cluster replication (PCR) reader catalog job could hit validation errors when schema objects had dependencies between them (for example, when a sequence's default expression was being removed).",
                "Fixed a bug where orphaned leases were not properly cleaned up.",
                "Fixed an internal assertion failure that could occur during operations likeALTER TYPEorALTER DATABASE ... ADD REGIONwhen temporary tables were present.",
                "Fixed a bug that could cause queries that perform work in parallel to ignore the requested quality-of-service level. Affected operations include lookup joins, DistSQL execution, and foreign-key checks.",
                "Fixed a bug that preventedTRUNCATEfrom succeeding if any indexes on the table had back-reference dependencies, such as from a view or function referencing the index.",
                "Fixed a bug where an invalid comment in thesystem.commenttable for a schema object could make it inaccessible.",
                "Fixed a bug in the rangefeed restarts metric that was introduced in v23.2.",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a bug in client certificate expiration metrics,security.certificate.expiration.clientandsecurity.certificate.ttl.client.",
                "Fast failback could succeed even if the standby cluster protected timestamp had been removed, causing the reverse physical cluster replication (PCR) stream to enter a crashing loop. This patch ensures the failback command fast fails.",
                "Fixed a bug that caused changefeeds to fail on startup when scanning a single key.",
                "MVCC garbage collection is now fully subject to IO admission control. Previously, it was possible for MVCC GC to cause store overload (such as LSM inversion) when a large amount of data would become eligible for garbage collection. Should any issues arise from subjecting MVCC GC to admission control, thekv.mvcc_gc.queue_kv_admission_control.enabledcluster setting can be set tofalseto restore the previous behavior.",
                "Fixed a bug where calling a stored procedure could drop the procedure if it hadOUTparameters that were not used by the calling routine. This bug had existed since PL/pgSQLCALLstatements were introduced in v24.1.",
                "Fixed a bug where CockroachDB would encounter an internal error when decoding the gists of plans withCALLstatements. The bug had been present since v23.2.",
                "The reader virtual cluster now starts if the user begins a physical cluster replication (PCR) stream from a cursor viaALTER VIRTUAL CLUSTER virtual_cluster START REPLICATION OF virtual_cluster ON pgurl_physical_cluster WITH READ VIRTUAL CLUSTER.",
                "Fixed a crash due to \"use of enum metadata before hydration\" when using logical data replication (LDR) with user-defined types (UDTs).",
                "Fixed a potential deadlock that could occur during client certificate updates while metrics were being collected. This issue affected the reliability of certificate expiration reporting.",
                "Fixed a bug in v24.1.14, v24.3.7, v24.3.8, and v25.1 that could cause a nil-pointer error when a column's default expression contained a volatile expression (likenextval) as a UDF argument.",
                "Previously, the fieldsmaximum memory usageandmax sql temp disk usagein theEXPLAIN ANALYZEoutput could be under-reported for distributed plans when memory-intensive operations were fully performed on the remote nodes. This is now fixed. The bug existed in v22.1 and later.",
                "TheALTER VIRTUAL CLUSTER SET REPLICATION READ VIRTUAL CLUSTERsyntax is now supported for adding a reader virtual cluster for an existing PCR standby.",
                "Previously, whenever CockroachDB collected a statement bundle when plan-gist-based matching was used,plan.txtwould be incomplete. This is now fixed. The bug had been present since the introduction of plan-gist-based matching in v23.1, and was partially addressed in v24.2.",
                "Fixed a bug where CockroachDB could encounter acannot specify timestamp older than ...error during table statistics collection in some cases (e.g., when the cluster is overloaded). The bug was present since v19.1.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed a rare corruption bug that impactsIMPORTand materialized views.",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed a bug that prevented starting multi-table Logical Data Replication (LDR) streams on tables that used user-defined types.",
                "The TTL deletion job now includes a retry mechanism that progressively reduces the batch size when encountering contention. This improves the chances of successful deletion without requiring manual adjustments to TTL knobs. Also added thejobs.row_level_ttl.num_delete_batch_retriesmetric to track the number of times the TTL job had to reduce the batch size and try again.",
                "Fixed a bug when running with theautocommit_before_ddlsession setting that could cause a runtime error when binding a previously prepared DDL statement.",
                "Fixed a bug where CockroachDB could incorrectly evaluate casts to some OID types (likeREGCLASS) in some cases. The bug had been present since at least v22.1.",
                "Fixed a bug that could cause gateway nodes to panic when performing anUPSERTon a table with aBOOLprimary key column and a partial index with the primary key column as the predicate expression.",
                "Fixed a bug that would prevent theCREATE TRIGGERandDROP TRIGGERstatements from working if theautocommit_before_ddlsetting was enabled, and if the statement was either sent as a prepared statement or as part of a batch of multiple statements.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter abatch timestamp must be after replica GC thresholderror.",
                "Fixed a bug where Physical Cluster Replication (PCR) reader catalogs could have orphaned rows insystem.namespaceafter an object is renamed.",
                "Fixed a bug that could causenil pointer dereferenceerrors when executing statements with user-defined functions (UDFs). The error could also occur when executing statements with some built-in functions, likeobj_description.",
                "Fixed a bug inv24.1.14,v24.3.7,v24.3.8, andv25.1that could cause a nil-pointer error when a column's default expression contained a volatile expression (likenextval) as a UDF argument.",
                "Fixed a bug that could preventSHOW CREATE TABLEfrom working if a database was offline (e.g., due to aRESTOREon that database).",
                "Fixed an issue where dropping a database with triggers could fail due to an undropped backreference to a trigger function.",
                "Fixed a bug where the declarative schema changer allowedCREATE SEQUENCEoperations to proceed even while aDROP SCHEMAorDROP DATABASEwas in progress. Such operations now retry if the parent object has a schema change in progress, preventing new child objects from being created under deleted parent objects.",
                "Fixed a potential deadlock that could occur during client certificate updates while metrics were being collected. This issue affected the reliability of certificate expiration reporting.",
                "Fixed a bug where the fraction completed and internal checkpoints during an index backfill operation would stop getting written if any of the periodic fraction/checkpoint write operations failed. Progress is now logged in addition to being written to the job record. This bug affected schema change operations such as creating an index or adding a non-nullable column to a table.",
                "Fixed a crash due touse of enum metadata before hydrationwhen using logical data replication (LDR) with user-defined types.",
                "Improved S3 credential caching for STS credentials to avoid exceeding the Amazon metadata service rate limit and encountering errors related to AssumeRole API calls when accessing large numbers of files in larger clusters.",
                "Previously, in changefeeds using CDC queries and the Parquet format, the output would include duplicate columns when it contained a user-defined primary key. Now, the columns are de-duplicated columns in the output when writing to Parquet.",
                "Fixed a bug where dropping a table with a trigger using the legacy schema changer could leave an orphaned reference in the descriptor. This occurred when two tables were dependent on each other via a trigger, and the table containing the trigger was dropped.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a\"batch timestamp must be after replica GC threshold\"error.",
                "The Data Distribution and Zone Configs report on the DB Console Advanced Debug page will no longer crash if there areNULLvalues for theraw_sql_configcolumn in thecrdb_internal.zonestable.",
                "Fixed possible index corruption caused by triggers that could occur when the following conditions were satisfied:A query calls a user-defined function (UDF) or stored procedure, and also performs a mutation on a table.The UDF/stored procedure contains a statement that either fires anAFTERtrigger, or fires a cascade that itself fires a trigger.The trigger modifies the same row as the outer statement.Either the outer or inner mutation is something other than anINSERTwithout anON CONFLICTclause.",
                "Fixed a bug where activating statement diagnostics sometimes appeared unresponsive, with no state or status update. The status now always indicates whether diagnostics are active or a statement bundle is available for download.",
                "Fixed a memory leak that could previously occur when evaluating some memory-intensive queries via the vectorized engine in CockroachDB. The leak had been present since v20.2.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a\"batch timestamp must be after replica GC threshold\"error.",
                "Fixed a bug in thekafka_sink_configoption for changefeeds where users were previously unable to set negative GZIP compression levels. Users can now configure theCompressionLevelfield in the range of[-2, 9]where-2enables Huffman encoding and-1sets the default compression.",
                "Fixed a bug that would cause an internal error when the result of aRECORD-returning user-defined function (UDF) was wrapped by another expression (such asCOALESCE) within aVALUESclause.",
                "Fixed a rare bug in which a query could fail with the errorcould not find computed column expression for column in tablewhile dropping a virtual computed column from a table. This bug was introduced in v23.2.4.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a\"batch timestamp ... must be after replica GC threshold\"error.",
                "This fix is present inv24.3.4and v24.3.6, but wasnotreleased inv24.3.5.",
                "CLOSE CURSORstatements are now allowed in read-only transactions, similar to PostgreSQL. The bug had been present since at least v23.1.",
                "ALTER BACKUP SCHEDULEno longer fails on schedules whose collection URI contains a space.",
                "Previously,SHOW CREATE TABLEwas showing incorrect data for inverted indexes. It now shows the correct data that can be input to CockroachDB to recreate the same table.",
                "Fixed a timing issue betweenALTER VIEW .. RENAMEandDROP VIEWthat caused repeated failures in theDROP VIEWjob.",
                "Fixed a bug where querying thepg_catalog.pg_constrainttable while the schema changer was dropping a constraint could result in a query error.",
                "On theDatabasespage, users should no longer see console errors when visiting theDatabasespage directly after node/SQL pod startup.",
                "In theDatabases>Tablespage, theCREATEstatement will now show up as expected for tables with custom schema names.",
                "Queries that perform a cast from the string representation of an array containingGEOMETRYorGEOGRAPHYtypes to a SQLARRAYtype will now succeed.",
                "Previously, cluster backups taken in a multi-region cluster that had configured the system database with a region configuration could not be restored into a non-multi-region cluster. This is now fixed.",
                "Fixed a bug that disregarded tuple labels in some cases. This could cause unexpected behavior, such as when converting a tuple to JSON withto_jsonb. See #136167 for more details. The incorrect removal of tuple labels bug was introduced in v22.1.0, and changes in v24.3.0 made unexpected behavior due to the bug more likely.",
                "Previously, CockroachDB could encounter an internal errorcomparison of two different versions of enumin some cases when a user-defined type was modified within a transaction and the following statements read the column of that user-defined type. The bug was introduced in v24.2 and is now fixed.",
                "Secondary tenants will no longer fatal when issuing HTTP requests during tenant startup.",
                "Fixed a bug where columns created withGENERATED ... AS IDENTITYwith theSERIALtype could incorrectly fail internal validations.",
                "When the session variableallow_role_memberships_to_change_during_transactionis set, it is now possible to create and drop users quickly even when there are contending transactions on thesystem.usersandsystem.role_optionssystem tables.",
                "Fixed a bug where the errorbatch timestamp ... must be after replica GC thresholdcould occur during a schema change backfill operation, and cause the schema change job to retry infinitely. Now this error is treated as permanent, and will cause the job to enter thefailedstate.",
                "Fixed a bug that prevented theCREATEstatement for a routine from being shown in a statement bundle. This happened when the routine was created on a schema other thanpublic. The bug had existed since v23.1.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a\"batch timestamp ... must be after replica GC threshold\"error.",
                "This fix is present in v24.3.4 andv24.3.6, but wasnotreleased inv24.3.5.",
                "Previously, CockroachDB would encounter an internal error when evaluatingFETCH ABSOLUTE 0statements, and this is now fixed. The bug has been present since v22.1.",
                "Fixed an issue where corrupted table statistics could cause thecockroachprocess to crash.",
                "A table that is participating in a logical replication stream can no longer be dropped. Previously this was allowed, which would cause all the replicated rows to end up in the dead-letter queue.",
                "ALTER COLUMN SET NOT NULLwas not enforced consistently when the table was created in the same transaction.",
                "Fixed a bug whereCREATE RELATION / TYPEcould leave dangling namespace entries if the schema was concurrently being dropped.",
                "security.certificate.*metrics will now be updated if a node loads new certificates while running.",
                "Theidle_in_session_timeoutsetting now excludes the time spent waiting for schema changer jobs to complete, preventing unintended session termination during schema change operations.",
                "Fixed a bug that causes the optimizer to use stale table statistics after altering anENUMtype used in the table.",
                "Changes the table, index contents of the hot ranges page in DB console.",
                "Table statistics collection in CockroachDB could previously run intono bytes in account to releaseerrors in some edge cases (when the SQL memory budget, configured via--max-sql-memoryflag, was close to being exhausted). The bug has been present since v21.2 and is now fixed.",
                "CockroachDB now better respectsstatement_timeoutlimit on queries involving the top K sort and merge join operations.",
                "Fixed an issue where license enforcement was not consistently disabled for single-node clusters started withcockroach start-single-node. The fix ensures proper behavior on cluster restarts.",
                "Fixed a bug that caused queries against tables with user-defined types to sometimes fail with errors after restoring those tables.",
                "Fixed a bug that causes an incorrect filesystem to be logged as part of the store information.",
                "Fixed a bug affecting uniqueness enforcement in regional by row tables when using read-committed isolation. The bug, introduced in v24.3.0, could cause internal errors or incorrect uniqueness enforcement in tables that had both non-unique and unique indexes when the region column was not part of the uniqueness constraints.",
                "Fixed a bug that has existed since v24.1 that would cause a set-returning UDF withOUTparameters to return a single row.",
                "Fixed an issue where adding an existing column with theIF NOT EXISTSoption could exit too early, skipping necessary handling of the abstract syntax tree (AST). This could lead to failure of theALTERstatement.",
                "An issue where a schema change could incorrectly cause a changefeed to fail with an assertion error likereceived boundary timestamp ... of type ... before reaching existing boundary of type ...has now been fixed.",
                "Internal scans are now exempt from thesql.defaults.disallow_full_table_scans.enabledsetting, allowing index creation even when the cluster setting is active.",
                "Thepg_catalog.pg_typetable no longer containsNULLvalues for the columnstypinput,typoutput,typreceive, andtypsend.NULLvalues were erroneously added for these columns for thetriggertype in v24.3.0. This could cause unexpected errors with some client libraries.",
                "Fixed a bug that could causeDELETEtriggers not to fire on cascading delete, and which could causeINSERTtriggers to match incorrectly in the same scenario.",
                "Reduced the duration of partitions in the gossip network when a node crashes in order to eliminate false positives in theranges.unavailablemetric.",
                "When a non-admin user runsDROP ROLE IF EXISTSon a user that does not exist, an error is no longer returned.",
                "Fixed a bug that could cause incorrect query results when the optimizer planned a lookup join on an index containing a column of typeCHAR(N),VARCHAR(N),BIT(N),VARBIT(N), orDECIMAL(M, N), and the query held that column constant to a single value (e.g. with an equality filter).",
                "Fixed an unhandled error that would occur ifDROP SCHEMAwas executed on thepublicschema of thesystemdatabase, or on an internal schema likepg_catalogorinformation_schema.",
                "A bug has been fixed that caused incorrect evaluation of some binary expressions involvingCHAR(N)values and untyped string literals with trailing whitespace characters. For example, the expression'f'::CHAR = 'f 'now correctly evaluates totrue.",
                "PreventALTER DATABASEoperations that modify the zone config from hanging if an invalid zone config already exists.",
                "CREATE SCHEMAnow returns the correct error if a schema name is missing.",
                "percentile_contandpercentile_discaggregate functions now supportfloat4data type inputs. Previously, these functions would return an error when used withfloat4values.",
                "security.certificate.*metrics now update correctly when certificates are reloaded during node runtime. Previously, these metrics would not reflect changes to certificates after node startup.",
                "SQL roles created from LDAP groups that contain periods (.) or hyphens (-) in their Common Names (CN) no longer result in authorization failures.",
                "LDAP authorization now supports partial group mapping, allowing users to authenticate even when some LDAP groups do not have corresponding CockroachDB roles. Previously, authentication would fail if any LDAP group lacked a matching database role.",
                "Regional by row tables with uniqueness constraints where the region is not part of those uniqueness constraints and which also contain non-unique indices will now have those constraints properly enforced when modified atREAD COMMITTEDisolation. This bug was introduced in v24.3.0.",
                "Fixed a bug where an LDAP connection would be closed by the server and would not be retried by CockroachDB.",
                "Fixed a bug that prevented LDAP authorization from successfully assigning CockroachDB roles to users when the source group name contained periods or hyphens.",
                "Fixed a bug introduced in v22.2 that could cause significantly increased query latency while executing queries with index or lookup joins when the ordering needs to be maintained",
                "Fixed a bug whereUPSERTstatements on regional by row tables under non-serializable isolations would not display show uniqueness constraints inEXPLAINoutput. Even when not displayed, the constraints were enforced.",
                "Fixed a bug where uniqueness constraints constraints enforced with tombstone writes were not shown in the output ofEXPLAIN (OPT).",
                "Fixed a bug whereDISCARD ALLstatements were erroneously counted under thesql.ddl.countmetric instead of thesql.misc.countmetric.",
                "Fixed a bug that could cause a backup or restore operation on AWS to fail with a KMS error due to a missingdefaultshared config.",
                "Fixed a bug that could prevent a user from running schema change operations on a restored table that was previously apart of a Logic Data Replication (LDR) stream.",
                "Fixed a bug wherechangefeed sink) timers were not correctly registered with the metric system.",
                "Fixed a bug that could cause new connections to fail with the following error after upgrading:ERROR: invalid value for parameter \"vectorize\": \"unknown(1)\" SQLSTATE: 22023 HINT: Available values: off,on,experimental_always. To encounter this bug, the cluster must have:Run on version v21.1 at some point in the pastRunSET CLUSTER SETTING sql.defaults.vectorize = 'on';while running v21.1.Notsetsql.defaults.vectorizeafter upgrading past v21.1 4.Subsequently upgraded to v24.2.upgraded all the way to v24.2.To detect this bug, run the following query:icon/buttons/copySELECT*FROMsystem.settingsWHEREname='sql.defaults.vectorizeIf the command returns1instead ofon, run the following statement before upgrading.icon/buttons/copyRESETCLUSTERSETTINGsql.defaults.vectorize;1is now allowed as a value for this setting, and is equivalent toon.",
                "Fixed a bug in v22.2.13+, v23.1.9+, and v23.2 that could cause the internal errorinterface conversion: coldata.Column isin an edge case.",
                "Fixed a bug introduced in v20.1.0 that could cause erroneousNOT NULLconstraint violation errors to be logged duringUPSERTandINSERTstatements with theON CONFLICT ...DO UPDATEclause that update an existing row and a subset of columns that did not include aNOT NULLcolumn of the table.",
                "Fixed a that could cache and reuse a non-reusable query plan, such as a plan for a DDL orSHOWstatement, whenplan_cache_modewas set toautoorforce_generic_plan, which are not the default options.",
                "Fixed an unhandled error that could occur while running the commandREVOKE ... ON SEQUENCE FROM ... {user}on an object that is not a sequence.",
                "Fixed a panic that could occur while running aCREATE TABLE ASstatement that included asequencewith an invalid function overload.",
                "Users with theadminrolecan now runALTER DEFAULT PRIVILEGES FOR target_role ...on anytarget_role. Previously, this could result in a privilege error, which is incorrect asadmins are allowed to perform any operation.",
                "REASSIGN OWNED BY current_owner_role ...will now transfer ownership of thepublicschema. Previously, it would always skip over thepublicschema even if it was owned by thecurrent_owner_role.",
                "Addressed a rare bug that could preventbackupstaken during aDROP COLUMNoperation with asequenceowner fromrestoringwith the error:rewriting descriptor ids: missing rewrite for <id> in SequenceOwner....",
                "Fixed a bug existing since before v23.1 that could lead to incorrect results in rare cases. The bug requires ajoinbetween two tables with an equality between columns with equivalent, but not identicaltypes(e.g.,OIDandREGCLASS). In addition, the join must lookup into anindexthat includes acomputed columnthat references one of the equivalent columns.",
                "Fixed a bug existing since before v23.1 that could lead to incorrect results in rare cases. The bug requires a lookupjoininto a table with a computedindexcolumn, where thecomputed columnexpression is composite sensitive. A composite sensitive expression can compare differently if supplied non-identical but equivalent input values (e.g.,2.0::DECIMALversus2.00::DECIMAL).",
                "Fixed a bug that caused quotes around the name of a routine to be dropped when it was called within anotherroutine. This could prevent the correct routine from being resolved if the nested routine name was case-sensitive. The bug has existed since v24.1 when nested routines were introduced.",
                "Fixed a bug where theSQL shellwould print out the previous error message when executing thequitcommand.",
                "Fixed a bug where aspan statisticsrequest on a mixed-version cluster resulted in a null pointer exception.",
                "Fixed an issue wherechangefeedswould fail to updateprotected timestamp recordsin the face ofretryable errors.",
                "Thefranz-golibrary has been updated to fix a potential deadlock onchangefeedrestarts.",
                "Fixed a bug that in rare cases could cause incorrect evaluation ofscalar expressionsinvolvingNULLvalues.",
                "Fixed a bug in the queryoptimizerthat in rare cases could cause CockroachDB nodes to crash. The bug could occur when a query contains a filter in the formcol IN (elem0, elem1, ..., elemN)only whenNis very large, (e.g., 1.6+ million), and whencolexists in ahash-sharded index, or exists a table with an indexed,computed columndependent oncol.",
                "Theproretsetcolumn of thepg_catalog.pg_proctable is now properly set totruefor set-returning built-in functions.",
                "Fixed an error that could be caused by using anAS OF SYSTEM TIMEexpression that references a user-defined (or unknown) type name. These kinds of expressions are invalid, but previously the error was not handled properly. Now, a correct error message is returned.",
                "Fixed a bug where JSON values returned bycockroachcommands using the--format=sqlflag were not correctly escaped if they contained double quotes within a string.",
                "Fixed an error that could happen if anaggregate functionwas used as the value in aSETcommand.",
                "Fixed a rare bug introduced in v22.2 in which an update of aprimary keycolumn could fail to update the primary index if it is also the only column in a separate column family.",
                "Fixed a rare bug where dropping a column ofFLOAT4,FLOAT8,DECIMAL,JSON,ARRAY, or collateSTRINGtype stored in a singlecolumn familycould prevent subsequent reading of the table if the column family was not the first column family.",
                "Fixed anunimplementedinternal error that could occur when ordering by aVECTORcolumn.",
                "Fixed a bug where CockroachDB could incorrectly evaluate anIS NOT NULLfilterif it was applied to non-NULLtuples that hadNULLelements (like(1, NULL)or(NULL, NULL)). The bug was present since v20.2.",
                "Fixed a bug related to displaying the names of composite types in theSHOW CREATE TABLEScommand. The names are now shown as two-part names, which disambiguates the output and makes it more portable to other databases.",
                "TheCONCAT()built-in functionnow accepts arguments of any data type.",
                "Fixed a bug that prevented mergedstatisticsfrom being created after injecting statistics or recreatingstatement bundles. This would occur when the injected statistics or statement bundle contained related full and partial statistics.",
                "Fixed a bug where CockroachDB could encounter spurious(error encountered after some results were delivered)ERROR: context cancelederrors in rare cases when evaluating some queries. The bug was present since v22.2. The conditions that triggered the bug were queries that:Had to be executed locally.Had aLIMIT.Have at least twoUNIONclauses.Have some lookup or indexjoinsin theUNIONbranches.",
                "Updated the restorejobdescription fromRESTORE ... FROMtoRESTORE FROM {backup} IN {collectionURI}to reflect the newRESTOREsyntax.",
                "Fixed a bug that could cause aCASEstatement with multiplesubqueriesto produces the side effects of one of the subqueries even if that subquery shouldn't have been evaluated.",
                "Changed theschema changerâ€™s merge process so that it can detectcontention errorsand automatically retry with a smaller batch size. This makes the merge process more likely to succeed without needing to manually tune settings.",
                "SHOW CREATE ALL TYPESnow shows corresponding type comments in its output.",
                "Enforce thestatement_timeoutsession settingwhen waiting forjobsafter aschema changein animplicit transaction.",
                "Fixed a bug where certain dropdowns in theDB Consoleappeared to be empty (with no options to select from) for users of the Safari browser.",
                "Fixed a bug that would cause thehlc_to_timestampfunctionto return an incorrecttimestampfor some inputdecimals.",
                "Fixed a memory leak wherestatement insightobjects could leak if the session was closed without thetransactionfinishing.",
                "Fixed a bug in the public previewWAL failoverfeature that could prevent a node from starting if it crashed during a failover.",
                "Fixed a bug where'infinity'::TIMESTAMPreturned a different result than PostgreSQL.",
                "Fixed a spurious error log from thereplication queueinvolving the text\" needs lease, not adding\".",
                "Using more than oneDECLAREstatement in the definition of auser-defined functionnow correctly declares additional variables.",
                "Fixed a bug in which someSELECT FOR UPDATEorSELECT FOR SHAREqueries usingNOWAITcould still block on locked rows when using theoptimizer_use_lock_op_for_serializablesession settingunderserializableisolation. This bug was introduced withoptimizer_use_lock_op_for_serializablein v23.2.0.",
                "Fixed a bug in theupgradepre-condition for repairing descriptor corruption that could lead to finalization being stuck.",
                "Fixed a bug that caused the optimizer to plan unnecessary post-query uniqueness checks duringINSERT,UPSERT, andUPDATEstatements on tables with partial, unique,hash-sharded indexes. These unnecessary checks added overhead to execution of these statements, and caused the statements to error when executed underREAD COMMITTEDisolation.",
                "Fixed a bug that caused incorrect evaluation ofCASE,COALESCE, andIFexpressions with branches producing fixed-width string-like types, such asCHAR. In addition, theBPCHARtype no longer incorrectly imposes a length limit of1.",
                "Fixed a bug wherezone configurationchanges issued by thedeclarative schema changerwere not blocked if a table had theschema_lockedstorage parameterset.",
                "Fixed a bug that could prevent aCHANGEFEEDfrom being able to resume after being paused for a prolonged period of time.",
                "Fixed a bug where if a client connection was attempting aschema changewhile the sameschema objectswere being dropped, it was possible for the connection to be incorrectly dropped.",
                "Fixed a bug introduced in v23.1 that could cause incorrect results when:The query contained acorrelated subquery.The correlated subquery had aGROUP BYorDISTINCToperator with an outer-column reference in its input.The correlated subquery was in the input of aSELECTorJOINoperator.TheSELECTorJOINhad a filter that set the outer-column reference from (2) equal to a non-outer column in the input of the grouping operator.The grouping column set did not include the replacement column, and functionally determined the replacement column.",
                "Fixed a bug which could cause errors with the message\"internal error: Non-nullable column ...\"when executing statements underREAD COMMITTEDisolation that involved tables withNOT NULLvirtual columns.",
                "Fixed a bug that could cause a very rare internal error\"lists in SetPrivate are not all the same length\"when executing queries.",
                "Fixed a bug that could cause incorrect evaluation ofscalar expressionsinvolvingNULLvalues in rare cases.",
                "SHOW CREATE ALL SCHEMASnow shows corresponding schema comments in its output.",
                "Fixed a bug, introduced in v23.2.0, where creating a newincremental schedule(usingALTER BACKUP SCHEDULE) on afull backup schedulecreated on an older version would fail.",
                "Fixed a bug that could cause an internal error if a table with an implicit (rowid)primary keywas locked from within asubquerylikeSELECT * FROM (SELECT * FROM foo WHERE x = 2) FOR UPDATE;. The error could occur either underREAD COMMITTEDisolation, or with theoptimizer_use_lock_op_for_serializablesession settingenabled.",
                "Fixed a bug wherejobscreated in a session with non-zero sessiontimezone offsetscould hang before starting, or report incorrect creation times when viewed inSHOW JOBSand theDB Console.",
                "Fixed a bug which could result inchangefeeds using CDC queriesfailing due to a system table beinggarbage collected.",
                "ALTER COLUMN TYPEnow errors out when there is apartial indexthat is dependent on the column being altered.",
                "Fixed a bug that prevented buffered file sinks from being included when iterating over all file sinks. This led to problems such as thedebug zipcommand not being able to fetch logs for a cluster where buffering was enabled.",
                "Fixed a bug where backup schedules could advance a protected timestamp too early, which caused incremental backups to fail."
            ],
            "operational_changes": [
                "Introduced a cluster setting,sql.stats.error_on_concurrent_create_stats.enabled, which modifies how CockroachDB reacts to concurrent auto stats jobs. The default,true, maintains the previous behavior. Settingsql.stats.error_on_concurrent_create_stats.enabledtofalsewill cause the concurrent auto stats job to be skipped with just a log entry and no increased error counters.",
                "Updated TTL job replanning to be less sensitive by focusing specifically on detecting when nodes become unavailable rather than reacting to all plan differences. The cluster settingsql.ttl.replan_flow_thresholdmay have been set to0to work around the TTL replanner being too sensitive; this fix will alleviate that and any instance that had setreplan_flow_thresholdto0can be reset back to the default.",
                "Introduced a cluster setting,sql.stats.error_on_concurrent_create_stats.enabled, which modifies how CockroachDB reacts to concurrent auto stats jobs. The default,true, maintains the previous behavior. Settingsql.stats.error_on_concurrent_create_stats.enabledtofalsewill cause the concurrent auto stats job to be skipped with just a log entry and no increased error counters.",
                "Changed the default value of the cluster settingadmission.l0_file_count_overload_thresholdto4000.",
                "SQL queries run on the source cluster by logical data replication (LDR) and physical cluster replication (PCR) will account to internal metrics likesql.statements.active.internalinstead of the metrics likesql.statements.activethat are used to monitor application workload.",
                "The default value of theadmission.l0_file_count_overload_thresholdcluster setting is now4000. This change improves stability under high write load and during Write-Ahead Log (WAL) failover by addressing token exhaustion.",
                "Added the cluster settingserver.child_metrics.include_aggregate.enabled(default:true) that controls the behavior of Prometheus child metrics reporting (/_status/vars). When set totrue, child metrics include an aggregate time series, maintaining the existing behavior. When set tofalse, it stops reporting the aggregate time series, preventing double counting when querying metrics.",
                "Thesys.cpu.host.combined.percent-normalizedmetric has been updated to include additional counters for more accurate host CPU measurement and to reduce underreporting. It now accounts for time spent processing hardware (irq) and software (softirq) interrupts, as well asnicetime, which represents low-priority user-mode activity.",
                "Theserver.client_cert_expiration_cache.capacitycluster setting has been removed. Thesecurity.certificate.expiration.clientandsecurity.certificate.ttl.clientmetrics now report the lowest value observed for a user in the last 24 hours.",
                "SQL queries run on the source cluster by logical data replication (LDR) and physical cluster replication (PCR) will account to internal metrics likesql.statements.active.internalinstead of the metrics likesql.statements.activethat are used to monitor application workload.",
                "Added thesql.transaction_timeout.countmetric to track the number of SQL statements that fail due to exceeding the transaction timeout.",
                "Added thesql.statement_timeout.countto track the number of SQL statements that fail due to exceeding the statement timeout.",
                "Theserver.client_cert_expiration_cache.capacitycluster setting has been removed. Thesecurity.certificate.expiration.clientandsecurity.certificate.ttl.clientmetrics now report the lowest value observed for a user in the last 24 hours.",
                "Reduced noise in dynamically provisioned logging sinks by logging flush errors at most once per minute.",
                "Thecockroach node decommissionCLI command now waits until the target node is drained before marking it as fully decommissioned. Previously, it would start the drain but not wait, leaving the target node briefly in a state where it would be unable to communicate with the cluster but would still accept client requests (which would then hang or hit unexpected errors).",
                "Schema object identifiers (e.g., database names, schema names, table names, and function names) are no longer redacted when logging statements in theEXECorSQL_SCHEMAchannels. If redaction of these names is required, then the new cluster settingsql.log.redact_names.enabledcan be set totrue. The default value of the setting isfalse.",
                "Schema object identifiers (e.g., table names, schema names, function names, and type names) are no longer redacted in theSQL_SCHEMAlog channel.",
                "Added the metricsql.schema_changer.object_count, which counts the number of objects in the cluster.",
                "Thechangefeed.max_behind_nanosmetric now supports scoping with metrics labels.",
                "Removed thesql.auth.resolve_membership_single_scan.enabledcluster setting. This was added out of precaution in case it was necessary to revert back to the old behavior for looking up role memberships, but this escape hatch has never been needed in practice since this was added in v23.1.",
                "Telemetry delivery is now considered successful even in cases of a network timeout. This will prevent throttling in cases outside an operator's control.",
                "When a schema change job is completed, rolls back, or encounters a failure, the time taken since the job began is now logged in a structured log in theSQL_SCHEMAlog channel.",
                "Added a new configurable parameterkv.transaction.max_intents_and_locksthat will prevent transactions from creating too many intents.",
                "Added the metrictxn.count_limit_rejected, which tracks the KV transactions that have been aborted because they exceeded the max number of writes and locking reads allowed.",
                "Added the metrictxn.count_limit_on_response, which tracks the number of KV transactions that have exceeded the count limit on a response.",
                "The metrics scrape HTTP endpoint at/ _status/varswill now truncate HELP text at the first sentence, reducing the metadata for metrics with large descriptions. Customers can still access these descriptions via our docs.",
                "The row-level TTL job now periodically updates the progress meter in the jobs introspection interfaces, includingSHOW JOBSand the Jobs page in the DB console.",
                "Telemetry delivery is now considered successful even in cases where we experience a network timeout. This will prevent throttling in cases outside an operator's control.",
                "Thekvadmission.low_pri_read_elastic_control.enabledcluster setting has been removed, because all bulk requests are now subject to elastic admission control admission by default.",
                "The following metrics have been added for Logic Data Replication (LDR):logical_replication.catchup_ranges: the number of source side ranges conducting catchup scans.logical_replication.scanning_ranges: the number source side ranges conducting initial scans.In the DB Console, these metrics may not be accurate if multiple LDR jobs are running. The metrics are accurate when exported from the Prometheus endpoint.",
                "The backup and restore syntax update ofcockroach workloadwhich was introduced in#134610#has been reverted.",
                "Added a timer for innerchangefeed sinkclient flushes.",
                "Rows replicated by Logical Data Replication inimmediatemode are now considered in the decision to recompute SQL table statistics.",
                "The new cluster settingkvadmission.flow_controller.token_reset_epochcan be used to refill replicationadmission controlv2 tokens. This is an advanced setting. Use it only after consultation with your account team.",
                "The new cluster settinggoschedstats.always_use_short_sample_period.enabled, when set totrue, helps to prevent unnecessary queueing due to CPU [admission control](/docs/v24.3/admission-control.htmls.",
                "The two new metricssql.crud_query.countandsql.crud_query.started.countmeasure the number ofINSERT/UPDATE/DELETE/SELECTqueries executed and started respectively.",
                "When creating a logical data replication stream, anyuser-defined typesin the source and destination are now checked for equivalency. This allows for creating a stream that handles user-defined types without needing to use theWITH SKIP SCHEMA CHECKoption as long as the stream usesmode = immediate.",
                "Logical data replication streams that reference tables withuser-defined typescan now be created with themode = immediateoption.",
                "Admission Controlnow has an integration for pacing snapshot ingest traffic based on disk bandwidth.kvadmission.store.snapshot_ingest_bandwidth_control.enabledis used to turn on this integration. It requires provisioned bandwidth to be set for the store (or cluster through thecluster setting) for it to take effect.",
                "Added validation to check whetheraudit loggingandbuffering configurationsare both present in thefile log sink. Audit logging and buffering configuration should not both exist in the file log sink.",
                "Updated thefile log sinkvalidation message. This would give clear indication to the user about the expected valid configuration.",
                "The following newmetricsshow details aboutreplicationflow control send queue when thecluster settingkvadmission.flow_control.enabledis set totrueand the cluster settingkvadmission.flow_control.modeis set toapply_to_all.kvflowcontrol.tokens.send.regular.deducted.prevent_send_queuekvflowcontrol.tokens.send.elastic.deducted.prevent_send_queuekvflowcontrol.tokens.send.elastic.deducted.force_flush_send_queuekvflowcontrol.range_controller.countkvflowcontrol.send_queue.byteskvflowcontrol.send_queue.countkvflowcontrol.send_queue.prevent.countkvflowcontrol.send_queue.scheduled.deducted_byteskvflowcontrol.send_queue.scheduled.force_flush",
                "The followingmetricshave been renamed:Previous nameNew name-kvflowcontrol.tokens.eval.regular.disconnectedkvflowcontrol.tokens.eval.regular.returned.disconnectkvflowcontrol.tokens.eval.elastic.disconnectedkvflowcontrol.tokens.eval.elastic.returned.disconnectkvflowcontrol.tokens.send.regular.disconnectedkvflowcontrol.tokens.send.regular.returned.disconnectkvflowcontrol.tokens.send.elastic.disconnectedkvflowcontrol.tokens.send.elastic.returned.disconnect",
                "EventsDiskSlownessDetectedandDiskSlownessClearedare now logged when disk slowness is detected and cleared on a store.",
                "Severalcluster settingsallow you to configure rate-limiting traffic to cloud storage over various protocols. These settings begin withcloudstorage.",
                "The newcluster settingkv.range.range_size_hard_capallows you to limit how large arangecan grow beforebackpressureis applied. This can help to mitigate against a situation where a range cannot be split, such as when a range is comprised of a single key due to an issue with the schema or workload pattern or a bug in client application code. The default is 8 GiB, which is 16 times the default max range size. If you have changed the max range size, you may need to adjust this cluster setting or reduce the range size.",
                "The followingkvflowcontrolmetricshave been renamed. After a cluster is finalized on v24.3, old and new metrics will be populated. The previous metrics underkvasdmission.flow_controllerwill be removed.Old metric namesNew metric nameskvadmission.flow_controller.regular_tokens_availablekvflowcontrol.tokens.eval.regular.availablekvadmission.flow_controller.elastic_tokens_availablekvflowcontrol.tokens.eval.elastic.availablekvadmission.flow_controller.regular_tokens_deductedkvflowcontrol.tokens.eval.regular.deductedkvadmission.flow_controller.elastic_tokens_deductedkvflowcontrol.tokens.eval.elastic.deductedkvadmission.flow_controller.regular_tokens_returnedkvflowcontrol.tokens.eval.regular.returnedkvadmission.flow_controller.elastic_tokens_returnedkvflowcontrol.tokens.eval.elastic.returnedkvadmission.flow_controller.regular_tokens_unaccountedkvflowcontrol.tokens.eval.regular.unaccountedkvadmission.flow_controller.elastic_tokens_unaccountedkvflowcontrol.tokens.eval.elastic.unaccountedkvadmission.flow_controller.regular_stream_countkvflowcontrol.streams.eval.regular.total_countkvadmission.flow_controller.elastic_stream_countkvflowcontrol.streams.eval.elastic.total_countkvadmission.flow_controller.regular_requests_waitingkvflowcontrol.eval_wait.regular.requests.waitingkvadmission.flow_controller.elastic_requests_waitingkvflowcontrol.eval_wait.elastic.requests.waitingkvadmission.flow_controller.regular_requests_admittedkvflowcontrol.eval_wait.regular.requests.admittedkvadmission.flow_controller.elastic_requests_admittedkvflowcontrol.eval_wait.elastic.requests.admittedkvadmission.flow_controller.regular_requests_erroredkvflowcontrol.eval_wait.regular.requests.erroredkvadmission.flow_controller.elastic_requests_erroredkvflowcontrol.eval_wait.elastic.requests.erroredkvadmission.flow_controller.regular_requests_bypassedkvflowcontrol.eval_wait.regular.requests.bypassedkvadmission.flow_controller.elastic_requests_bypassedkvflowcontrol.eval_wait.elastic.requests.bypassedkvadmission.flow_controller.regular_wait_durationkvflowcontrol.eval_wait.regular.durationkvadmission.flow_controller.elastic_wait_durationkvflowcontrol.eval_wait.elastic.duration",
                "The newranges.decommissioningmetricshows the number of ranges with a replica on adecommissioningnode.",
                "Newcluster settingshave been added which control the refresh behavior for the cached data in theDatabasespage of theDB Console:obs.tablemetadatacache.data_valid_duration: the duration for which the data insystem.table_metadatais considered valid before a cache reset will occur. Default: 20 minutes.obs.tablemetadatacache.automatic_updates.enabled: whether to automatically update the cache according the validity interval. Default:false.",
                "New gaugemetricssecurity.certificate.expiration.{cert-type}andsecurity.certificate.ttl.{cert-type}show the expiration and TTL for a certificate.",
                "To set thelogging formatforstderr, you can now set theformatfield to any valid format, rather than onlycrdb-v2-tty.",
                "The following newmetricsshow connection latency for each SQL authentication method:Authentication methodMetricCertificateauth_cert_conn_latencyJava Web Token (JWT)auth_jwt_conn_latencyKerberos GSSauth_gss_conn_latencyLDAPauth_ldap_conn_latencyPasswordauth_password_conn_latencySCRAM SHA-256auth_scram_conn_latency",
                "Verbose logging of slowPebblereads can no longer be enabled via the shorthand flag--vmodule=pebble_logger_and_tracer=2, wherepebble_logger_and_tracercontains the CockroachDB implementation of the logger needed by Pebble. Instead, you must list the Pebble files that contain the log statements. For example--vmodule=reader=2,table=2.",
                "The lowestadmission controlpriority for the storage layer has been renamed fromttl-low-pritobulk-low-pri.",
                "New clusters will now have azone configurationdefined for thetimeseriesrange, which specifiesgc.ttlsecondsand inherits all other attributes from the zone config of thedefaultrange. This zone config will also be added to a cluster that isupgradedto v24.3 if it does not already have a zone config defined."
            ],
            "total_bug_fixes": 222,
            "total_operational_changes": 55,
            "date": "December 12, 2025",
            "release_type": "LTS (Long Term Support)"
        },
        {
            "version": "24.1",
            "url": "https://www.cockroachlabs.com/docs/releases/v24.1",
            "bug_fixes": [
                "Fixed a bug where anINSERTstatement could fail with a type checking error while adding aBIT(n)column.",
                "Fixed a bug that caused panics when executingCOPYinto a table with hidden columns and expression indexes. The panic only occurred when the session settingexpect_and_ignore_not_visible_columns_in_copywas enabled. This bug was introduced withexpect_and_ignore_not_visible_columns_in_copyin v22.1.0.",
                "Fixed a bug where the presence of duplicate temporary tables in a backup caused the restore to fail with an error containing the textrestoring table desc and namespace entries: table already exists.",
                "Fixed a bug wheredebug.zipfiles collected from clusters withdisallow_full_table_scansenabled were missing system table data.",
                "Fixed a bug where updating column default expressions would incorrectly remove sequence ownerships for the affected column.",
                "Fixed a bug where views could not reference thecrdb_regioncolumn from their underlying tables in expressions.",
                "Fixed an issue where themvcc_timestampfield was incorrectly returning zero values when used with CDC queries. The timestamp is now emitted correctly.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups.",
                "Fixed a bug that could cause some errors returned by attempts to upload backup data to external storage providers to be undetected, potentially causing incomplete backups.",
                "Fixed a data race in thecloudstoragesink.",
                "Fixed a bug wherelibpqclients using the async API could hang with large result sets (Python: psycopg; Ruby: ActiveRecord, ruby-pg).",
                "Fixed a bug that could potentially cause a changefeed to complete erroneously when one of its watched tables encounters a schema change.",
                "Fixed a bug that caused theSQL Activity>Statement Fingerprintpage to fail to load details for statements run with application names containing a#character.",
                "Fixed a bug that could cause thecockroachprocess tosegfaultwhen collecting runtime execution traces (typically collected via theAdvanced Debugpage in the Console).",
                "Fixed a bug that could cause stable expressions to be folded in cached query plans. The bug could cause stable expressions likecurrent_settingto return the wrong result if used in a prepared statement. The bug was introduced in v23.2.22, v24.1.14, v24.3.9, v25.1.2, and the v25.2 alpha.",
                "Fixed a bug where prepared statements on schema changes could fail with runtime errors.",
                "Fixed a bug whereALTER TABLEwas modifying identity attributes on columns not backed by a sequence.",
                "Fixed a bug where CockroachDB could encounter acannot specify timestamp older than ...error during table statistics collection in some cases (e.g., when the cluster is overloaded). The bug was present since v19.1.",
                "Fixed a bug in the DB Console where tables with page size dropdowns failed to update when a new page size option was selected. Tables now update correctly.",
                "Fixed the following bugs in theSchedulespage of the DB Console:Fixed a bug where theSchedulespage displayed only a subset of a cluster's schedules. TheSchedulespage now correctly displays all schedules.Fixed a bug where manually updating theshoworstatusparameters in the URL (e.g.,http://127.0.0.1:8080/#/schedules?status=ACTIVE&show=50) caused theSchedulespage to fail to load.",
                "Fixed a bug in theSQL Activity Statementspage where filtering byStatement Typereturned no results. The filter now works as expected.",
                "Improved the performance ofSHOW CREATE TABLEon multi-region databases with large numbers of objects.",
                "Fixed a bug that could lead to schema changes hanging after a cluster recovered from availability issues.",
                "Previously, on a table with multiple column families, CockroachDB could encounter aNon-nullable column \"â€¹Ã—â€º:â€¹Ã—â€º\" with no valueerror in rare cases during table statistics collection. The bug was present since v19.2 and is now fixed.",
                "Fixed a bug where orphaned leases were not properly cleaned up.",
                "Fixed an internal assertion failure that could occur during operations likeALTER TYPEorALTER DATABASE ... ADD REGIONwhen temporary tables were present.",
                "Fixed a bug that could cause queries that perform work in parallel to ignore the requested quality-of-service level. Affected operations include lookup joins, DistSQL execution, and foreign-key checks.",
                "Fixed a bug that preventedTRUNCATEfrom succeeding if any indexes on the table had back-reference dependencies, such as from a view or function referencing the index.#146323\\",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a bug that caused changefeeds to fail on startup when scanning a single key.",
                "Fixed a bug in the client certificate expiration metricssecurity.certificate.expiration.clientandsecurity.certificate.ttl.client.",
                "Fixed a bug in v24.1.14, v24.3.7, v24.3.8, and v25.1 that could cause a nil-pointer error when a column's default expression contained a volatile expression (likenextval) as a UDF argument.",
                "MVCC garbage collection is now fully subject to IO admission control. Previously, it was possible for MVCC GC to cause store overload (such as LSM inversion) when a large amount of data would become eligible for garbage collection. Should any issues arise from subjecting MVCC GC to admission control, thekv.mvcc_gc.queue_kv_admission_control.enabledcluster setting can be set tofalseto restore the previous behavior.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed a bug where CockroachDB would encounter an internal error when decoding the gists of plans withCALLstatements. The bug had been present since v23.2.",
                "Fixed a bug where calling a stored procedure could drop the procedure if it hadOUTparameters that were not used by the calling routine. This bug had existed since PL/pgSQLCALLstatements were introduced in v24.1.",
                "Previously, the fieldsmaximum memory usageandmax sql temp disk usagein theEXPLAIN ANALYZEoutput could be under-reported for distributed plans when memory-intensive operations were fully performed on the remote nodes. This is now fixed. The bug existed in v22.1 and later.",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a \"batch timestamp must be after replica GC threshold\" error.",
                "Fixed a bug that could cause gateway nodes to panic when performing anUPSERTon a table with aBOOLprimary key column and a partial index using the primary key column as the predicate expression.",
                "Fixed a bug whereCREATE SEQUENCEwithout concurrent DDL operations could hit a retry error due to incorrect schema modification.",
                "Fixed a bug where CockroachDB could incorrectly evaluate casts to some OID types (e.g.,REGCLASS). This issue had been present since at least v22.1.",
                "Fixed a bug that could causenil pointer dereferenceerrors when executing statements with user-defined functions (UDFs) or certain built-in functions likeobj_description.",
                "Fixed a bug where nodes drained during decommissioning could interrupt active SQL connections unexpectedly, even when drain was expected to wait for them to complete.",
                "Fixed a bug where the fraction completed and internal checkpoints during an index backfill operation would stop being written if any periodic fraction/checkpoint write failed. Progress is now additionally logged to aid debugging. This bug affected schema changes such as creating an index or adding a non-nullable column.",
                "Fixed a bug that could preventSHOW CREATE TABLEfrom working if a database was offline (e.g., due to aRESTORE).",
                "Fixed a bug where tuple labels were sometimes disregarded, causing unexpected behavior, such as when converting a tuple toJSONwithto_jsonb. This bug existed since v22.1.0 and became more likely to cause issues after changes in v24.1.7.",
                "Fixed a bug where the declarative schema changer allowedCREATE SEQUENCEoperations to proceed even while aDROP SCHEMAorDROP DATABASEwas in progress. Such operations now retry if the parent object has a schema change in progress.",
                "Fixed a bug inv24.1.14,v24.3.7,v24.3.8, andv25.1that could cause a nil-pointer error when a column's default expression contained a volatile expression (likenextval) as a UDF argument.",
                "Fixed a bug that, under rare circumstances, could cause draining a node to fail with the error message \"some sessions did not respond to cancellation within 1s\".",
                "Fixed a bug that prevented theCREATEstatement for a routine from being shown in a statement bundle. This happened when the routine was created on a schema other thanpublic. The bug had existed since v23.1.",
                "Fixed a memory leak that could previously occur when evaluating some memory-intensive queries via the vectorized engine in CockroachDB. The leak had been present since v20.2.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a \"batch timestamp must be after replica GC threshold\" error.",
                "Removed duplicate columns in the Parquet output from changefeeds using CDC queries.",
                "Fixed a rare bug in which a query might fail with the error \"could not find computed column expression for column in table\" while dropping a virtual computed column from the table. This bug was introduced in v23.2.4.",
                "Fixed a bug that would cause an internal error when the result of aRECORD-returning user-defined function (UDF) was wrapped by another expression (such asCOALESCE) within aVALUESclause.",
                "TheData Distributionreport on theAdvanced Debugpage will no longer crash if there are null values forraw_sql_configincrdb_internal.zones.",
                "Upgraded the Sarama Kafka client library to pick up a fix for a race condition bug that could occur when Kafka throttling was enabled.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a\"batch timestamp ... must be after replica GC threshold\"error.",
                "This fix is present in v24.1.11 andv24.1.13, but wasnotreleased inv24.1.12.",
                "ALTER BACKUP SCHEDULEno longer fails on schedules with a collection URI that contains a space.",
                "Previously,SHOW CREATE TABLEwas showing incorrect data with regards to inverted indexes. It now shows the correct data that can be repeatedly entered back into CockroachDB to recreate the same table.",
                "Fixed a bug where querying thepg_catalog.pg_constrainttable while the schema changer was dropping a constraint could result in a query error.",
                "Fixed a timing issue betweenALTER VIEW .. RENAMEandDROP VIEWthat caused repeated failures in theDROP VIEWjob.",
                "Queries that perform a cast from the string representation of an array containingGEOMETRYorGEOGRAPHYtypes to a SQL array type will now succeed.",
                "security.certificate.*metrics will now be updated if a node loads new certificates while running.",
                "When the session variableallow_role_memberships_to_change_during_transactionis set, it is now possible to create and drop users quickly even when there are contending transactions on thesystem.usersandsystem.role_optionssystem tables.",
                "Fixed a bug where the errorbatch timestamp ... must be after replica GC thresholdcould occur during a schema change backfill operation, and cause the schema change job to retry infinitely. Now this error is treated as permanent, and will cause the job to enter thefailedstate.",
                "CockroachDB could previously hit a bounded memory leak when collecting table statistics on a table that had both very wide (10KiB or more) and relatively small (under 400B)BYTES-like values within the same row. This has been present since before v19.2. Additionally, in v24.1.0, a bug was introduced that made this leak also apply toSTRING-like values.",
                "Fixed a bug that could causeSHOW TABLESand other introspection operations to encounter a\"batch timestamp ... must be after replica GC threshold\"error.",
                "This fix is present in v24.1.11 andv24.1.13, but wasnotreleased inv24.1.12.",
                "Fixed a bug whereALTER COLUMN SET NOT NULLwas not enforced consistently when the table was created in the same transaction.",
                "Fixed a bug whereCREATE RELATION / TYPEcould leave dangling namespace entries if the schema was concurrently being dropped.",
                "Theidle_in_session_timeoutsetting now excludes the time spent waiting for schema changer jobs to complete, preventing unintended session termination during schema change operations.",
                "Fixed a bug that caused the optimizer to use stale table statistics after altering anENUMtype used in the table.",
                "Table statistics collection in CockroachDB could previously run intono bytes in account to releaseerrors in some edge cases (when the SQL memory budget, configured via--max-sql-memoryflag, was close to being exhausted). The bug had been present since v21.2 and is now fixed.",
                "CockroachDB now better respects thestatement_timeoutlimit on queries involving the top K sort and merge join operations.",
                "Fixed an issue where license enforcement was not consistently disabled for single-node clusters started withcockroach start-single-node. The fix ensures proper behavior on cluster restarts.",
                "Fixed a bug that caused queries against tables with user-defined types to sometimes fail with errors after restoring those tables.",
                "Fixed a bug that caused an incorrect filesystem to be logged as part of the store information.",
                "Fixed a bug that had existed since v24.1 that would cause a set-returning UDF withOUTparameters to return a single row.",
                "Fixed a bug that could cause an internal error if a table with an implicit (rowid) primary key was locked from within a subquery, e.g.:SELECT * FROM (SELECT * FROM foo WHERE x = 2) FOR UPDATE;. The error could occur either underREAD COMMITTEDisolation, or withoptimizer_use_lock_op_for_serializableenabled.",
                "Fixed an issue where adding an existing column with theIF NOT EXISTSoption could exit too early, skipping necessary handling of the abstract syntax tree (AST). This could lead to failure of theALTERstatement.",
                "Fixed an issue where a schema change could incorrectly cause a changefeed to fail with an assertion error likereceived boundary timestamp ... of type ... before reaching existing boundary of type ....",
                "Internal scans are now exempt from thesql.defaults.disallow_full_table_scans.enabledsetting, allowing index creation even when the cluster setting is active.",
                "Using more than oneDECLAREstatement in the definition of a user-defined function (UDF) now correctly declares additional variables.",
                "Fixed an issue where corrupted table statistics could cause thecockroachprocess to crash.",
                "Fixed a bug that could cause the password for therootuser to be deleted while upgrading to v24.1. This bug only affected clusters that were initially created with v22.2 or earlier. The same bug could also cause thedefaultdbandpostgresdatabases to be recreated during the upgrade to v24.1 if they had been previously deleted.",
                "CLOSE CURSORstatements are now allowed in read-only transactions, similar to PostgreSQL. The bug had been present since at least v23.1.",
                "Fixed a bug where CockroachDB could encounter an internal errorinterface conversion: coldata.Column isin an edge case. The bug was present in v22.2.13+, v23.1.9+, and v23.2+.",
                "Fixed an unhandled error that could occur when usingREVOKE ... ON SEQUENCE ... FROM useron an object that is not a sequence.",
                "Fixed a bug that caused incorrectNOT NULLconstraint violation errors onUPSERTandINSERT ... ON CONFLICT ... DO UPDATEstatements when those statements updated an existing row and a subset of columns that did not include aNOT NULLcolumn of the table. This bug had been present since at least v20.1.0.",
                "Addressed a panic that could occur insideCREATE TABLE ASif sequence builtin expressions had invalid function overloads.",
                "String constants can now be compared against collated strings.",
                "Previously, when executing queries with index / lookup joins where ordering needed to be maintained, CockroachDB's behavior could lead to increased query latency, potentially by several orders of magnitude. This bug was introduced in v22.2, and is now fixed.",
                "Fixed a bug whereDISCARD ALLstatements were counted under thesql.ddl.countmetric. Now these statements will be counted under thesql.misc.countmetric.",
                "Fixed a bug whereDROP CASCADEwould occasionally panic with anun-dropped backrefmessage on partitioned tables.",
                "Reduced the duration of partitions in the gossip network when a node crashes. This eliminates false positives in theranges.unavailablemetric.",
                "As a non-admin user who runsDROP ROLE IF EXISTSon a user that does not exist, you no longer get an error message.",
                "Fixed a bug that caused quotes around the name of a routine to be dropped when the routine was called within another routine. This could prevent the correct routine name from being resolved if the nested routine name was case-sensitive. The bug has existed since v24.1, when nested routines were introduced.",
                "Fixed a bug that could cause incorrect query results when the optimizer planned a lookup join on an index containing a column of typeCHAR(N),VARCHAR(N),BIT(N),VARBIT(N), orDECIMAL(M, N), and the query held that column constant to a single value (for example, with an equality filter).",
                "Fixed an unhandled error that would occur ifDROP SCHEMAwas executed on thepublicschema of thesystemdatabase, or on an internal schema, such aspg_catalogorinformation_schema.",
                "Fixed a bug that caused incorrect evaluation of some binary expressions involvingCHAR(N)values and untyped string literals with trailing whitespace characters. For example, the expression'f'::CHAR = 'f 'now correctly evaluates totrue.",
                "CREATE SCHEMAnow returns the correct error if a the schema name is missing.",
                "Fixed a bug where timers were not correctly registered with the metric system.",
                "Fixed a bug where the command-line interface would not correctly escape JSON values that had double quotes inside a string when using the--format=sqlflag.",
                "Fixed an error that could occur if aSETcommand used an aggregate function as the value.",
                "Added automated clean-up and validation for dropped roles inside of default privileges.",
                "Fixed a bug that could causeRESTOREto hang after encountering transient errors from the storage layer.",
                "Fixed a rare bug that could prevent a backup from being restored and could cause the errorrewriting descriptor ids: missing rewrite for <id> in SequenceOwner.... This bug could occur only if aDROP COLUMNoperation dropped a sequence while the backup was running.",
                "Fixed a bug that caused incorrect evaluation of aCASE,COALESCE, orIFexpression with a branch that produced fixed-width string-like types, such asCHAR.",
                "Fixed a bug that could cause theBPCHARtype to incorrectly impose a length limit of 1.",
                "Fixed a bug introduced before v23.1 that could cause incorrect results when a join evaluates columns with equivalent but non-identical types, such asOIDandREGCLASS, for equality. The issue arises when the join performs an index lookup on an index that includes a computed column referencing one of the equivalent columns.",
                "Fixed a bug introduced before v23.1 that could cause a composite sensitive expression to compare differently if comparing equivalent but non-identical input values, such as2.0::DECIMALand2.00::DECIMAL. The issue arises when the join performs an index lookup on a table with a computed index column where the computed column expression is composite sensitive.",
                "Fixed a bug where a span statistics request on a mixed-version cluster could result in a null pointer exception.",
                "Updated thefranz-golibrary to fix a potential deadlock when a changefeed restarts.",
                "Fixed a bug where a changefeed could fail to update protected timestamp records after a retryable error.",
                "Fixed a bug where a changefeed that used change data capture queries could fail after a system table was garbage collected.",
                "Fixed a rare bug introduced in v22.2 where an update of a primary key column could fail to update the primary index if it is also the only column in a separate column family.",
                "Fixed a bug where theproretsetcolumn of thepg_catalog.pg_proctable was incorrectly set tofalsefor builtin functions that return a set.",
                "Fixed a bug that could cause incorrect evaluation of scalar expressions withNULLvalues.",
                "Fixed a rare bug in the query optimizer that could cause a node to crash if a query contained a filter in the formcol IN (elem0, elem1, ..., elemN)whenNis very large, in the order of millions, and whencolexists in a hash-sharded index or when a table with an indexed computed column depends oncol.",
                "Fixed a bug where anALTER DEFAULT PRIVILEGES FOR target_role ...command could result in an erroneous privilege error when run by a user with theadminrole.",
                "Fixed a bug where aREASSIGN OWNED BYcommand would fail to transfer ownership of the public schema, even when the schema was owned by the target role.",
                "Fixed a panic when resolving the types of anAS OF SYSTEM TIMEexpression.",
                "Fixed a bug in whichSHOW CLUSTER SETTING FOR VIRTUAL CLUSTERwould erroneously returnNULLfor some settings.",
                "Addressed a bug in theupgradepre-condition for repairing descriptor corruption, which could lead to upgrade finalization being stuck.",
                "Fixed a potential memory leak inchangefeedsusing acloud storage sink. The memory leak could occur if bothchangefeed.fast_gzip.enabledandchangefeed.cloudstorage.async_flush.enabledweretrue, and the changefeed received an error while attempting to write to the cloud storage sink.",
                "Fixed a bug in which someSELECT FOR UPDATEorSELECT FOR SHAREqueries usingNOWAITcould still block on locked rows when using theoptimizer_use_lock_op_for_serializablesession settingunderSERIALIZABLEisolation. This bug was introduced withoptimizer_use_lock_op_for_serializablein v23.2.0.",
                "Fixed a bug that caused theoptimizerto plan unnecessary post-query uniqueness checks duringINSERT,UPSERT, andUPDATEstatements on tables withpartial,unique,hash-sharded indexes. These unnecessary checks added overhead to execution of these statements, and caused the statements to error when executed underREAD COMMITTEDisolation.",
                "Previously, if a connection was attempting aschema changewhile the same schema objects were being dropped, it was possible for the connection to be incorrectly dropped. This is now fixed.",
                "Fixed a bug that could result in the inability to garbage collect anMVCCrange tombstone within aglobal table.",
                "Fixed a bug that could cause errors with the messageinternal error: Non-nullable column ...when executing statements underREAD COMMITTEDisolation that involved tables withNOT NULLvirtual columns.",
                "Fixed a bug that could cause incorrect results for queries containing a correlated subquery with aGROUP BYorDISTINCT ONoperator referencing an outer column. This issue would occur if the correlated subquery was in the input of aSELECTorJOINoperator that had a filter equating the outer-column reference to a non-outer column in the grouping operator's input, while the grouping column set did not include the replacement column but functionally determined it. This bug was introduced in v23.1.",
                "The AWS endpoint and cloud custom HTTP client configuration are now considered whenimplicit authenticationis used for cloud storage. Previously, these were only considered when using explicit credentials.",
                "Fixed a bug where jobs created in sessions with non-zero session timezone offsets could hang before starting or report incorrect creation times when viewed inSHOW JOBSand the DB Console.",
                "Fixed a bug that could prevent achangefeedfrom being able to resume after being paused for a prolonged period of time.",
                "Fixed a bug where backup schedules could advance a protected timestamp too early, which caused incremental backups to fail.",
                "Previously,declarativeand legacyschema changeswere incorrectly allowed to be run concurrently, which could lead to failing or hung schema change jobs.",
                "Fixed a bug that caused errors likeERROR: column 'crdb_internal_idx_expr' does not existwhen accessing a table with anexpression indexwhere the expression evaluates to anENUMtype, for example,CREATE INDEX ON t ((col::an_enum)).",
                "Fixed a bug whereNaNorInfcould not be used as the default value for a parameter inCREATE FUNCTIONstatements.",
                "Fixed a bug in whichSELECT ... FOR UPDATEandSELECT ... FOR SHAREqueries usingSKIP LOCKEDand aLIMITand/or anOFFSETcould return incorrect results underREAD COMMITTEDisolation. This bug was present when support forSKIP LOCKEDunderREAD COMMITTEDisolation was introduced in v24.1.0.",
                "Fixed a bug in which someSELECT ... FOR UPDATEorSELECT ... FOR SHAREqueries usingSKIP LOCKEDcould still block on locked rows when usingoptimizer_use_lock_op_for_serializableunderSERIALIZABLEisolation. This bug was present whenoptimizer_use_lock_op_for_serializablewas introduced in v24.1.0.",
                "Function input parameters foruser-defined functionscan no longer be of theVOIDtype, which matches the behavior of PostgreSQL.",
                "Fixed a bug in the public preview ofWrite Ahead Log (WAL) Failoverthat could prevent a node from starting if it crashed during a failover.",
                "Starting nodescould fail with:could not insert session ...: unexpected value, if an ambiguous result error was encountered when inserting into thesqllivenesstable.",
                "Internally issued queries that are not initiated within aSQL sessionno longer respect astatement timeout. This includes: backgroundjobs, queries issued by theDB Consolethat perform introspection, and theCloud SQL shell.",
                "Fixed a rare bug inSHOW CLUSTER SETTINGthat could cause it to fail with an error liketimed out: value differs between local setting and KV.",
                "Fixed a bug where theschema_lockedtable parameterdid not prevent a table from being referenced by aforeign key.",
                "Fixed a bug where therequire_explicit_primary_keyssession variablewould aggressively prevent allCREATE TABLEstatements from working.",
                "Fixed a slow-building memory leak when usingKerberos authentication.",
                "Fixed a potential memory leak inchangefeedsusing acloud storage sink. The memory leak could occur if both the cluster settingschangefeed.fast_gzip.enabledandchangefeed.cloudstorage.async_flush.enabledare set totrueand the changefeed received an error while attempting to write to the cloud storage sink.",
                "Fixed a bug that prevented buffered file sinks from being included when iterating over all file sinks. This led to problems such as thedebug zipcommand not being able to fetch logs for a cluster where buffering was enabled.",
                "Fixed a bug introduced in v23.2.0 in which CockroachDB would hit an internal error when evaluatingINSERTsintoREGIONAL BY ROWtables where the source was aVALUESclause with a single row and at least one Boolean expression.",
                "Fixed a bug in which theDISCARDstatement was disallowed when thesession settingdefault_transaction_read_onlywas set toon.",
                "In theDB Console event log,ALTER ROLEevents now display correctly even when norole optionsare included in theALTER ROLEstatement.",
                "Fixed a formatting issue with thesql_sequence_cached_nodevalue of theserial_normalizationsession setting. This could lead to an error connecting to CockroachDB if this value was set as the default forserial_normalizationvia the cluster settingsql.defaults.serial_normalization.",
                "Fixed a bug wheredroppingENUMvaluesthat were referenced byindex expressionscould fail with an error.",
                "Fixed a bug that caused a memory leak when executing SQL statements withcomments, for example,SELECT /* comment */ 1;. Memory owned by a SQL session would continue to grow as these types of statements were executed. The memory would only be released when closing theSQL session. This bug had been present since v23.1.",
                "Fixed a bug whereschema changescould hang if the lease rangefeed stopped receiving updates.",
                "Fixed small memory leaks that would occur duringchangefeedcreation.",
                "Fixed a memory leak that could occur when specifying a non-existentvirtual clustername in the connection string.",
                "Fixed a bug whereCREATE INDEX IF NOT EXISTSwould not correctly short-circuit if the given index already existed.",
                "Fixed a bug in syntax validation, in which theDESCENDINGclause was not allowed for non-terminal columns of aninverted index. Only the last column of an inverted index should be prevented from beingDESCENDING. This is now properly checked.",
                "Fixed a bug where anindexcould store a column in the primary index if that column had a mixed-case name.",
                "Setting or dropping a default value on acomputed columnis now blocked, even forNULLdefaults. Previously, setting or dropping a default value on a computed column was a no-op.",
                "Fixed a bug that could cause spurious user permission errors when multiple databases shared a common schema with a routine referencing a table. The bug had existed since v22.2 whenuser-defined functions (UDFs)were introduced.",
                "Fixed a bug wheredebug zipwould return an error while fetching unstructured/malformed logs.",
                "Fixed a bug where a hash-shardedconstraintcould not be created if it referred to columns that had a backslash in the name.",
                "Fixed a bug in which the output ofEXPLAIN (OPT, REDACT)for variousCREATEstatements was not redacted. This bug had existed sinceEXPLAIN (REDACT)was introduced in v23.1 and affects the following statements:EXPLAIN (OPT, REDACT) CREATE TABLEEXPLAIN (OPT, REDACT) CREATE VIEWEXPLAIN (OPT, REDACT) CREATE FUNCTION",
                "Fixed a bug where collection ofdebug informationfor very long-runningjobscould use excessive space in thejob_infosystem table and cause some interactions with the jobs system to become slow.",
                "Fixed a bug where a change to auser-defined type (UDT)could cause queries against tables using that type to fail with an error:histogram.go:694: span must be fully contained in the bucket. The change to the user-defined type could come directly from anALTER TYPEstatement, or indirectly from anALTER DATABASE ADD REGIONorDROP REGIONstatement (which implicitly change thecrdb_internal_regiontype). This bug has existed since UDTs were introduced in v20.2.",
                "Fixed a bug in which constantLIKEpatterns containing certain sequences of backslashes did not become constrained scans. This bug has been present since v21.1.13 when support for building constrained scans fromLIKEpatterns containing backslashes was added.",
                "Fixed the statistics estimation code in theoptimizerso it does not use the empty histograms produced ifhistogram collectionhas been disabled during stats collection due to excessive memory utilization. Now the optimizer will rely on distinct counts instead of the empty histograms and should produce better plans as a result. This bug has existed since CockroachDB v22.1.",
                "Fixed a bug whereCREATE TABLEstatements withindex expressionscould hit undefined column errors ontransaction retries.",
                "Fixed a bug where CockroachDB would hit an internal error when evaluatingINSERTsintoREGIONAL BY ROWtables where the source is aVALUESclausewith a single row and at least one boolean expression. The bug was introduced in v23.2.0.",
                "Fixed a bug incockroach debug tsdumpwhere the command fails when a custom SQL port is used and the--format=rawflag is provided.",
                "Fixed a bug where auser-defined function (UDF)that shared a name with abuilt-in functionwould not be resolved, even if the UDF had higher precedence according to thesearch_pathvariable.",
                "Fixed a bug that causedbackground jobsto incorrectly respect a statement timeout.",
                "Fixed a bug whereALTER DATABASE ... DROP REGIONcould fail if any tables under the given database haveindexes on expressions.",
                "Fixed a PostgreSQL incompatibility bug when inputtingpublicas user name forbuilt-in functionssuch ashas_database_privilegeandhas_schema_privilege.",
                "Fixed a bug whenrestoringa database with acomposite type.",
                "Fixed a bug where theDatabasespage crashed if the range information was not available.",
                "Fixed a bug where CockroachDB could incorrectly evaluate anIS NOT NULLfilter if it was applied to non-NULLtuples that hadNULLelements, such as(1, NULL)or(NULL, NULL). This bug has existed since v20.2.",
                "Thesql_sequence_cached_nodevalue of theserial_normalizationsettingwas not correctly formatted. This could lead to errors while connecting to CockroachDB if the default value ofserial_normalizationwas set toserial_normalization. The formatting bug was fixed, which also fixes the errors when connecting.",
                "SHOW TYPESnow includesuser-defined composite types. It had omitted those types ever since composite types were added in v23.1.",
                "Fixed a crash introduced in v24.1.0-beta.2 that could occur when planningstatisticscollection on a table with avirtual computed columnusing auser-defined typewhen thecluster settingsql.stats.virtual_computed_columns.enabled(introduced in v24.1.0-alpha.1) was set totrue.",
                "Fixed handling in thedeclarative schema changerwhen columns are included in theSTORING()clause of aCREATE INDEXstatement. CockroachDB now checks if the column is virtual up-front, and properly detects when a column is already handled by an existingINDEXwhen the column name has UTF-8 characters.",
                "Fixed a bug where a change to auser-defined typecould cause queries against tables using that type to fail with an error message like:\"histogram.go:694: span must be fully contained in the bucket\". The change to the user-defined type could come directly from anALTER TYPEstatement, or indirectly from anALTER DATABASE ... ADD REGIONorDROP REGIONstatement (which implicitly changes thecrdb_internal_regiontype). This bug had existed since UDTs were introduced in v20.2.",
                "Fixed a bug wheretelemetry logshad the samestatement fingerprintID for different SQL statements.",
                "Fixed an issue whereadding a columnwith a default value of an emptyarraywould not succeed.",
                "ALTER TABLE ... ADD CONSTRAINT UNIQUEwill now fail with a well-formed error message and code42601if a statement tries to add aunique constrainton an expression.",
                "Fixed a bug where thepublicschemawould be created with the wrong owner. Previously theadminrolewould own thepublicschema. Now, the database owner is also the owner of thepublicschema. The owner can be altered after the schema is created.",
                "Fixed a bug in v24.1, v23.2, and v23.1 where using thechangefeed.aggregator.flush_jittercluster settingwith themin_checkpoint_frequencyoption set to0could cause panics.",
                "The log message\"expiration of liveness record ... is not greater than expiration of the previous lease ... after liveness heartbeat\"is no longer generated.",
                "Fixed a bug introduced in v23.2.0 in which CockroachDB would hit an internal error when evaluatingINSERTsintoREGIONAL BY ROWtables where the source was aVALUESclause with a single row and at least one boolean expression.",
                "Fixed a bug that would occur whenALTER TYPE ... DROP VALUEis followed byDROP SCHEMA CASCADE ...in the same transaction. Previously, theALTER TYPEschema change would get queued up to run at commit time, but by that point, the type may have already been removed, so the commit could fail.",
                "Tables are now automatically repaired when the errorsinvalid inbound foreign key ... origin table ID should be ...orinvalid outbound foreign key ... reference table ID should be ...occur.",
                "Fixed a bug where a failedRESTOREcould not be retried without manual intervention.",
                "Fixed a bug introduced in alpha versions of v23.1 where calling a routine could result in an unexpectedfunction ... does not existerror. The bug is triggered when the routine is called twice using the exact same SQL query, and either: (a) the routine has polymorphic arguments, or: (b) between the two calls, the routine is replaced by a routine with the same name and different parameters.",
                "Fixed a rare bug where a lease transfer could lead to aside-transport update saw closed timestamp regressionpanic. The bug could occur when a node was overloaded andfailing to heartbeat its node liveness record.",
                "Fixed a crash introduced in v24.1.0-beta.2 that could occur when planning statistics collection on a table with avirtual computed columnusing auser-defined typewhen the newly-introducedcluster settingsql.stats.virtual_computed_columns.enabledis set totrue. (The setting was introduced in v24.1.0-alpha.1, and defaults totrue.)",
                "Fixed a bug where anALTER TABLE ... ALTER PRIMARY KEYstatement could hang if the table had any indexes that were referred to byviewsorfunctionsusing theFORCE INDEXclause.",
                "Fixed a bug introduced in v24.1.0 where themax_decimal_digitsargument of thest_geojsonbuiltin functionwas ignored and the default was used instead.",
                "Scattering a range with a replication factor of 1 now no longer erroneously up-replicates the range to two replicas. Leases will also no longer thrash between nodes when perturbed with a replication factor of 1.",
                "Fixed a bug where, if thettl_row_stats_poll_intervalstorage parameter was non-zero for a table withrow-level TTLenabled, the queries issued to update row statistics could block the job from completing. Now, if the job completes, these statistics queries are cancelled. This means that thejobs.row_level_ttl.total_rowsandjobs.row_level_ttl.total_expired_rowsmetrics will report0if the job finishes before the row stats queries complete.",
                "Fixed a bug where aDROP ROLEorDROP USERcommand could leave references behind inside types, which could prevent subsequentSHOW GRANTScommands from working.",
                "Fixed a bug where theresults_buffer_sizesession variablecould not be configured by using the \"options\" query parameter in the connection string, but only as a top-level query parameter. Now,results_buffer_sizecan be configured in either part of the connection string. This variable still cannot be changed with theSETcommand after the session begins.",
                "Fixed a bug introduced in v20.2 where a change to auser-defined typecould cause queries against tables using that type to fail with an error message likehistogram.go:694: span must be fully contained in the bucket. The change to the user-defined type could come directly from anALTER TYPEstatement, or indirectly from anALTER DATABASE ... ADD REGIONorDROP REGIONstatement (which implicitly change thecrdb_internal_regiontype).",
                "Fixed a bug that was present since v22.2 wherechangefeedswith long-runninginitial scansmight incorrectly restore checkpoint job progress and drop events duringchangefeed restartsdue to transient errors or node restarts. The bug was most likely to occur in clusters with the following contributing factors:Thechangefeed.shutdown_checkpoint.enabledcluster settingwas enabled (in clusters running v23.2 and later).The cluster settingschangefeed.frontier_checkpoint_frequencyandlow changefeed.frontier_highwater_lag_checkpoint_thresholdwere set low, which resulted in the initial scan taking many multiples of the configured frequency to complete.There were multiple target tables with significant differences in row counts in one changefeed.The changefeed target tables were large with many ranges.The initial scan took a long time to complete (an hour or longer).",
                "Fixed a crash introduced in v24.1.0-beta.2 that could occur when planningstatistics collectionon a table with avirtual computed columnusing a user-defined type and thesql.stats.virtual_computed_columns.enabledcluster settingis set totrue.sql.stats.virtual_computed_columns.enabledwas introduced in v24.1.0-alpha.1 astrueby default and introduced in v23.2.5 asfalseby default.",
                "This release includes 3 merged PRs by 3 authors.",
                "Fixed a bug that caused theTablesandTable Detailspages in the DB Console to display an incorrect value forTable Stats Last Updated.",
                "Fixed a bug in the DB Console'sCustom Charttool where store-level metrics were displayed only for the first store ID associated with the node. Now data is displayed for all stores present on a node, and a single time series is shown for each store, rather than an aggregated value for all of the node's stores. This allows finer-grained monitoring of store-level metrics.",
                "Fixed a bug introduced in v22.2 that could cause the internal errorattempting to append refresh spans after the tracked timestamp has moved forwardin some edge cases.",
                "Fixed a bug where aTYPEDESC SCHEMA CHANGEjob could retry forever if the descriptor it targeted was already dropped.",
                "Fixed a bug where, if the legacy schema changer was enabled, theCREATE SEQUENCEcommand would incorrectly require the user to have theCREATEprivilegeon the parent database rather than only on the parent schema.",
                "Fixed a bug where ajobwould fail if it reported an out-of-bound progress fraction. The error is now logged and no longer causes the job to fail.",
                "Fixed a bug that could lead to descriptors having privileges to roles that no longer exist. Added an automated clean up fordropped rolesinside descriptors.",
                "Fixed a bug whereclient certificate authenticationcombined withidentity maps(server.identity_map.configuration) did not work since v23.1. For the feature to work correctly, the client must specify a valid db user in theconnection string.",
                "Fixed a bug where therow-based execution enginecould drop aLIMITclause when there was anORDER BYclause, and the ordering was partially provided by an input operator. For example, this bug could occur with an ordering such asORDER BY a, bwhen the scanned index was only ordered on columna. The impact of this bug was that more rows may have been returned than specified by theLIMITclause. This bug is only present when not using thevectorized execution engine. That is, when running withSET vectorize = off;. This bug has existed since CockroachDB v22.1.",
                "Previously, CockroachDB could run into an internal error when evaluatingPL/pgSQLroutines with nested blocks. The bug is only present in 24.1.0-beta versions. This bug is now fixed.",
                "Fixed a bug whereUPDATEandUPSERTqueries with a subquery were sometimes inappropriately using implicitFOR UPDATElocking within the subquery. This bug has existed since implicitFOR UPDATElocking was introduced in v20.1.",
                "Droppingandaddinga column with the same name no longer results in a\"column already exists error\".",
                "Fixed a bug that could cause an internal error of the forminvalid datum type given: ..., expected ...when aRECORD-returninguser-defined function, used as a data source, was supplied a column definition list with mismatched types. This bug has existed since v23.1.",
                "Fixed a bug that could result in an internal error when attempting to create aPL/pgSQLroutine using the (unsupported)%ROWTYPEsyntax for a variable declaration. Now, an expected syntax error is returned instead.",
                "Fixed a bug that could result in an assertion error during evaluation ofPL/pgSQLroutines that invoke procedures while usingDEFAULTarguments. The bug was present in v24.1.0-beta releases and is now fixed.",
                "Previously, privileges granted forexternal connectionswere displaying inSHOW SYSTEM GRANTSwith no associated object name. Now these privileges are no longer displayed. Instead, the statementSHOW GRANTS ON EXTERNAL CONNECTIONshould be used to view external connection privileges with their associated object name.",
                "Statistics forecasts of zero rows can cause suboptimalquery plans. Forecasting will now avoid predicting zero rows for most downward-trending statistics.",
                "Fixed a bug introduced in v23.2 that could cause aPL/pgSQLvariable assignment to not be executed if the variable was never referenced after the assignment.",
                "Fixed a bug where table statistics were sometimes not collected on tables that have virtualcomputed columnsof a user-defined type when thesql.stats.virtual_computed_columns.enabledcluster setting is enabled. The setting was introduced in v23.2.4 and is disabled by default. Only clusters running v23.2.4 with the non-default setting are affected.",
                "This release includes 52 merged PRs by 28 authors.",
                "Sequence options forNO MINVALUEandNO MAXVALUEnow match PostgreSQL behavior. SequenceMINVALUEandMAXVALUEautomatically adjust to new types bounds mirroring behavior of PostgreSQL.",
                "CockroachDB could previously \"leak\" reported memory usage as accounted by the internal memory accounting system, the limit for which is configured with the--max-sql-memoryflag, on long-running sessions that issue many (hundreds of thousands or more) transactions. This, in turn, could result in\"root: memory budget exceeded\"errors for other queries. This bug was present in versions v23.1.17 and v23.2.3 and is now fixed.",
                "CockroachDB could previously incorrectly evaluateINexpressions that hadINT2orINT4type on the left side and values outside of the range of the left side on the right side. The bug has been present since at least v21.1 and is now fixed.",
                "Fixed a slow memory leak in the deprecatedPub/Sub changefeeds, which can accumulate when restarting or canceling many deprecated Pub/Sub changefeeds. The bug had been present since the deprecated Pub/Sub changefeed was introduced in a testing release of v22.1.",
                "This release includes 134 merged PRs by 36 authors.",
                "Fixed a bug introduced in v23.2 that could cause aPL/pgSQLroutine to return incorrect results when the routine included:At least one parameter.AnIFstatement with one leak-proof branch and one branch with side effects.",
                "Fixed a rare bug where aBACKUPcommand issued shortly after anALTER TABLE {table_name} SET (exclude_data_from_backup = true)could exclude data from an unrelated table from the backup.",
                "Fixed a behavior where a memory exhaustion error during a schema change was treated as a permanent failure and reverted. Such schema changes are now retried instead of reverted.",
                "Fixed a bug where theattnamefor a dropped column was not correctly padded with 8.characters to be compatible with PostgreSQL.",
                "Fixed a bug withDROP SCHEMA ... CASCADEthat could lead to dangling function references in other schemas accessing any functions.",
                "Fixed a bug where aRESTOREof a backup that itself contained a table created by theRESTOREof a table with an in-progressIMPORT INTOwould fail to restore all rows.",
                "Fixed a bug whereidentity columnswithout any configured sequence options did not display the default values for identity attributes ininformation_schema.",
                "Fixed a bug where aGRANT ... ON ALL TABLESstatement could fail if sequences existed and they did not support a privilege (e.g.,BACKUP).",
                "Fixed a bug where anEXPLAIN (DDL)statement would generate event log entries for schema changes that were not executed.",
                "This release includes 153 merged PRs by 179 authors.",
                "Fixed a bug that occurred when usingALTER TABLEto drop and re-add aCHECKconstraintwith the same name.",
                "Fixed a bug in which it was possible toSET transaction_read_only = falseduring anAS OF SYSTEM TIMEtransaction.",
                "Fixed a bug that caused a slow memory leak that could accumulate when opening many new connections. The bug was present in v22.2.9+ and v23.1+ versions.",
                "Fixed a bug that prevented the use ofPL/pgSQLroutines with complex variable names that require double quotes. This bug had existed since v23.2.",
                "Fixed a bug that could cause creation of a syntactically invalidPL/pgSQLroutine to return the wrong error. This bug had existed since v23.2.",
                "Fixed a bug that could result in a syntax error if aPL/pgSQLroutine was created with an escaped string constant in the routine body. This bug had existed since v23.2.",
                "Fixed a bug where running achangefeedthat targets a table with a user-defined type column and with theenvelopeoptionset to any value other thanwrappedwould cause a node panic due to a nil dereference.",
                "Fixed a bug where runningRESTOREon certain backups would open a very large number of connections to the backup storage provider.",
                "Previously, a user with theVIEWACTIVITYREDACTEDprivilegecould see constants inside of queries that originated from otherusersin theSHOW SESSIONSoutput. This information is now properly redacted.",
                "Previously, theSHOW QUERIESandSHOW STATEMENTScommands incorrectly required the user to have theVIEWACTIVITYorVIEWACTIVITYREDACTEDprivilege. This is now fixed, as a user should always be able to view their own queries, even without this privilege.",
                "This release includes 1939 merged PRs by 109 authors.",
                "Fixed a bug that could cause an internal error during distributed execution for an expression likeCASEthat requires its inputs to be the same type with allNULLinputs.",
                "FixedNULLinput handling for the geospatialbuilt-insst_pointfromgeohashandst_geomfromgeohash.",
                "The geospatialst_makeenvelopebuilt-innow correctly supportsxminoryminto be greater thanxmaxorymax, respectively.",
                "Fixed a bug that could cause v23.1 nodes in clusters that had notfinalized the v23.1 version upgradeto use excessive CPU retrying expected errors related to the incomplete upgrade state.",
                "Debug zipnow does not fail on corrupted log files.",
                "Placeholder arguments can now be used inSET TRANSACTIONstatements.",
                "Previously, when the session variableuse_declarative_schema_changerwas set tooff,ALTER PRIMARY KEYwould delete any comments associated with the old primary index and old primary key constraint. This is inconsistent with the behavior ofuse_declarative_schema_changer=on, which is the default setting, where those comments would be carried over to the new primary index. Furthermore, the old behavior also caused a bug that could prevent commandSHOW CREATE tfrom working.",
                "Previously, when the session variable was set touse_declarative_schema_changer=offand there was an attempt toALTER PRIMARY KEYon a table that has unique secondary indexes on new primary key columns, the unique secondary index would still incorrectly have old primary key columns as itskeySuffixColumnafter theALTER PRIMARY KEY. This was problematic because a subsequent dropping of the old primary key columns would unexpectedly drop those unique secondary indexes as well, even withoutCASCADE.",
                "ALTER BACKUP SCHEDULEcan now be used to setupdates_cluster_last_backup_time_metricwithout providing an explicit value, matching the behavior of the option when specified duringCREATE SCHEDULE FOR BACKUP.",
                "Previously, if a table hadsecondary indexesthat stored certain columns (col) using theSTORINGclause, followed by anALTER PRIMARY KEYtocol, an incorrect secondary index would persist. The secondary index would continue to have theSTORINGclause, despite the column being part of the primary key and the fact that CockroachDB does not permit secondary indexes to store any primary key columns. Now, after theALTER PRIMARY KEY, theSTORINGclause is dropped on those secondary indexes.",
                "Fixed a bug that caused uploads toobject-locked bucketsto fail because of the absence of anMD5hash.",
                "ALTER PRIMARY KEYnow preserves the name of the original primary index when the session variable isuse_declarative_schema_changer=off.",
                "Fixed a bug where theunique-without-index-not-validconstraintadded to a table would cause thecreate_statementfromSHOW CREATE tto not be executable and error withunique constraint cannot be NOT VALID.",
                "Fixed a bug where an emptyfull backupfollowed by non-empty incremental backups taken inside an application tenant might not allow arestoredue to the use of an incorrect SQL codec.",
                "Fixed a bug in therow-level TTLjob that would cause it to skip expired rows if the primary key of the table included columns of the collatedSTRINGorDECIMALtype.",
                "Incorrectly labeledPL/pgSQLblocks now return an expected syntax error.",
                "CREATE EXTERNAL CONNECTION IF NOT EXISTSno longer returns an error if the connection already exists.",
                "CockroachDB now correctly uses the histograms on columns of collatedSTRINGtype. The bug has been present since before v22.1.",
                "Improved an interaction during rangelease transfersthat could causeRETRY_ASYNC_WRITE_FAILUREerrors to be returned to clients.",
                "Backfilling tables forCREATE TABLE ASorCREATE MATERIALIZED VIEWcould get into a retry loop if data was deleted and those jobs took longer than the GC TTL.",
                "Decommissioning replicasthat are part of a mis-replicated range will no longer get stuck on a rebalance operation that was falsely determined to be unsafe.",
                "A memory leak within the insights system was found to occur whensql.metrics.transaction_details.enabledwas disabled, while leavingsql.metrics.statement_details.enabledenabled. This patch fixes the memory leak by preventing the collection of further statement and transaction insights whensql.metrics.transaction_details.enabledis disabled.",
                "Fixed a rare panic that could happen during apg_dumpimport that contains a function that has a subquery in one of its arguments, likeSELECT addgeometrycolumn(...). Now, attempting to import apg_dumpwith such a function results in an expected error.",
                "AUTO CREATE STATSjobs could previously lead to growth in an internal system table resulting in slower job-system related queries.",
                "Fixed an issue in CockroachDB where, if operating on a Linux system outside of a CPU cgroup, the system would repeatedly log the errorunable to get CPU capacityat 10-second intervals.",
                "Fixed a bug where casts offloatstointegerssimply truncated the decimal portion. These casts now match the PostgreSQL behavior of rounding to the nearest integer, and in cases of a value halfway between two integers, rounding to the nearest even number. This aligns with the \"round half to even\" rule or \"bankers' rounding\", offering greater overall precision across a group of such cast operations.",
                "Fixed a bug where statements likeADD COLUMN j INT, ADD UNIQUE WITHOUT INDEX (j), whichadd new columnswith unique constraints without creating associated indexes, would fail with an internal error.",
                "Previously,alteringfrom aREGIONAL BY ROWtable to aREGIONAL BY TABLEtable could cause leaseholders to never move to the database's primary region. This is now fixed.",
                "Users with theVIEWACTIVITYprivilege can now request statement bundles usingcrdb_internal.request_statement_bundleor through the DB ConsoleSQL Activitypage.",
                "Fixed an internal error with a message like:LeafTxn ... incompatible with locking requestthat occurs when performing an update underREAD COMMITTEDisolationwhich cascades to a table with multiple other foreign keys.",
                "Fixed a bug whereALTER PRIMARY KEYcould fail with an errornon-nullable column <x> with no value! Index scanned ..when validating recreatedsecondary indexes.",
                "Fixed a bug where a sequence name allocated bySERIALthat conflicted with an existing type name would cause an error.",
                "Fixed a bug whereCOMMENT ONstatements could fail with an \"unexpected value\" error if multipleCOMMENTstatements were running concurrently.",
                "Previously, in certain cases, using virtual tables such ascrdb_internal.system_jobscould result in the internal errorattempting to append refresh spans after the tracked timestamp has moved forward. This is now fixed. The bug was introduced in CockroachDB v23.1.",
                "Fixed a bug where operations on thecrdb_internal.leasestable could cause a node to become unavailable due to a deadlock in the leasing subsystem.",
                "If an individualreplica's circuit breaker had tripped but the range was otherwise functional, for example, because the replica was partially partitioned away from theleaseholder, it was possible for a gateway to persistently error when contacting this replica instead of retrying against a functional leaseholder elsewhere. Thegatewaywill now retry such errors against other replicas once.",
                "Fixed a bug in changefeedwebhook sinkswhere the HTTP request body may not be initialized on retries, resulting in the errorhttp: ContentLength=... with Body length 0.",
                "Fixed a bug where rangefeed resolved timestamps could get stuck, continually emitting the log messagepushing old intents failed: range barrier failed, range split, typically following arange merge.",
                "Fixed a condition where some files were not closed when inspecting backup metadata during BACKUP and RESTORE. Epic: none.",
                "Fixed a bug where some backup metadata files opened duringRESTOREwere not closed.",
                "Fixed a bug that caused internal errors when executing anEXPORTstatement where the query involved sorting by columns not explicitly included in the output, due to hidden columns in the input expression.",
                "Fixed a bug where a warning about the need to refresh data would remain displayed on the Active Executions view of theStatementsandTransactionspages despite enablingAuto Refresh."
            ],
            "operational_changes": [
                "Updated TTL job replanning to be less sensitive by focusing specifically on detecting when nodes become unavailable rather than reacting to all plan differences. The cluster settingsql.ttl.replan_flow_thresholdmay have been set to0to work around the TTL replanner being too sensitive; this fix will alleviate that and any instance that had setreplan_flow_thresholdto0can be reset back to the default.",
                "Changed the default value of the cluster settingadmission.l0_file_count_overload_thresholdto4000.",
                "Added thesql.statement_timeout.countmetric to track the number of SQL statements that fail due to exceeding the statement timeout.",
                "Added thesql.transaction_timeout.countmetric to track the number of SQL statements that fail due to exceeding the transaction timeout.",
                "Thenode decommissionCLI command now waits until the target node is fully drained before marking it as decommissioned. Previously, the command would start draining but not wait, leaving the node in an unstable state where it could still accept client requests while being unable to communicate with the cluster, causing those requests to hang or fail with unexpected errors.",
                "Thechangefeed.max_behind_nanosmetric now supports scoping with metric labels.",
                "Added new metrics that expose the TTL for various certificates.",
                "Introduced the metricsql.schema_changer.object_countthat keeps track of the count of objects in the cluster.",
                "Removed thesql.auth.resolve_membership_single_scan.enabledcluster setting. This was added out of precaution in case it was necessary to revert back to the old behavior for looking up role memberships, but this escape hatch has never been needed in practice since this was added in v23.1.",
                "Telemetry delivery is now considered successful even in cases where CockroachDB experiences a network timeout. This will prevent throttling in cases outside an operator's control.",
                "When a schema change job is completed, rolls back, or encounters a failure, the time taken since the job began is now logged in a structured log in theSQL_SCHEMAlog channel.",
                "To prevent unnecessary queuing in admission control CPU queues, thegoschedstats.always_use_short_sample_period.enabledsetting should be set totruefor any production cluster.",
                "A new cluster settingui.database_locality_metadata.enabled, when set totrue, disables loading database and table region information in the DB Console Database and Table pages. This information can cause significant CPU load on large clusters with many ranges. The Database and Table pages in v24.3 onwards do not have this problem. If you require this data, use theSHOW RANGES FROM {DATABASE|TABLE}SQL statement to compute this information on-demand.",
                "The row-level TTL job now will periodically log progress by showing the number of table spans that have been processed so far.",
                "Added aranges.decommissioningmetricrepresenting the number of ranges that have a replica on adecommissioning node.",
                "You can now configure the log format for thestderrlog sinkby setting thestderr.formatfield in theYAML configuration.",
                "There are now structuredlogging eventsthat report connection breakage during node shutdown. Previously, the logs existed, but were unstructured. The logs appear in theOPSlogging channel. There are two new events:Thenode_shutdown_connection_timeoutevent is logged after the timeout defined by theserver.shutdown.connections.timeoutcluster setting transpires, if there are still open SQL connections.Thenode_shutdown_transaction_timeoutevent is logged after the timeout defined by theserver.shutdown.transactions.timeoutcluster setting transpires, if there are still open transactions on those SQL connections.",
                "Added a new configuration parameterserver.cidr_mapping_url, which maps IPv4 CIDR blocks to arbitrary tag names.",
                "Modified the metricssql.bytesinandsql.bytesoutto work as aggregate metrics ifchild metricsare enabled.",
                "Added three new network-tracking metrics.rpc.connection.connectedis the number of rRPC TCP level connections established to remote nodes.rpc.client.bytes.egressis the number of TCP bytes sent via gRPC on connections CockroachDB initiates.rpc.client.bytes.ingressis the number of TCP bytes received via gRPC on connections CockroachDB initiated.",
                "This commit adds two metrics:changefeed.network.bytes_inandchangefeed.network.bytes_out. These metrics track the number of bytes sent by the individualchangefeedsto differentsinks.",
                "crdb_internal.cluster_execution_insights.txtandcrdb_internal.cluster_txn_execution_insights.txthave been removed from thedebug zip. These files contained cluster-wide insights for statements and transactions. Users can still rely on theper-node executioninsights incrdb_internal.node_execution_insights.txtandcrdb_internal.node_txn_execution_insights.txt.",
                "For theTELEMETRY logging channel, TCLsampled_queryevents will now be sampled at the rate specified by the settingsql.telemetry.query_sampling.max_event_frequency, which is already used to limit the rate of sampling DML statements.",
                "Improveddisk usage metric reportingover volumes that dynamically change their size over the life of thecockroachprocess.",
                "The default values for the followingcluster settingswere updated from100000to7500. These settings control the maximum number offingerprints(distinct combinations of statements andtransactions) CockroachDB can store in memory, with stats being flushed on a10mintervalby default. You can increase these settings if your workload produces more unique fingerprints than this amount within the flush interval, and you notice that SQL stats are missing.cockroachdb/cockroach#125554sql.metrics.max_mem_stmt_fingerprintssql.metrics.max_mem_txn_fingerprints",
                "The default values for thecluster settingssql.metrics.max_mem_stmt_fingerprintsandsql.metrics.max_mem_txn_fingerprintshave been changed from100000to5000, thus lowering the default limits for in-memory statement and transaction fingerprints.",
                "The newsql.pgwire.pipeline.countgauge metricshows the number of wire protocol commands that have been received by the server, but have not yet begun processing. This metric will only grow if clients are using the \"pipeline mode\" of the PostgreSQL wire protocol.",
                "Theclient_authentication_okandclient_session_endmessages are now logged to theSESSIONSlog channelunconditionally. Previously, these would be logged only if theserver.auth_log.sql_sessions.enabledcluster settingwas set totrue. All otherSESSIONSlog messages are logged only ifserver.auth_log.sql_sessions.enabledorserver.auth_log.sql_connections.enabledare set totrue. To prevent logging ofclient_authentication_okorclient_session_endmessages, you can optionally disable theSESSIONSlog channel.",
                "Added two newmetrics:range.snapshots.upreplication.rcvd-bytescounts the number ofRaftrecovery snapshot bytes received, andrange.snapshots.upreplication.sent-bytescounts the number of Raft recovery snapshot bytes sent. Also updatedrange.snapshots.recovery.rcvd-bytesandrange.snapshots.recovery.sent-bytesto only include Raft snapshots. A new line was added to theSnapshot Data Receivedgraph.",
                "You can now enable asynchronous buffering offile-grouplog sinksusing thebufferingconfiguration optionseither by default or to an individualfile-group. Thebufferingconfiguration option is incompatible with thebuffered-writesconfiguration option. To try thebufferingoption, you must setbuffered-writes: false. Cockroach Labs recommends settingmax-stalenessto1sandflush-trigger-sizeto256KiB.",
                "A minimumRaft schedulerconcurrency is now enforced per store so that nodes with many stores do not spread workers too thin. This helps to avoid high scheduler latency across replicas on a store when load is imbalanced.",
                "The newmetricskv.split.estimated_statsandkv.split.total_bytes_estimatestrack the number of splits that produceMVCCstatistic estimates and the total bytes of estimates produced.",
                "The newcluster settingstorage.sstable.compression_algorithmconfigures the compression algorithm used when compressing sstable blocks.",
                "The newcluster settingkv.dist_sender.proxy.enabled, which is enabled by default, causes proxy requests to be routed through a follower replica when the leaseholder is unavailable.",
                "The new startup flag--wal-failoverallows you to explicitly set the path for WAL failover of a single-store node.",
                "Cluster virtualization is now enabled using either of the new startup flags--virtualizedor--virtualized-emptyinstead of the--config-profileflag.",
                "The following metrics, which track the SQL statistics subsystem's task to flush in-memory statistics to persisted storage, are now more consistent with other metrics used in the subsystem.sql.stats.flushes.successful: Number of times SQL statistics have been flushed successfully to persistent storage.sql.stats.flushes.failed: Number of attempted SQL statistics flushes that failed with errors.sql.stats.flush.latency: The latency of attempted SQL statistics flushes to persistent storage, including both successes and failures.",
                "The following newmetricstrack the number and outcome of proxy requests whenkv.dist_sender.proxy.enabledis set totrue:distsender.rpc.proxy.sentdistsender.rpc.proxy.errdistsender.rpc.proxy.forward.sentdistsender.rpc.proxy.forward.errCockroach Labs recommends monitoring and alerting ondistsender.rpc.proxy.sent, because it indicates a possible network partition.",
                "Theprovisioned-ratefield of a node's store specification can no longer be used to add constraints for the disk name or bandwidth. By default, bandwidth is constrained according to thecluster settingkv.store.admission.provisioned_bandwidth. To override this setting for a specific node, the storage specification must containprovisioned-rate=bandwidth={bandwidth-bytes/s}.",
                "Removal of thecluster settingkv.rangefeed.scheduler.enabled, which was announced inv24.1.0-alpha.1, has been reverted, and the cluster setting is reinstated.",
                "The newcockroach startoption--wal-failover=among-storesorCOCKROACH_WAL_FAILOVER=among-storesenvironment variable will configure a multi-store CockroachDB node to fail over a store's write-ahead log (WAL) to another store's data directory. Failing over the write-ahead log may allow some operations against a store to continue completing, even if the underlying storage is temporarily unavailable. This feature is inpreview.",
                "The newstorage.wal_failover.unhealthy_op_thresholdcluster settingallows configuring the latency threshold at which a WAL write is considered unhealthy.",
                "Two new metrics track the status of the SQL Activity Update job, which pre-aggregates top K information within the SQL statistics subsytem and writes the results tosystem.statement_activityandsystem.transaction_activity:sql.stats.activity.updates.successful: Number of successful updates made by the SQL activity updater job.sql.stats.activity.update.latency: The latency of updates made by the SQL activity updater job. Includes failed update attempts.",
                "Added a new counter metric,sql.stats.flush.done_signals.ignored, that tracks the number of times the SQL activity update job has ignored the signal that indicates that a flush has completed. This metric may indicate that the SQL activity update job is taking longer than expected to complete.",
                "Added a new counter metric,sql.stats.activity.updates.failed, to measure the number of update attempts made by the SQL activity update job that failed with errors.",
                "Added a new counter metric,sql.stats.flush.fingerprint.count, that tracks the number of unique statement and transaction fingerprints included in the SQL stats flush.",
                "The/_status/storesendpoint now includesnode_id,dir, andwal_failover_pathfields to show the store's node ID, data directory, and path to the configured WAL failover secondary, if configured.",
                "The internal versions that are reported duringcluster upgradeshave been renamed for clarity. For example,23.2-8is now named23.2-upgrading-to-24.1-step-008.",
                "Introduced a new cluster setting,server.jwt_authentication.jwks_auto_fetch.enabled, enabling automatic fetching ofJSON Web Key Sets (JWKS)from an issuer's remote endpoint. This prevents an administrator's need to update the JWKS specified inserver.jwt_authentication.jwks- whether manually or by custom script - when the identity provider's keys rotate. That direct specification of JWKS remains the default, as the new cluster setting defaults tofalse.",
                "Updated the error message logged in the case of stalled disks to use the appropriate term \"disk stall\", matching the term used in metrics and dashboards. This was previously \"file write stall\".",
                "Introduced thechangefeed.emitted_batch_sizeshistogram metric that measures the batch sizes used when emitting data tosinks. This metric supportsmetrics labels.",
                "Introduced metricslog_fluent_sink_conn_attempts,log_fluent_sink_write_attempts, andlog_fluent_sink_write_errorsto enable more precise tracking of connection and write operations whenlogging to Fluentd-compatible network collectors.",
                "Thecluster settingsql.contention.record_serialization_conflicts.enabledis nowonby default. This means any40001errorsthat are returned containing conflicting transaction information will be recorded by the contention registry.",
                "Removed thekv.rangefeed.scheduler.enabledcluster settingbecause therangefeedscheduler is now unconditionally enabled.",
                "Removed thekv.rangefeed.catchup_scan_concurrencycluster setting. Catchup scans are throttled viakv.rangefeed.concurrent_catchup_iteratorson a per-node basis.",
                "Removed thechangefeed.mux_rangefeed.enabledcluster setting because the functionality is enabled by default.",
                "The gossip statusAdvanced Debug pagenow includes information about the server's high water timestamps for every other node it knows about in the gossip cluster.",
                "Removed thecockroach_rangefeed_rpc_initial_window_sizeenvironment variable. The rangefeed connection now uses the same window size as other RPC connections.",
                "Eventsforcluster settingchanges are now emitted to theOPSchannel rather than theDEVchannel.",
                "The new environment variablecockroach_rpc_use_default_connection_classenables operators to switch back to the prior default behavior of sending most network/RPC workloads, except system traffic, through a single RPC/TCP connection, in case the environment does not tolerate multiple TCP connections. v24.1 defaults to using multiple connections, each dedicated to a particular types of traffic, specifically forRaftorrangefeeddata. For more information, see additional release notes that reference this variable name.",
                "In unredacteddebug zips, thecrdb_internal.transaction_contention_eventstable file has two new columns:waiting_stmt_query: the query of the waiting statement.blocking_txn_queries_unordered: the unordered list of the blocking transaction's queries.",
                "Transaction replay protection state is now passed between the outgoing and incomingleaseholderfor a range during alease transfer. This avoids cases where lease transfers can cause transactions to throwTransactionAbortedError(ABORT_REASON_NEW_LEASE_PREVENTS_TXN)errors.",
                "CockroachDB will now automatically generateCPU profilesif there is an increase in CPU utilization. This can help inform investigations into possible issues.",
                "Expanded the--include-range-infoflag to include problem ranges. This flag still defaults totrue."
            ],
            "total_bug_fixes": 302,
            "total_operational_changes": 64,
            "date": "October 17, 2025",
            "release_type": "LTS (Long Term Support)"
        },
        {
            "version": "23.2",
            "url": "https://www.cockroachlabs.com/docs/releases/v23.2",
            "bug_fixes": [
                "Fixed a bug that could potentially cause a changefeed to complete erroneously when one of its watched tables encounters a schema change.",
                "Fixed a bug that caused the SQL Activity > Statement Fingerprint page to fail to load details for statements run with application names containing a#character.",
                "Fixed a bug that could cause thecockroachprocess tosegfaultwhen collecting runtime execution traces (typically collected via theAdvanced Debugpage in the Console).",
                "Fixed a bug that could cause stable expressions to be folded in cached query plans. The bug could cause stable expressions likecurrent_settingto return the wrong result if used in a prepared statement. The bug was introduced in v23.2.22, v24.1.14, v24.3.9, v25.1.2, and the v25.2 alpha.",
                "Fixed a bug where using values for the cluster settingchangefeed.aggregator.flush_jitterand the changefeed optionmin_checkpoint_frequencyresulting inchangefeed.aggregator.flush_jitter * min_checkpoint_frequency < 1would cause a panic. Jitter will now be disabled in this case.",
                "Improved the performance ofSHOW CREATE TABLEon multi-region databases with a large numbers of objects.",
                "Fixed an internal assertion failure that could occur during operations likeALTER TYPEorALTER DATABASE ... ADD REGIONwhen temporary tables were present.",
                "Fixed a bug that preventedTRUNCATEfrom succeeding if any indexes on the table had back-reference dependencies, such as from a view or function referencing the index.",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a bug where CockroachDB would encounter an internal error when decoding the gists of plans withCALLstatements. The bug had been present since v23.2.",
                "Fixed a bug that caused changefeeds to fail on startup when scanning a single key.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed a bug that could leave behind a dangling reference to a dropped role if that role had default privileges granted to itself. The bug was caused by defining privileges such as:ALTER DEFAULT PRIVILEGES FOR ROLE self_referencing_role GRANT INSERT ON TABLES TO self_referencing_role.",
                "MVCC garbage collection is now fully subject to IO admission control. Previously, it was possible for MVCC GC to cause store overload (such as LSM inversion) when a large amount of data would become eligible for garbage collection. Should any issues arise from subjecting MVCC GC to admission control, thekv.mvcc_gc.queue_kv_admission_control.enabledcluster setting can be set tofalseto restore the previous behavior.",
                "Fixed a rare corruption bug that impacts import and materialized views.",
                "Fixed a bug that could cause a stack overflow during execution of a prepared statement that invoked a PL/pgSQL routine with a loop. The bug existed in versions v23.2.22, v24.1.15, v24.3.9, v25.1.2, v25.1.3, and pre-release versions of v25.2 prior to v25.2.0-alpha.3.",
                "Fixed a bug that could cause gateway nodes to panic when performing anUPSERTon a table with aBOOLprimary key column and a partial index that used the primary key column as the predicate expression.",
                "Fixed a rare bug in which a query could fail with the errorcould not find computed column expression for column in tablewhile dropping a virtual computed column from a table. This bug was introduced in v23.2.4.",
                "Fixed a bug that could causenil pointer dereferenceerrors when executing statements with user-defined functions (UDFs). The error could also occur when executing statements with some built-in functions, likeobj_description.",
                "Fixed a bug where under rare circumstances draining a node could fail withsome sessions did not respond to cancellation within 1s.",
                "Fixed a bug that prevented theCREATEstatement for a routine from being shown in a statement bundle. This happened when the routine was created on a schema other thanpublic. The bug has existed since v23.1.",
                "Fixed a bounded memory leak that could previously occur when evaluating some memory-intensive queries via the vectorized engine. The leak has been present since v20.2.",
                "Previously, in changefeeds using CDC queries and the Parquet format, the output would include duplicate columns when it contained a user-defined primary key. Now, the columns are de-duplicated in Parquet changefeed messages.",
                "Previously,SHOW CREATE TABLEwas showing incorrect data with regards to inverted indexes. It now shows the correct data that can be repeatedly entered back into CockroachDB to recreate the same table.",
                "Fixed a bug where querying thepg_catalog.pg_constrainttable while the schema changer was dropping a constraint could result in a query error.",
                "Fixed a bounded memory leak that could occur when collecting table statistics on a table that had both very wide (10KiB or more) and relatively small (under 400B)BYTES-like values within the same row. This leak had been present since before v19.2.",
                "Fixed a bug where changefeeds using CDC queries could have duplicate columns in the Parquet output.",
                "Fixed a bug that prevented theCREATEstatement for a routine from being included in a statement bundle when the routine was created on a schema other thanpublic. The bug had existed since v23.1.",
                "CREATE SCHEMAnow returns the correct error if the schema name is missing.",
                "Fixed an issue where corrupted table statistics could cause the CockroachDB process to crash.",
                "Theidle_in_session_timeoutsetting now excludes the time spent waiting for schema changer jobs to complete, preventing unintended session termination during schema change operations.",
                "Fixed a bug that caused the optimizer to use stale table statistics after altering an enum type used in the table.",
                "CockroachDB now better respectsstatement_timeoutlimit on queries involving the top K sort and merge join operations.",
                "Fixed an issue where license enforcement was not consistently disabled for single-node clusters started withstart-single-node. Now, cluster restarts correctly disable licensing.",
                "Fixed a bug that caused queries against tables with user-defined types to sometimes fail with errors after restoring those tables.",
                "Fixed a bug that could cause an internal error if a table with an implicit (rowid) primary key was locked from within a subquery, for example,SELECT * FROM (SELECT * FROM foo WHERE x = 2) FOR UPDATE;. The error could occur either under read-committed isolation, or withoptimizer_use_lock_op_for_serializableenabled.",
                "Fixed an issue where adding an existing column with theIF NOT EXISTSoption could exit too early, skipping necessary handling of the abstract syntax tree (AST). This could lead to failure of theALTERstatement.",
                "CLOSE CURSORstatements are now allowed in read-only transactions, similar to PostgreSQL. The bug has been present since at least v23.1.",
                "Fixed an issue where a schema change could incorrectly cause a changefeed to fail with an assertion error likereceived boundary timestamp ... of type ... before reaching existing boundary of type ....",
                "Internal scans are now exempt from thesql.defaults.disallow_full_table_scans.enabledsetting, allowing index creation even when the cluster setting is enabled.",
                "A new column of typeJSONorJSONBthat has aUNIQUEconstraint will now be blocked from being added to a table if the cluster has not yet finalized the upgrade to v23.2.",
                "Previously, CockroachDB could encounter an internal error of the forminterface conversion: coldata.Column isin an edge case. This is now fixed. The bug was present in versions v22.2.13 and later, v23.1.9 and later, and v23.2 and later.",
                "Fixed a bug that caused incorrectNOT NULLconstraint violation errors onUPSERTandINSERT ... ON CONFLICT ... DO UPDATEstatements when those statements updated an existing row and a subset of columns that did not include aNOT NULLcolumn of the table. This bug had been present since at least v20.1.0.",
                "Fixed an unhandled error that could occur when usingREVOKE ... ON SEQUENCE ... FROM useron an object that was not a sequence.",
                "Addressed a panic that could occur insideCREATE TABLE ASthat occurred if sequence builtin expressions had invalid function overloads.",
                "String constants can now be compared against collated strings.",
                "Previously, when executing queries with index or lookup joins when the ordering needed to be maintained, CockroachDB in some cases could get into a pathological state which would lead to increased query latency, possibly by several orders of magnitude. This bug was introduced in v22.2 and is now fixed.",
                "Addressed a bug withDROP CASCADEthat would occasionally panic with anun-dropped backrefmessage on partitioned tables.",
                "Reduced the duration of partitions in the gossip network when a node crashes. This eliminates false positives in theranges.unavailablemetric.",
                "An error message is no longer returned when a non-admin user runsDROP ROLE IF EXISTSon a user that does not exist.",
                "Fixed a bug that could cause incorrect query results when the optimizer planned a lookup join on an index containing a column of typeCHAR(N),VARCHAR(N),BIT(N),VARBIT(N), orDECIMAL(M, N), and the query held that column constant to a single value (e.g., with an equality filter).",
                "Fixed an unhandled error that would occur ifDROP SCHEMAwas executed on thepublicschema of thesystemdatabase, or on an internal schema likepg_catalogorinformation_schema.",
                "Fixed a bug that caused incorrect evaluation of some binary expressions involvingCHAR(N)values and untyped string literals with trailing whitespace characters. For example, the expression'f'::CHAR = 'f 'now correctly evaluates totrue.",
                "Fixed an error that could happen if an aggregate function was used as the value in aSETcommand.",
                "Added automated clean-up/validation for dropped roles inside of default privileges.",
                "Fixed a bug that could causeRESTOREto hang after encountering transient errors from the storage layer.",
                "Fixed a bug that caused incorrect evaluation ofCASE,COALESCE, andIFexpressions with branches producing fixed-width string-like types, such asCHAR. In addition, theBPCHARtype has been fixed so that it no longer incorrectly imposes a length limit of1.",
                "Fixed a bug that could lead to incorrect results in rare cases. The bug requires aJOINbetween two tables, with an equality between columns with equivalent, but not identical types (e.g.,OIDandREGCLASS). In addition, theJOINmust lookup an index that includes a computed column that references one of the equivalent columns. This bug has existed since before v23.1.",
                "Fixed a bug that could lead to incorrect results in rare cases. The bug requires a lookup join into a table with a computed index column, where the computed column expression is composite sensitive. A composite sensitive expression can compare differently if supplied non-identical, but equivalent input values (e.g.2.0::DECIMALvs2.00::DECIMAL). This bug has existed since before v23.1.",
                "Fixed a bug where a span stats request on a mixed-version cluster resulted in an NPE.",
                "Thefranz-golibrary has been updated to fix a potential deadlock on changefeed restarts.",
                "Fixed an issue where changefeeds would fail to update protected timestamp records in the face of retryable errors.",
                "Fixed a bug that could result in changefeeds using CDC queries failing due to a system table being garbage collected.",
                "Fixed a rare bug in which an update of a primary key column that is also the only column in a separate column family can sometimes fail to update the primary index. This bug has existed since v22.2. Requirements to hit the bug are:A table with multiple column families.A column family containing a single primary key column.That column family is not the first column family.That column family existed before its column was in the primary key.That column must be of typeFLOAT4/8,DECIMAL,JSON, collated string type, or array.An update that changes that column from a composite value to a non-composite value.",
                "Theproretsetcolumn of thepg_catalog.pg_proctable is now properly set totruefor set-returning builtin functions.",
                "Fixed a bug in the query optimizer that could cause CockroachDB nodes to crash in rare cases. The bug could occur when a query contains a filter in the formcol IN (elem0, elem1, ..., elemN)only whenNis very large, e.g., 1.6+ million, and whencolexists in a hash-sharded index or, exists in a table with an indexed, computed column dependent oncol.",
                "Users with theadminrole can now runALTER DEFAULT PRIVILEGES FOR target_role ...on anytarget_role. Previously, this could result in a privilege error, which is incorrect as admins are allowed to perform any operation.",
                "REASSIGN OWNED BYwill now transfer ownership of thepublicschema. Previously, it would always skip over thepublicschema even if it was owned by the target role.",
                "Added a timer for inner changefeed sink client flushes. Fixed a bug where timers were not correctly registered with the metric system.",
                "Fixed an error that could be caused by using anAS OF SYSTEM TIMEexpression that references a user-defined (or unknown) type name. These kinds of expressions are invalid, but previously the error was not handled properly. This will now return the correct error message.",
                "Fixed a bug where backup schedules could advance a protected timestamp too early, which caused incremental backups to fail.",
                "Fixed a bug where the commandSHOW CLUSTER SETTING FOR VIRTUAL CLUSTERwould erroneously returnNULLfor some settings.",
                "Fixed a bug where a node could fail to start with the errorcould not insert session ...: unexpected valueif an ambiguous result error occurred while inserting data into thesqllivenesstable.",
                "Fixed a bug that could preventupgrade finalizationdue to the upgrade pre-condition for repairing descriptor corruption.",
                "Fixed a rare bug where a lease transfer could lead to aside-transport update saw closed timestamp regressionpanic. The bug could occur when a node was overloaded and failing to heartbeat its node liveness record.",
                "Fixed a bug that could result in the erroneous log messageexpiration of liveness record ... is not greater than expiration of the previous lease ... after liveness heartbeat.",
                "Fixed a bug where queries that are not initiated within a SQL session could fail to respect a statement timeout, includingbackground jobs, queries issued by theDB Consolethat perform introspection, and theCockroachDB Cloud SQL Shell.",
                "Fixed a bug where a connection could be incorrectly dropped if the client was attempting to change a schema at the same time that the same schema's objects were being dropped.",
                "Fixed a bug that could cause the following error to be logged when executing a query underREAD COMMITTEDisolation if it involved a table withNOT NULLvirtual columns:internal error: Non-nullable column ....",
                "Fixed a potential memory leak inchangefeedsthat use a cloud storage sink. The memory leak could occur if both of thecluster settingschangefeed.fast_gzip.enabledandchangefeed.cloudstorage.async_flush.enabledweretrueandif the changefeed received an error while attempting to write to the sink.",
                "Fixed a bug introduced in v23.2.6, wherestatisticsforecasting could predict a result of zero rows for a downward-trending statistic whensql.stats.forecasts.max_decreaseisfalse. The setting is now enabled (set to1/3by default).",
                "Fixed a bug introduced in v23.1 that can cause incorrect results in the following scenario:The query contains a correlated subquery.The correlated subquery has aGroupByorDistinctOnoperator with an outer-column reference in its input.The correlated subquery is in the input of aSELECTorJOINclause that has a filter that sets the outer-column reference equal to an inner column that is in the input of the grouping operator.The set of grouping columns does not include the replacement column explicitly.",
                "Fixed a bug whereAWS S3 and HTTP client configurationswere not considered when implicit authentication was used.",
                "Fixed a bug that could prevent achangefeedfrom resuming from a prolonged paused state.",
                "Fixed a bug where declarative and legacyschema changeswere incorrectly allowed to be executed concurrently, which could lead to failing or hung schema change jobs.",
                "Fixed a bug that caused errors likeERROR: column 'crdb_internal_idx_expr' does not existwhen accessing a table with anexpression indexwhere the expression evaluates to anENUMtype, e.g.,CREATE INDEX ON t ((col::an_enum)).",
                "Functioninput parameters can no longer have theVOIDtype.",
                "Internally issued queries that are not initiated within aSQL sessionno longer respect a statement timeout. This includes:background jobs, queries issued by theDB Consolethat perform introspection, and the CloudSQL shell.",
                "Fixed a bug where theschema_lockedstorage parameterdid not prevent a table from being referenced by aforeign key.",
                "Users with theVIEWACTIVITYSQL privilegecan now request, view, and cancelstatement bundlesin theDB Console.",
                "Fixed a bug where alease transfercould lead to a panic with the messageside-transport update saw closed timestamp regression. The bug could occur when a node was overloaded and failing toheartbeat its node liveness record.",
                "Thelog messageexpiration of liveness record ... is not greater than expiration of the previous lease ... after liveness heartbeatis no longer generated.",
                "Fixed a bug where therequire_explicit_primary_keyssession variablewould prevent allCREATE TABLEstatements from working.",
                "Fixed a slow-building memory leak when usingKerberos authentication.",
                "Fixed a potential memory leak inchangefeeds using a cloud storage sink. The memory leak could occur if bothchangefeed.fast_gzip.enabledandchangefeed.cloudstorage.async_flush.enabledweretrue, and the changefeed received an error while attempting to write to the cloud storage sink.",
                "Internally issued queries that are not initiated within aSQL sessionno longer respect astatement timeout. This includes: backgroundjobs, queries issued by theDB Consolethat perform introspection, and theCloud SQL shell.",
                "Fixed a rare bug where alease transfercould lead to aside-transport update saw closed timestamp regressionpanic. The bug could occur when a node wasoverloadedand failing to heartbeat itsnode livenessrecord.",
                "Resolved a concerninglogmessage:expiration of liveness record ... is not greater than expiration of the previous lease ... after liveness heartbeat. This message is no longer possible.",
                "Fixed a bug causing gateway nodes to crash while executingINSERTstatements inREGIONAL BY ROWtables. This bug had been present since v23.2.",
                "Fixed a bug wheredroppingENUMvaluesthat were referenced byindex expressionscould fail with an error.",
                "Fixed a bug that caused a memory leak when executing SQL statements with comments, e.g.,SELECT /* comment */ 1;. Memory owned by a SQL session would continue to grow as these types of statements were executed. The memory would only be released when closing the SQL session. This bug had been present since v23.1.",
                "Fixed a memory leak that could occur when specifying a non-existentvirtual clustername in the connection string.",
                "Fixed a bug whereCREATE INDEX IF NOT EXISTSwould not correctly short-circuit if the given index already existed.",
                "Fixed a bug in overly eager syntax validation, which did not allow theDESCENDINGclause for non-terminal columns of aninverted index. Only the last column of an inverted index should be prevented from beingDESCENDING, and this is now properly checked.",
                "Fixed a bug where anindexcould store a column in the primary index if that column had a mixed-case name.",
                "Fixed small memory leaks that would occur duringchangefeed creation.",
                "Setting or dropping a default value on acomputed columnis now blocked -- even for null defaults. Previously, setting or dropping a default value on a computed column was a no-op; now there will be an error message.",
                "Fixed a bug that could cause spurious user permission errors when multiple databases shared a common schema with a routine referencing a table. The bug had existed sinceuser-defined functionswere introduced in v22.2.",
                "Fixed a bug where a hash-sharded constraint could not be created if it referred to columns that had a backslash in the name.",
                "Fixed a bug whereTYPEDESC SCHEMA CHANGEjobs could end up retrying forever if the descriptor targeted by them was already dropped.",
                "Fixed a bug in which the output ofEXPLAIN (OPT, REDACT)for variousCREATEstatements was not redacted. This bug had existed sinceEXPLAIN (REDACT)was introduced in v23.1 and affects the following statements:EXPLAIN (OPT, REDACT) CREATE TABLEEXPLAIN (OPT, REDACT) CREATE VIEWEXPLAIN (OPT, REDACT) CREATE FUNCTION",
                "This release includes 80 merged PRs by 28 authors.",
                "Fixed a bug introduced in v23.2.0 in which CockroachDB would hit an internal error when evaluatingINSERTsintoREGIONAL BY ROWtables where the source was aVALUESclause with a single row and at least one boolean expression.#125504",
                "Fixed a bug where aDROP ROLEorDROP USERcommand could leave references behind inside types, which could prevent subsequentSHOW GRANTScommands from working.",
                "Fixed a bug that could lead to descriptors having privileges to roles that no longer exist. Added an automated clean up fordropped rolesinside descriptors.",
                "Fixed a bug where a change to auser-defined type (UDT)could cause queries against tables using that type to fail with an error message like:histogram.go:694: span must be fully contained in the bucket. The change to the user-defined type could occur either directly from anALTER TYPEstatement or indirectly from anALTER DATABASE ... ADD REGIONorALTER DATABASE ... DROP REGIONstatement, which implicitly modifies thecrdb_internal_regionUDT. This bug had existed since UDTs were introduced in v20.2.",
                "Fixed a bug in which constantLIKEpatterns containing certain sequences of backslashes did not become constrained scans. This bug has been present since v21.1.13 when support for building constrained scans fromLIKEpatterns containing backslashes was added.",
                "Fixed a bug introduced in alpha versions of v23.1 where calling a routine could result in an unexpectedfunction ... does not existerror. The bug is triggered when the routine is called twice using the exact same SQL query, and either: (a) the routine has polymorphic arguments, or: (b) between the two calls, the routine is replaced by a routine with the same name and different parameters.",
                "Fixed the statistics estimation code in theoptimizerso it does not use the empty histograms produced ifhistogram collectionhas been disabled during stats collection due to excessive memory utilization. Now the optimizer will rely on distinct counts instead of the empty histograms and should produce better plans as a result. This bug has existed since v22.1.",
                "Fixed a bug incockroach debug tsdumpwhere the command fails when a custom SQL port is used and the--format=rawflag is provided.",
                "Fixed a bug where auser-defined function (UDF)that shared a name with abuilt-in functionwould not be resolved, even if the UDF had higher precedence according to thesearch_pathvariable.",
                "Fixed a bug that causedbackground jobsto incorrectly respect a statement timeout.",
                "Fixed a bug whereALTER DATABASE ... DROP REGIONcould fail if any tables under the given database haveindexes on expressions.",
                "Fixed a bug whenrestoringa database with acomposite type.",
                "Fixed a bug when inputtingpublicrole as user name forbuilt-in compatibility functions, such ashas_database_privilegeandhas_schema_privilege.",
                "Fixed a bug where theDatabase pagecould crash if range information is not available.",
                "Fixed a bug where CockroachDB could incorrectly evaluate anIS NOT NULLfilter if it was applied to non-NULLtuples that hadNULLelements, such as(1, NULL)or(NULL, NULL). This bug has existed since v20.2.",
                "In theDB Console event log,ALTER ROLEevents now display correctly even when norole optionsare included in theALTER ROLEstatement.",
                "Fixed a bug whereCREATE TABLEwithindex expressionscould hit undefined column errors ontransaction retries.",
                "Fixed a bug where thedisallow_full_table_scanssession variablewas not working for tables withhash-sharded indexes.",
                "This release includes 5 merged PRs by 4 authors.",
                "Fixed a bug where a range with a replication factor of1to be scaled up to a replication factor of2.",
                "Fixed a bug that could cause leases to thrash between nodes when perturbed with a replication factor of1.",
                "Fixed a bug where, when thettl_row_stats_poll_intervalstorage parameter is non-zero, the job to update row statistics for a table withrow-level TTLenabled could be blocked from completing by the queries issued to update the row statistics. Now, if the job completes, these queries are cancelled, and thejobs.row_level_ttl.total_rowsandjobs.row_level_ttl.total_expired_rowsmetrics will report 0 if the job finishes before the queries to update the row statistics complete.",
                "Fixed a bug where theresults_buffer_sizesession settingcould not be configured using theoptionsquery parameter in the connection string, but only as a top-level query parameter. This variable cannot be changed by using theSETcommand after the session begins.",
                "Fixed a bug where dropping a role or user could leave references behind inside types. This in turn could prevent theSHOW GRANTScommand from working correctly.",
                "Fixed a bug where theALTER TABLE ... ALTER PRIMARY KEYcommand could hang for a table if its indexes are referred to by views or functions using theforce syntaxsyntax.",
                "Fixed a bug where theSHOW TYPEScommand omitted user-defined composite types. This bug was introduced in v23.1.",
                "Fixed a bug where if a column name that contains UTF-8 characters is referenced in theSTORING()clause of theCREATE INDEXcommand, thedeclarative schema changercannot detect whether the column is already handled by an existing index.",
                "Fixed a bug where thedeclarative schema changererroneously includes virtual columns that are referenced in theSTORING()clause of theCREATE INDEXcommand.",
                "Fixed a bug introduced in v20.2, where a change to a user-defined type could cause queries against tables using that type to fail with the error likehistogram.go: span must be fully contained in the bucket. This bug could occur if the change was from anALTER TABLEcommand or from anALTER DATABASE ... ADD REGIONorALTER DATABASE ... DROP REGIONcommand, which implicitly change the non-publiccrdb_internal_regiontype.",
                "Fixed a bug where telemetry logs could emit the same statement fingerprint ID for different SQL statements.",
                "Fixed a bug where adding a column with a default value of an empty array could fail.",
                "Fixed a bug where thedeclarative schema changercould erroneously succeed despite a violation of anALTER TABLE ... ADD CONSTRAINT UNIQUEconstraint. Now such a violation results in an error message with the error code42601.",
                "Fixed achangefeedpanic in v24.1, v23.2, and v23.1 when thecluster settingchangefeed.aggregator.flush_jittercluster settingis configured and a changefeed'smin_checkpoint_frequencyoption is set to zero.",
                "Fixed a bug where the public schema was erroneously created with its owner set to theadminrole instead of the database owner. Ownership of the public schema can be altered after the schema is created.",
                "Fixed a bug introduced in v23.2.0 where inserting rows into aREGIONAL BY ROWtablecould cause an internal error if the source was aVALUESclause with a single row and at least one boolean expression.",
                "Fixed a bug whereclient certificate authenticationcombined withidentity maps(server.identity_map.configuration) did not work. For the feature to work correctly, the client must specify a valid database user in theconnection string.",
                "Fixed a bug where therow-based execution enginecould drop aLIMITclause when there was anORDER BYclause, and the ordering was partially provided by an input operator. For example, this bug could occur with an ordering such asORDER BY a, bwhen the scanned index was only ordered on columna. The impact of this bug was that more rows may have been returned than specified by theLIMITclause. This bug is only present when not using thevectorized execution engine; that is, when running withSET vectorize = off;. This bug has existed since CockroachDB v22.1.",
                "Fixed a bug in the DB Console'sCustom Charttool where store-level metrics were displayed only for the first store ID associated with the node. Now data is displayed for all stores present on a node, and a single time series is shown for each store, rather than an aggregated value for all of the node's stores. This allows finer-grained monitoring of store-level metrics.",
                "Fixed a bug where privileges granted forexternal connectionswere incorrectly showing up inSHOW SYSTEM GRANTS, but were not useful because there was no associated object name. The privileges no longer appear inSHOW SYSTEM GRANTS. Instead, theSHOW GRANTS ON EXTERNAL CONNECTIONstatement should be used.",
                "Statistics forecasts of zero rows can cause suboptimalquery plans. Forecasting will now avoid predicting zero rows for most downward-trending statistics.",
                "Fixed a bug introduced in v23.2 that could cause aPL/pgSQLroutine to return incorrect results when the routine included:At least one parameter.AnIFstatement with one leak-proof branch and one branch with side effects.",
                "Fixed a bug that could result in an internal error when attempting to create aPL/pgSQLroutine using the (currently unsupported)%ROWTYPEsyntax for a variable declaration.",
                "Fixed a bug where aRESTOREof a backup that itself contained a table created by theRESTOREof a table with an in-progressIMPORT INTOwould fail to restore all rows.",
                "Fixed a bug introduced in v23.2 that could cause aPL/pgSQLvariable assignment to not be executed if the variable was never referenced after the assignment.",
                "Fixed a bug where CockroachDB could run into anattempting to append refresh spans after the tracked timestamp has moved forwardinternal error in some edge cases. The bug had been present since v22.2.",
                "Ajobwill now log rather than fail if it reports an out-of-bound progress fraction.",
                "Fixed a bug that would occur whenALTER TYPE ... DROP VALUEis followed byDROP SCHEMA CASCADE ...in the same transaction. Previously, theALTER TYPEschema change would get queued up to run at commit time, but by that point, the type may have already been removed, so the commit could fail.",
                "Fixed a bug that could lead to descriptors with self references that pointed to incorrect descriptor IDs. Now, tables that see the errorinvalid inbound foreign key ... origin table ID should beorinvalid outbound foreign key ... reference table ID should bewill automatically repair post deserialization.",
                "Fixed a bug where a failedrestorejob could leave the system in a state where re-attempting the restore was not possible without manual intervention.",
                "Index recommendationsin theDB Consolewill now function properly for indexes on tables or columns whose names contain quotation marks or whitespace. For example:CREATE INDEX ON \"my table\" (\"my col\");.",
                "Fixed a crash introduced in v23.2.5 that could occur when planningstatistics collectionon a table with avirtual computed columnusing a user-defined type when the newly introducedcluster settingsql.stats.virtual_computed_columns.enabledis set totrue. (The setting was introduced in v23.2.4 and set tofalseby default.)",
                "Added automated clean up and validation fordropped rolesinside descriptors.",
                "Fixed a bug whereDROP ROLEandDROP USERcould leave references behind inside types, which could preventSHOW GRANTSfrom working.",
                "Fixed a bug where a change to auser-defined typecould cause queries against tables using that type to fail with the errorhistogram.go:694: span must be fully contained in the bucket. The change to the user-defined type could come directly from anALTER TYPEstatement, or indirectly from anALTER DATABASE ADD REGIONorDROP REGIONstatement (which implicitly change thecrdb_internal_regiontype). This was present since user-defined types were introduced in v20.2.",
                "Fixed a slow memory leak when opening many newconnections. This bug was introduced in v22.2.9 and v23.1.0.",
                "Fixed a bug that occurred when usingALTER TABLEto drop and re-add aCHECKconstraintwith the same name.",
                "SequenceoptionsMINVALUEandMAXVALUEautomatically adjust to new types bounds. This mirrors the behavior of PostgreSQL.",
                "Fixed a bug that could prevent timeseries graphs shown on the DB Console SQL ActivityStatement Detailspage from rendering correctly when specifying a custom time range.",
                "Fixed a bug present since at least v21.1 that could lead to incorrect evaluation of anINexpression with:INT2orINT4type on the left side, andValues on the right side that are outside of the range of the left side.",
                "Fixed a leak in reported memory usage (not the actual memory usage) by the internal memory accounting system, the limit for which is configured via the--max-sql-memoryflag when a long-running sessions issues hundreds of thousands or moretransactions. This reporting bug could causeroot: memory budget exceedederrors for other queries. The bug was introduced in v23.1.17 and v23.2.3.",
                "Fixed a bug introduced in v23.2.4 that could prevent collection oftable statisticson tables that have on virtualcomputed columnsofuser-defined typewhen the newly-introducedcluster settingsql.stats.virtual_computed_columns.enabledis set totrue(defaults tofalse). The setting was introduced in v23.2.4 and is disabled by default.",
                "Fixed a bug where aGRANT ... ON ALL TABLESstatement could fail if a sequence existed that did not support theprivilegebeing granted.",
                "Fixed an existing bug where an unused value cannot be dropped from anENUMif theENUMitself is referenced by auser-defined function. A value can now be dropped from anENUMas long as the value itself is not being referenced by any other data element, including a user-defined function.",
                "This release includes 79 merged PRs by 33 authors.",
                "Previously, on long-runningsessionsthat issue many (hundreds of thousands or more)transactions, CockroachDB's internal memory accounting system, the limit for which is configured via the--max-sql-memoryflag) could leak. This bug, in turn, could result in the error message\"root: memory budget exceeded\"for other queries. The bug was present in v23.2.3 and is now fixed.",
                "Previously,altering a table's localityfromREGIONAL BY ROWtoREGIONAL BY TABLEcould causeleaseholdersto never move to thedatabase's primary region. This is now fixed.",
                "A user with theVIEWACTIVITYREDACTEDprivilegecan no longer see constants inside of queries that originate from other users in theSHOW SESSIONSresult. Previously, this redaction did not occur.",
                "Previously, theSHOW STATEMENTSand theSHOW QUERIEScommands incorrectly required the user to have theVIEWACTIVITYorVIEWACTIVITYREDACTEDprivilege. However, a user always should be able to view their own queries, even without these privileges. This is now fixed.",
                "Fixed a bug whereRESTOREon certainBACKUPswould open a very large number of connections to the backup storage provider.",
                "Fixed a bug that occurred when usingALTER TABLEtodropandaddback aCHECKconstraintwith the same name.",
                "Fixed a bug in which it was possible to setsession variabletransaction_read_onlytofalseduring anAS OF SYSTEM TIMEtransaction.",
                "Fixed a bug where some files were not closed when inspectingbackup metadataduringBACKUPandRESTORE.",
                "Fixed an intermittent page crash on theSchema Insightsview.",
                "This release includes 65 merged PRs by 37 authors",
                "Fixed a bug where achangefeedcould omit events in rare cases, logging the errorcdc ux violation: detected timestamp ... that is less or equal to the local frontier. This could happen in the following scenario:Arangefeedruns on a followerreplicathat lags significantly behind theleaseholder.A transaction commits and removes its transaction record before itsintentresolution is applied on the follower.The follower'sclosed timestamphas advanced past the transaction commit timestamp.The rangefeed attempts to push the transaction to a new timestamp (at least 10 seconds after the transaction began).This may cause the rangefeed to prematurely emit a checkpoint before emitting writes at lower timestamps, which in turn may cause thechangefeedto drop these events entirely, never emitting them.",
                "Decommissioning replicas that are part of a mis-replicated range will no longer get stuck on a rebalance operation that was falsely determined to be unsafe. This bug was introduced in v23.1.0.",
                "CockroachDB will no longer spam the logs withunable to get CPU capacityerrors every 10 seconds when running outside of a CPU cgroup.",
                "AUTO CREATE STATSjobs could previously lead to growth in an internal system table resulting in slower job-system related queries.",
                "Fixed a bug that caused an inscrutable error when asequencename allocated bySERIALconflicted with an existing type name.",
                "Fixed an internal error with a message like:LeafTxn ... incompatible with locking requestthat occurs when performing an update underREAD COMMITTEDisolationthat cascades to a table with multiple other foreign keys.",
                "Fixed a bug whereALTER PRIMARY KEYcould fail with an errornon-nullable column <x> with no value! Index scanned ..when validating recreatedsecondary indexes.",
                "Fixed a bug whereCOMMENT ONstatements could fail with anunexpected valueerror if multipleCOMMENTstatements were running concurrently.",
                "Previously, in certain cases, using virtual tables such ascrdb_internal.system_jobscould result in the internal errorattempting to append refresh spans after the tracked timestamp has moved forward. This is now fixed. The bug was introduced in CockroachDB v23.1.",
                "Fixed a bug where operations on thecrdb_internal.leasestable could cause a node to become unavailable due to a deadlock in the leasing subsystem.",
                "Fixed a bug where rangefeed resolved timestamps could get stuck, continually emitting the log messagepushing old intents failed: range barrier failed, range split, typically following arange merge.",
                "Fixed a bug where running achangefeedthat targets a table with a user-defined type column and with theenvelopeoptionset to any value other thanwrappedwould cause a node panic due to a nil dereference.",
                "Fixed a rare panic that could happen during apg_dumpimport that contains a function that has a subquery in one of its arguments, likeSELECT addgeometrycolumn(...). Now, attempting to import apg_dumpwith such a function results in an expected error.",
                "Users with theVIEWACTIVITYprivilege can now request statement bundles usingcrdb_internal.request_statement_bundleor through the DB ConsoleSQL Activitypage.",
                "Fixed a bug in changefeedwebhook sinkswhere the HTTP request body may not be initialized on retries, resulting in the errorhttp: ContentLength=... with Body length 0.",
                "Fixed a bug that caused internal errors when executing anEXPORTstatement.",
                "Fixed a bug that could lead to schema changes with a large number of descriptors doing full table scans onsystem.leases.",
                "Fixed a bug where rangefeed resolved timestamps could get stuck, continually emitting the log messagepushing old intents failed: range barrier failed, range split, typically following a range merge. This bug was introduced in v23.2.1.",
                "Fixed a bug that occurred when usingALTER TABLEto drop and re-add aCHECKconstraint with the same name.",
                "Fixed a bug that caused a slow memory leak that can accumulate when opening many new connections. The bug was present in v22.2.9+ and v23.1+ versions.",
                "Fixed a bug whererangefeedresolved timestamps could get stuck, continually emitting the log messagepushing old intents failed: range barrier failed, range split, typically following arange merge. This bug was introduced in v23.2.1.",
                "This release includes 2 merged PRs by 2 authors.",
                "Fixed a durability bug inRaft logstorage, caused by incorrect syncing of filesystem metadata. Previously, it was possible to lose writes of a particular kind (AddSSTable) that were used by e.g.RESTORE. This loss was possible only under power-off or operating system crash conditions. Under such conditions, CockroachDB could enter a crash loop on node restart. In the worst case of a coordinated power-off/crash across multiple nodes this could lead to an unrecoverable loss ofRaft quorum.",
                "Fixed a bug where largejobsrunning with execution locality (such as somechangefeeds) could result in thegatewaynode being assigned most of the work, causing performance degradation and cluster instability.",
                "Fixed a bug that caused node crashes and panics when runningINSERTqueries onREGIONAL BY ROWtables withUNIQUEconstraints or indexes. The bug was only present in v23.2.0-beta.1.",
                "Fixed a bug that existed only in v23.2 alpha and beta versions that could have caused side effects to happen out of order forPL/pgSQLroutines in rare cases.",
                "Fixed a bug that existed since v23.1 that prevented naminguser-defined type (UDT)parameters when dropping auser-defined function(or procedure).",
                "Fixed a bug wherescheduled jobsusingexternal storage providerscould fail shortly after node startup.",
                "Locking tables (e.g., withSELECT FOR UPDATE) on the null-extended side ofouter joins(e.g., the right side of aLEFT JOIN) is now disallowed and returns an error. This improves compatibility with PostgreSQL and prevents ambiguity inlocking semantics. This bug has existed since locking withFOR UPDATEwas introduced.",
                "Fixed a display bug in theDB Consolewhere because not all types ofschema changesare setting the value for the mutation ID, the value of the ID could previously show as \"with ID undefined\" on theEvents panel. Now, the notification omits the undefined value (the rest of the event notification is still displayed).",
                "Fixed the formatting forPL/pgSQLroutines, which could prevent creating a routine withloop labels, and could prevent some expressions from beingredactedcorrectly. The bug only existed in v23.2 alpha and beta releases.",
                "Fixed a bug that would cause a syntax error duringredactionof aPL/pgSQLroutine. The bug existed only in v23.2 alpha and beta releases.",
                "Fixed a bug that would cause syntax errors when attempting toRESTOREa database withPL/pgSQLuser-defined functions (UDFs)orstored procedures. This bug only affected v23.2 alpha and beta releases.",
                "UPDATE,UPSERT, andINSERT ON CONFLICTqueries are now disallowed underRead Committed isolationwhen the table contains acheck constraintinvolving acolumn familythat is updated, and the check constraint also involves a column family that isnotupdated, butisread. This is a temporary fix to prevent possible violation of the check constraint, and the restriction will be lifted in the future.",
                "Previously, allAggHistogram-powered metrics were not reporting quantiles properly in theDB Console. This patch fixes the histograms so that the quantiles in DB Console are reported correctly. these histograms were only broken in theDB Console metrics dashboards, but werenotbroken in thePrometheus-compatible endpoint,/_status/vars. The list of affected metrics is shown below.#114506changefeed.message_size_histchangefeed.parallel_io_queue_nanoschangefeed.sink_batch_hist_nanoschangefeed.flush_hist_nanoschangefeed.commit_latencychangefeed.admit_latencyjobs.row_level_ttl.span_total_durationjobs.row_level_ttl.select_durationjobs.row_level_ttl.delete_duration",
                "Fixed a bug introduced in v23.2 that caused internal errors and panics when certain SQL queries were run with automaticindex recommendationcollection enabled.",
                "Standard indexesandinverted indexesmay no longer be created onPL/pgSQLREFCURSOR[]s columns.REFCURSORcolumns themselves are not indexable.",
                "Fixed a bug that prevented databaseRESTOREwhen the database contained avieworroutinethat referenced auser-defined type (UDT)in the body string. For views, this bug was introduced in v20.2, whenuser-defined types (UDTs)were introduced. For routines, this bug was introduced in v22.2, when user-defined functions (UDFs) were introduced.",
                "Fixed a bug that could cause a function resolution error when attempting to use abuiltin functionlikenow()as a formatting argument to aPL/pgSQLRAISEstatement.",
                "Fixed a bug where CDC custom key columns did not function correctly withCDC queries. For example,CREATE CHANGEFEED WITH key_column=..., unordered AS SELECT * FROM tablenow works correctly instead of retrying forever. Note that some functionalities with CDC custom keys are not fully supported, see#115267for more details.",
                "Fixed a bug inRaft logtruncation that could lead to crash loops, and unrecoverable loss ofquorumin the unlikely worst case that allreplicasenter this crash loop. The bug manifested when a few things coincided: The cluster was running a bulk write workload (e.g.,schema change,import,RESTORE); a log truncation command was running; and the process crashed at an unfortunate moment (e.g., the process was killed, or killed itself for reasons like detecting adisk stall).",
                "Fixed the value used for the total runtime on SQL statistics. This was using the wrong value previously, causing theSQL Activitypage to display values with more than 100%.",
                "Fixed a bug where trying to set an emptysearch_pathsession variableresulted in an error.",
                "It is now possible to assign to the parameter of aPL/pgSQLroutine. Previously, attempts to do this would result in a \"variable not found\" error at routine creation time. In addition, variable shadowing is now explicitly disabled, where previously it would cause an internal error. These bugs existed in the v23.2.0 release and the v23.2 pre-release versions.",
                "Fixed a bug in therow-level TTLjobthat would cause it to skip expired rows if theprimary keyof the table included columns of thecollated stringtype. This bug was present since the initial release of row-level TTL in v22.2.0.",
                "Fixed a bug where concurrentGRANTstatements can cause deadlocks.",
                "CockroachDB can now transparently retry more retryable errors when performing a non-atomicCOPYcommand.",
                "Fixed a bug that causedDML statementsto fail while ahash-sharded indexwas being created. The symptom of this bug was an error likecolumn \"crdb_internal_val_shard_16\" does not exist. This bug was present since v23.1.0.",
                "Previously, CockroachDB could encounter the errorunable to encode table key: *tree.DTSQuerywhen operating on columns with the internalTSQuerytype in some contexts (e.g., when collectingtable statisticsor when performing aDISTINCToperation). This is now fixed. The bug had been present since v23.1 when support for the internalTSQuerytype was added.",
                "Previously, in some cases CockroachDB could incorrectly evaluate queries that scanned aninverted indexand had aWHEREfilterin which two sides of theANDexpression had \"similar\" expressions (e.g.,ARRAY['str1'] <@ col AND (ARRAY['str1'] && col OR ...)); this is now fixed. The bug had been present since prior to v22.2.",
                "Fixed a bug that could causeDELETEqueries sent by therow-level TTLjobto use asecondary indexrather than theprimary indexto find the rows to delete. This could lead to someDELETEoperations taking a much longer time than they should. This bug was present since v22.2.0.",
                "Fixed an issue with missing data on SQL statistics, and consequently missing data on theSQL Activity page, by properly recalculating the value from the current and past hour on the top activity table.",
                "Internal queries issued by therow-level TTLjobsshould now use optimal plans. The bug has been present since at least v22.2.",
                "Fixed a bug where achangefeedcould omit events in rare cases, logging the errorcdc ux violation: detected timestamp ... that is less or equal to the local frontier. This could happen in the following scenario:Arangefeedruns on a followerreplicathat lags significantly behind theleaseholder.A transaction commits and removes itstransaction recordbefore itsintentresolution is applied on the follower.The follower'sclosed timestamphas advanced past the transaction commit timestamp.The rangefeed attempts to push the transaction to a new timestamp (at least 10 seconds after the transaction began).This may cause the rangefeed to prematurely emit a checkpoint before emitting writes at lower timestamps, which in turn may cause thechangefeedto drop these events entirely, never emitting them.",
                "This release includes 252 merged PRs by 60 authors.",
                "Fixed a bug introduced in v23.2 that caused internal errors and panics when certain queries ran with automaticindex recommendation collection enabled.",
                "Fixed a bug where mixed-version clusters with both v23.1 and v23.2 nodes could detect a false-positive replica inconsistency inGLOBALtables.",
                "Fixed a bug that caused node crashes and panics when runningINSERTqueries onREGIONAL BY ROWtables withUNIQUEconstraints or indexes. The bug is only present in version v23.2.0-beta.1.",
                "UPDATE,UPSERT, andINSERT ON CONFLICTqueries are now disallowed under Read Committed isolation when the table contains aCHECKconstraintinvolving acolumn familythat is updated, and thatCHECKconstraint also involves a column family that isnotupdated, butisread. This restriction is a temporary fix to prevent possible violation of theCHECKconstraint. However, it is important to note that this restriction will be lifted in the future.",
                "Fixed a bug wherescheduled jobsusingexternal storage providersmay fail shortly after node startup.",
                "Fixed the formatting forplpgsqlroutines, which could prevent the creation of a routine with loop labels and could prevent some expressions from being redacted correctly. The bug only existed in alpha and beta versions of v23.2.",
                "Fixed a bug that would cause a syntax error during redaction of a PL/pgSQL routine. The bug existed only in alpha and beta versions of the v23.2 release.",
                "Fixed a bug that would cause syntax errors when attempting torestore a databasewithPL/pgSQL UDFsor storedprocedures. This bug only affected alpha and beta versions of v23.2.",
                "Fixed a bug in PL/pgSQL where altering the name of asequenceor UDT that was used in aPL/pgSQL functionorprocedurecould break them. This is only present in v23.2 alpha and beta releases.",
                "Fixed a bug whereSELECT FOR UPDATEunder Read Committed isolation on multi-column-family tables was not lockingcolumn familiescontaining only key columns.",
                "Fixed a bug where allAggHistogram-powered metrics were not reporting quantiles properly in theDB Console. The quantiles in the DB Console are now reported correctly. This bug was only present in histograms in theDB Console metricsfeatures, and didnotaffect metrics reporting in thePrometheus-compatibleendpoint,/_status/vars. The affected metrics were:changefeed.message_size_histchangefeed.parallel_io_queue_nanoschangefeed.sink_batch_hist_nanoschangefeed.flush_hist_nanoschangefeed.commit_latencychangefeed.admit_latencyjobs.row_level_ttl.span_total_durationjobs.row_level_ttl.select_durationjobs.row_level_ttl.delete_duration",
                "Fixed a bug that could result in an incorrecttoo few columnserror for queries that useANY <array>syntax with a subquery.",
                "Fixed a bug that could causetoo few columns/too many columnserrors for queries that usedINorNOT INwith a non-trivial right operand, such as a subquery (rather than a constant tuple).",
                "Fixed a bug whereCREATE INDEXwith expressions could fail on materializedviewswhen the declarative schema changer was used.",
                "Fixed a bug that could cause PL/pgSQL routines withSELECT INTOsyntax to return early. This bug existed only in pre-release versions v23.2.0-beta.1 and v23.2.0-beta.2.",
                "Fixed a bug that could cause side effects to happen out of order for PL/pgSQL routines in rare cases. This bug existed only in v23.2 alpha versions and previous v23.2 beta versions.",
                "Previously, in rare cases, CockroachDB could incorrectly evaluate queries with lookupjoinswhereequality cols are keywhen performing lookups on multiple ranges. This could either manifest as a stuck query or result in incorrect output. The bug was introduced in v22.2 and is now fixed.",
                "Fixed a durability bug in Raft log storage that was caused by incorrect syncing of filesystem metadata. It was possible to lose writes of a particular kind (AddSSTable) used by (e.g.)RESTORE. This loss was possible only under power-off or OS crash conditions. As a result, CockroachDB could enter a crash loop on restart. In the worst case of a coordinated power-off/crash across multiple nodes, this could lead to an unrecoverable loss of quorum.",
                "Fixed a bug where large jobs running withexecution localityoption could result in thegateway nodebeing assigned most of the work causing performance degradation and cluster instability.",
                "Fixed a bug that prevented naming UDT parameters whendropping a user-defined function(or procedure). This bug has existed since v23.1.",
                "Locking tables (e.g., withSELECT ... FOR UPDATE) on the null-extended side of outer joins (e.g., the right side of aLEFT JOIN) is now disallowed and returns an error. This improves compatibility with PostgreSQL and prevents ambiguity in locking semantics. This bug has existed since locking withFOR UPDATEwas introduced.",
                "This release includes 26 merged PRs by 20 authors.",
                "Fixed a bug that prevented theNowbutton on time range selectors in the DB Console from working as expected when a custom time period was previously selected.",
                "Fixed a bug that prevented theSQL Activitypage from showing internal statements when thesql.stats.response.show_internal.enabledcluster settingwas set totrue.",
                "Fixed a bug where an active replication report update could get stuck in a retry loop on clusters with over 10000 ranges. This could prevent a node from shutting down cleanly.",
                "Fixed a bug introduced in v23.1 that could cause an internal error when using the text format (as opposed to binary) whenpreparing a statementwith a user-defined composite type.",
                "Fixed a bug that could cause a replica to be stuck processing in a queue's replica set when the replica had recently been removed from purgatory for processing but was destroyed, or the replica's ID changed before being processed. These replicas are now removed from the queue when they are encountered.",
                "Fixed a bug that could cause aprepared statementto fail if it references both anenumand a table that has undergone a schema change.",
                "Fixed a bug that could cause cluster version finalization to contend with descriptor lease renewals on large clusters. Descriptor lease renewals previously had a higher priority than cluster upgrade finalization. Finalization now always has a higher priority than descriptor lease renewal.",
                "Fixed a bug that preventedbackupsfrom distributing work evenly across all replicas, including followers, regardless of leaseholder placement.",
                "Fixed a bug introduced in v23.2.0-beta.1 that could cause a single composite-typed variable to be incorrectly handled as the target of a PostgreSQLINTOclause.",
                "Fixed a bug that could cause aBEGINstatement log to record incorrect information in theAgefield, which could also cause them to appear erroneously in slow-query logs.",
                "Fixed a bug where an emptyrangecorresponding to aDROP TABLEdid not respect system-level span configurations such asprotected timestamps, which potentially caused reads above the protected timestamp to fail.",
                "Fixed error handling forGetFilesso that it does not cause a nil pointer dereference.",
                "Removed duplication of metrics names onDB Console Metricscharts' tooltips.",
                "Fixed a bug that could causeALTER DATABASE ... ADD/DROP REGIONto hang ifnode localitieswere changed after regions were added.",
                "A bug in thelog configurationcode prevented users from setting thedatetime-formatanddatetime-timezonelog format options(set via theformat-optionsstructure) within their log configuration. Specifically, when users tried to use these options infile-defaultswith anyjsontype log format, the log configuration was previously unable to be parsed due to validation errors. This was because thefile-defaults.format-optionswere propagated to thesinks.stderr.format-options.sinks.stderronly supports a format ofcrdb-v2-tty. Therefore, the incorrectly propagatedformat-options, which are only supported by thejsonlog format, were identified as not being supported when validatingsinks.stderr. This bug is now fixed and thefile-defaults.format-optionsare only propagated tosinks.stderr.format-optionsif both of these conditions are true: 1.file-defaults.formatis one ofcrdb-v2orcrdb-v2-tty. 2.sinks.stderr.format-optionsare not explicitly set in the log configuration.",
                "Previously, when executing queries withindex joinsorlookup joinsor both when the ordering needs to be maintained, CockroachDB in some cases would get into a pathological behavior which would lead to increased query latency, possibly by one or two orders of magnitude. This bug was introduced in v22.2 and is now fixed.",
                "Previously, theSHOW STATISTICS commandincorrectly required the user to have the admin role. Now, it correctly only requires the user to have anyprivilegeon the table being inspected.",
                "Fixed a bug that could cause aquery planto skip scanning rows from the local region when performing alookup joinwith aREGIONAL BY ROWtableas the input.",
                "Fixed a bug that could preventRESTOREfrom working if it was performed during a cluster upgrade.",
                "Fixed a bug where the opclass for atrigram indexis not shown if CockroachDB creates a trigram index and later displays it viaSHOW CREATE TABLE.",
                "Fixed a bug where CockroachDB could incorrectly evaluatelookupand indexjoinsinto tables with at least threecolumn families. This would result in either thenon-nullable column with no valueinternal error, or the query would return incorrect results. This bug was introduced in v22.2.",
                "Fixed a bug whereALTER PRIMARY KEYwould incorrectly disablesecondary indexeswhile new secondary indexes were being backfilled when using thedeclarative schema changer.",
                "Fixed a bug where theunique_constraint_catalogandunique_constraint_schemacolumns ininformation_schema.referential_constraintscould be incorrect for cross schema or cross database references.",
                "Fixed a bug in a method that was used by some of thejobsobservability infrastructure. This method could be triggered if a file was overwritten with a different chunking strategy.",
                "Fixed a bug where the result ofSHOW CREATE TABLEfor a table that had acollated string columnwith a default expression was incorrect because the statement could not be parsed.",
                "Fixed the SQL activity update job to: avoid conflicts on update, reduce the amount of data cached to only what the overview page requires, and fix the correctness of the top queries.",
                "Fixed a bug that could preventphysical cluster replicationfrom advancing in the face of some range deletion operations.",
                "Fixed a bug whereALTER TYPEcould get stuck ifDROP TYPEwas executed concurrently.",
                "Fixed a bug that could cause internal errors or panics while attempting to forecaststatisticson a numeric column.",
                "Rolled back deletes no longer cause a discrepancy between computed statistics and the actual stored values.",
                "Previously, queries with theST_Unionaggregate function could produce incorrect results in some cases due to the query optimizer performing invalid optimizations. This is now fixed. This bug had been present since theST_Unionfunction was introduced in v20.2.0.",
                "This release includes 27 merged PRs by 17 authors.",
                "Fixed a bug inphysical cluster replicationwhere the primary cluster would not be able to takebackupswhen a primary cluster node was unavailable.",
                "Fixed a bug intransaction insight detailswhere it was possible to see the contention details of other transactions. Now, CockroachDB will only surface contention details for the current transaction.",
                "Voter constraintswill now be satisfied by promoting existing non-voters. Previously, there was a bug where voter constraints were never satisfied due to all existing replicas being considered necessary to satisfy a replica constraint.",
                "Fixed a bug whereindoptioninsidepg_indexwas not properly encoded causing clients to be unable to decode it asint2vector.",
                "This patch fixes an issue where theoptimizerfails to honor thestatement_timeoutsession setting when generating constrained index scans for queries with largeINlists or= ANYpredicates on multiple index key columns, which may lead to an out of memory condition on the node.",
                "This patch fixes a performance issue in join queries with aLIMITclause, where theoptimizermay fail to push aWHEREclause filter into a join due to how theLIMIToperation is internally rewritten. This causes a full scan of the table referenced in the filter.",
                "Fixed a bug that caused internal errors during query optimization in rare cases. The bug has been present since version v2.1.11, but it is more likely to occur in version v21.2.0 and later, though it is still rare. The bug only presents when a query containsminandmaxaggregate functions.",
                "Fixed the error message that is returned when the user attempts to drop anENUMvalue that is used at least twice in anARRAYcolumn.",
                "Added a check for values before usingmeanon thePlan Details page, fixing a crash.",
                "Fixed the metric name forSchema Registry Registrationson theMetrics page.",
                "Fixed a panic that could occur if a query used astringlarger than 2^31-1 bytes. This was triggered by attempting toimporta 2.7 GiB CSV file.",
                "Fixed a bug whereatttypmodinpg_attributewas not populated forTIMESTAMP/INTERVALtypes, which meant that ORMs could not know the precision of these types properly.",
                "This release includes 130 merged PRs by 43 authors.",
                "Fixed a race condition in theReplica lifecyclethat could result in a failed SQL request when the request could have been successfully retried.",
                "Fixed a bug where aCREATE TABLEcommand with anIDENTITYcolumn did not properly propagate the type of the column into the sequence.",
                "Fixed a panic when decoding a gist in a foreign database that does not contain a table referred to by the gist.",
                "A syntheticdroppedcolumn have been added to thepg_attributetable. This column tracks the attribution numbers for dropped attributions, to work around issues with ORMs that are not designed to handle gaps in attribution numbering in thepg_attributetable.",
                "Fixed a rare internal error in theunnestandinformation_schema._pg_expandarraybuilt-in functionswhere passed string arguments could be cast to an array.",
                "External connection URLs now accept the schemeazure-blobfor connections to Azure Blob Storage and the schemeazure-kmsfor connections to Azure KMS. For backward compatibility, schemesazureandazure-storageschemes continue to work for connections to Azure Blob Storage.",
                "Fixed a bug where vectorizedCOPY FROMcould produce a plan with more than one RenderNodes, when only zero or one should be allowed. This could result in multiple render nodes in a table with a hash sharded primary key.",
                "Fixed a bug in DB Console's Statement Diagnostic page that could cause the page to crash if the response was larger than 50 KB. The page now keeps pulling results until no maximum size errors are encountered.",
                "Fixed a bug where DB Console instances proxied at different subpaths that use OIDC pointed to an incorrect relative OIDC login path.",
                "Fixed a bug where changing the settingserver.telemetry.hot_ranges_stats.intervalhad no effect.",
                "Fixed an internal error that can occur whenCREATE OR REPLACE VIEWreplaces a view with fewer columns and another entity depended on the view.",
                "If views are created with circular dependencies, CockroachDB now returns an error (cyclic view dependency for relation) instead of crashing the node. This bug was present since at least 21.1.",
                "Fixed a potential bug whereby a failed or cancelledIMPORTcould in some cases leave some of the imported rows behind after it was cancelled, in the rare event that the writing processes were slow enough to continue writing after the cleanup process started.",
                "Fixed a very rare bug that could cause keys to get unexpectedly deleted when rebalances occurred in a write-heavy workload.",
                "It is now possible to properly redirect the output of SQL queries using thendjsonoutput table format incockroach sql. This bug had been introduced in v22.2.",
                "Theunaccentbuilt-infunctionno longer removes spaces.",
                "The details of errors pertaining to invalid descriptors are not included any more in redacted debug ZIP files.",
                "Fixed a bug where join expressions were processed incorrectly.",
                "Fixed a bug that could cause aUDFto return a value that does not conform to the return type of the UDF. This bug was only present for UDFs that return user-defined types. The bug was present since v23.1.",
                "Fixed a bug where if a user was logged in while a different session dropped that user, the dropped user would still inherit privileges from thepublicrole. Now, CockroachDB checks that the user exists before allowing it to inherit privileges from thepublicrole. In addition, any active web sessions are now revoked when a user is dropped.",
                "Fixed a bug in upstreametcd-io/raftwhich could result in pulling unlimited amount of logs into memory, and lead to out-of-memory errors. Now the log scan has a limited memory footprint.",
                "Fixed a bug where, in rare circumstances, areplicationcould get stuck when proposed near lease or leadership changes, especially under overload, and the [replica circuit breakers](../v23.2could trip. A previous attempt to fix this issue has been reverted in favor of this fix.",
                "CockroachDB now automatically deletes statistics for dropped tables from thesystem.table_statisticstable.",
                "Fixed a rare internal error which occurs when a query uses a \"project set\" operation involving simple column expressions.",
                "TheRaftPreVoteandCheckQuorummechanisms are now fully enabled. These prevent spurious elections when followers already have an active leader, and cause leaders to step down if they don't hear back from a quorum of followers. This improves reliability under partial and asymmetric network partitions, by avoiding spurious elections and preventing unavailability where a partially partitioned node could steal leadership away from an established leaseholder who would then no longer be able to reach the leader and submit writes.",
                "Fixed a bug that could produce incorrect values forvirtual computed columnsin rare cases. The bug only occurred when the virtual column expression's type did not match the type of the virtual column.",
                "Fixed a rounding error that could cause distributed execution for some decimal aggregate functions to return slightly inaccurate results in rare cases.",
                "Fixed theStatementStatistics.Nodesto contain all of the nodes involved in the query. Fixed the region info inEXPLAIN ANALYZE (DISTSQL)for virtual clusters.",
                "Fixed a bug that causedbackupsto fail if there are tables and functions of the same name.",
                "Fixed edge cases in decimal and float evaluation for division operators.'NaN'::DECIMAL / 0will now returnNaNinstead of a division-by-zero error, and0 / 'inf'::DECIMALwill return0instead of0E-2019.",
                "Fixed a bug present since before v22.2 that could cause a query withLIMITandORDER BYto return results in the wrong order. This bug could cause incorrect results as well if theLIMITwas nested within an outer query (e.g., under anotherLIMIT).",
                "Added missingSQLInstanceIDsused to execute the statement to the telemetrySampledQueryevent.",
                "Fixed a bug where inserting geometries into a table with an inverted index involving a NaN coordinate could result in a panic. This now produces errors instead.",
                "Avoid displayingundefinedregions on theDatabases page.",
                "Thecockroach userfile uploadcommanduses less memory when uploading a file.",
                "CASE,IF,COALESCE, andIFNULLexpressions now return an error when passed a generator function as an argument. This mirrors the behavior of PostgreSQL.",
                "Fixed a bug that allowed views created withCREATE OR REPLACE VIEWto reference user-defined types in other databases, even withsql.cross_db_views.enabledset tofalse. This bug was present since user-defined types were introduced in v20.1.",
                "Removed a source of unnecessary Raft snapshots during replica movement.",
                "Fixed a bug where in rare situations nodes would get stuck during start-up. It would manifest itself through a stack frame sitting on a select inwaitForAdditionalStoreInitfor extended periods of time (i.e., minutes).",
                "Fixed a bug that caused internal errors when using an aggregate function in anORDER BYclause of aDELETEorUPDATEstatement. Aggregate functions are no longer allowed in these contexts. The bug has been present since at least v20.2.",
                "The filter on theStatements pageworks when application name is an empty string.",
                "TheTransaction Details pagenow loads with the fingerprint details even if no application is specified in the URL.",
                "TheSchema Insights pageno longer times out.",
                "The last SQL statement in a user-defined function with aVOIDreturn type can now produce any number of columns of any type. This bug was present since UDFs were introduced in v22.2.",
                "Fixed a bug that caused nodes to crash when attempting toEXECUTEa prepared statement with an argument that referenced a user-defined function. This bug was present since user-defined functions were introduced in v22.2.",
                "Fixed a bug where a releasesave pointcould incorrectly emit a \"cannot publish new versions for descriptors\" error instead of a retryable error.",
                "Users with theVIEWACTIVITYprivilege now are able to see other users sessions from both the CLI and the DB Console.",
                "Fixed a bug incockroach demowhereby\\demo addcould sometimes crash with an error \"index out of range [...] with length ...\". This bug had been introduced in v19.x.",
                "Fixed a bug introduced in v20.2 where the command\\demo decommissionincockroach democould leave the demo cluster in a broken state.",
                "Fixed a bug wherecockroach startwould sometimes incorrectly hang upon shutting down a server after encountering an internal error. This bug had been introduced some time in v22.x.",
                "Fixed a bug in the index recommendations provided in theEXPLAINoutput whereALTER INDEX ... VISIBLEindex recommendations may suggest making the wrong index visible when there are multiple invisible indexes in a table.",
                "Users with theVIEWACTIVITYprivilegecan now view correct values for timezones.",
                "Fixed a bug present since v23.1.0 that would cause queries on thepg_catalog.pg_statistic_exttable to fail if a table was dropped recently. This bug also caused the\\dCLI shortcut to encounter errors.",
                "Fixed a bug wherepg_attributeandpg_attrdefdid not properly return results for generated columns.",
                "Fixed a bug where aSpanStatsRequestwould return post-replicated MVCC stats. Now, aSpanStatsRequestreturns the logical MVCC stats for the requested span.",
                "Fixed the column name on the selects on the tablescrdb_internal.node_txn_execution_insightsandcrdb_internal.cluster_txn_execution_insightsupon the creation ofdebug.zip.",
                "Fixed the type resolution logic forCASEstatements to more closely match Postgres' logic. In particular, we now adhere to rule 5 listed in thePostgreSQL documentation, which requires that we select the first non-unknown input type as the candidate type, then consider each other non-unknown input type, left to right (CASEtreats itsELSEclause (if any) as the \"first\" input, with theTHENclauses(s) considered after that). If the candidate type can be implicitly converted to the other type, but not vice-versa, select the other type as the new candidate type. Then continue considering the remaining inputs. If, at any stage of this process, a preferred type is selected, stop considering additional inputs (note that CockroachDB does not yet support the concept of a \"preferred type\").",
                "Fixed an issue on theMetrics pagewhere no metrics would load when viewing metrics for a virtual cluster with a hyphenated name in a global context.",
                "Fixed a potential livelock between a high-priority transactional read and a normal-priority write. The read pushes the timestamp of the write, but if the read gets pushed as well, it may repeatedly fail to refresh because it keeps encountering the intent of the write.",
                "Fixed a nil dereference panic during node startup that could be caused by an incorrect initialization order.",
                "Thedifferencebuilt-in had its return type incorrectly set to a string instead of an integer.",
                "Fixed a bug that could cause a transaction performing multiple parallel foreign key checks to return aconcurrent txn use detectederror.",
                "Fixed a bug causing performance regression when disablingsql.metrics.statement_details.enabledwhich caused execution stats to be collected for all queries instead of the default one percent.",
                "Fixed a bug where certain SQL session variables meant to be hidden from introspection were showing up ininformation_schema.session_variables, which was incoherent with the handling inpg_catalog.pg_settings.",
                "CockroachDB now properly handles RPC failures on writes using the parallel commit protocol that execute in parallel to the commit operation, avoiding incorrect retryable failures andtransaction unexpectedly committedassertions by detecting when writes cannot be retried idempotently, instead returning anAmbiguousResultError.",
                "Fixed a bug where dependencies on sequences from tables would be reported with the wrong value for theclassidcolumn in thepg_catalog.pg_dependtable.",
                "TwoALTER RANGE default CONFIGURE ZONEstatements on the same line no longer displays an error.",
                "Fixed a DB Console issue where theDROP_UNUSEDindex recommendations produced by the table details page produced an invalidDROP INDEXstatement.",
                "Removed buggyTTLdescriptor repair. Previously, upgrading from v22.2.X to v23.1.9 incorrectly removed TTL storage parameters from tables (visible by running aSHOW CREATE TABLE <ttl-table>;statement) while attempting to repair table descriptors. This resulted in the node that attempted to run the TTL job crashing due to a panic caused by the missing TTL storage parameters.",
                "cockroach debug pebblecommands now work correctly with encrypted stores which don't use the defaultcockroach-datapath without having to also pass--store.",
                "Fixed a bug whereCREATE INDEXforpartial indexescould fail withERROR: duplicate key value violates unique constraintif concurrent inserts happened simultaneously.",
                "Observability pages no longer crash when they encounter zeros (e.g., a session with no memory allocated).",
                "Removed thecluster settingkv.snapshot_recovery.max_rate:In v23.2, this setting is disabled; it is a no-op. If you previously setkv.snapshot_recovery.max_rateon a cluster running v23.1 and upgraded to v23.2, the setting is ignored, and thekv.snapshot_rebalance.max_ratesetting is used instead.In v24.1 and later, this setting is removed entirely. If you had previously setkv.snapshot_recovery.max_rateprior to upgrade, it will be cleared, and any attempts to set it will fail with the error message:ERROR: unknown cluster setting 'kv.snapshot_recovery.max_rate'.",
                "Fixed a bug in which aCREATE FUNCTIONmay produce a syntax error if the UDF body wrapped in tagged dollar quotes (e.g.,$func$), contains two consecutive dollar signs$$. If the UDF body is known to contain dollar signs, then the caller should use tagged dollar quotes or single quotes when defining the UDF. For example:icon/buttons/copyCREATEFUNCTIONf(aSTRING)RETURNSSTRINGLANGUAGESQLAS$func$SELECTconcat('$$',a);$func$",
                "CockroachDB now prevents settingmax_range_sizebelow theCOCKROACH_MIN_RANGE_MAX_BYTESenvironment variable, which defaults to 64 MiB (half of the default minimum range size).",
                "Fixed a bug that could occasionally cause schema change jobs, such as table or index drops, to appear stuck in state \"waiting for MVCC GC\" for much longer than expected. The fix only applies to future schema changes. To process existing stuck jobs, manually force-enqueue the relevant ranges in the MVCC GC queue from the DB Console'sAdvanced Debugpage.",
                "Fixed a bug introduced when theChartCatalogAPI endpoint was introduced, where the endpoint did not correctly report the unit of metrics.",
                "Fixed a bug that could occur when the \"multiple active portals\" execution mode (Preview) was enabled to evaluate queries such as lookup joins. The bug could result in an internal error likeunexpected 40960 leftover bytesif the portal was not fully consumed.",
                "Fixed a bug where anALTER TABLE ... ADD CONSTRAINT CHECK ...statement that utilized a user-defined function in theCHECKcould cause a validation error.",
                "Fixed a bug whereRESET (ttl_expire_after)could incorrectly removettl_expiration_expression.",
                "Fixed a bug where theformat_typebuilt-in did not honortypemodinformation for array types, leading to incorrect output.",
                "Fixed a bug introduced in v22.2 that incorrectly allowed users without theEXECUTEprivilege to execute a user-defined function."
            ],
            "operational_changes": [
                "Thegoschedstats.always_use_short_sample_period.enabledcluster setting should be set totruefor any serious production cluster; this will prevent unnecessary queuing in admission control CPU queues.",
                "Thechangefeed.max_behind_nanosmetric now supports scoping with metrics labels.",
                "Telemetry delivery is now considered successful even in cases where we experience a network timeout. This will prevent throttling in cases outside an operator's control.",
                "When a schema change job completes, rolls back, or encounters a failure, the time taken since the job began is now logged in a structured log in theSQL_SCHEMAlog channel.",
                "Added a new cluster settingui.database_locality_metadata.enabled, which allows operators to disable loading extended database and table region information in the DB Console's Databases and Table Details pages. This information can cause significant CPU load on large clusters with many ranges. Versions of this page from v24.3 onwards do not have this problem. If you require this data, you can use theSHOW RANGES FROM {DATABASE| TABLE}query via SQL to compute on-demand.",
                "The newmetricranges.decommissioningshows the number of ranges with a replica on adecommissioning node.",
                "The following newmetricsshow the number of RPC TCP connections established to remote nodes:rpc.connection.connected: the number of gRPC TCP level connections established to remote nodes.rpc.client.bytes.egress: the number of TCP bytes sent over gRPC on connections initiated by the cluster.rpc.client.bytes.ingress: the number of TCP bytes received over gRPC on connections initiated by the cluster.",
                "Added a new configuration parameter,server.cidr_mapping_url, which maps IPv4 CIDR blocks to arbitrary tag names.",
                "Themetricssql.bytesinandsql.bytesoutare now aggregate metrics if child metrics are enabled.",
                "The following newmetricstrack the number of bytes sent by an individualchangefeedto each sink:changefeed.network.bytes_inchangefeed.network.bytes_out",
                "You can now set the log format for theSTDERRchangefeed sink using theformatfield in thestderrsink section of theloggingconfiguration.",
                "There are now structured logging events that report connection breakage duringnode shutdown. Previously, these logs existed but were unstructured. These logs appear in theOPSlogging channel. There are two new events:Thenode_shutdown_connection_timeoutevent is logged after the timeout defined by thecluster settingserver.shutdown.connections.timeouttranspires, if there are still open SQL connections.Thenode_shutdown_transaction_timeoutevent is logged after the timeout defined by thecluster settingserver.shutdown.transactions.timeouttranspires, if there are still opentransactionson those SQL connections.",
                "Added theranges.decommissioningmetric, representing the number ofrangeswhich have areplicaon adecommissioning node.",
                "Added three new network tracking metrics:rpc.connection.connectedis the number of rRPC TCP-level connections established to remote nodes.rpc.client.bytes.egressis the number of TCP bytes sent via gRPC on connections we initiated.rpc.client.bytes.ingressis the number of TCP bytes received via gRPC on connections we initiated.cockroachdb/cockroach",
                "Added a new configuration parameterserver.cidr_mapping_url, which maps IPv4 CIDR blocks to arbitrary tag names.",
                "Modified metricssql.bytesinandsql.bytesoutto be aggregation metrics If theserver.child_metrics.enabledcluster setting is enabled.",
                "Added two network metrics,changefeed.network.bytes_inandchangefeed.network.bytes_out. These metrics track the number of bytes sent by individualchangefeedsto the following sinks:Kafka sinks. If theserver.child_metrics.enabledcluster setting is enabled, the metric will have akafkalabel.Webhook sinks. If theserver.child_metrics.enabledcluster setting is enabled, the metric will have awebhooklabel.Pub/Sub sinks. If theserver.child_metrics.enabledcluster setting is enabled, the metric will have apubsublabel.SQL sink. If theserver.child_metrics.enabledcluster setting is enabled, the metric will have asqllabel.",
                "crdb_internal.cluster_execution_insights.txtandcrdb_internal.cluster_txn_execution_insights.txthave been removed from thedebug zip. These files contained cluster-wide insights for statements and transactions. Users can still rely on theper-node executioninsights incrdb_internal.node_execution_insights.txtandcrdb_internal.node_txn_execution_insights.txt.",
                "Some debugging-only information about physical plans is no longer collected in thesystem.job_infotable forchangefeeds, because it has the potential to grow very large.",
                "For theTELEMETRY channel, TCLsampled_queryevents will now be sampled at the rate specified by the settingsql.telemetry.query_sampling.max_event_frequency, which is already used to limit the rate of sampling DML statements.",
                "Improved metrics related todisk usagereporting for volumes that dynamically change their size over time.",
                "Two new metrics track the status of the SQL Activity Update job, which pre-aggregates top K information within the SQL statistics subsytem and writes the results tosystem.statement_activityandsystem.transaction_activity:sql.stats.activity.updates.successful: Number of successful updates made by the SQL activity updater job.sql.stats.activity.update.latency: The latency of updates made by the SQL activity updater job. Includes failed update attempts.",
                "Added a new countermetric,sql.stats.flush.done_signals.ignored, that tracks the number of times the SQL activity update job has ignored the signal that indicates that a flush has completed. This metric may indicate that the SQL activity update job is taking longer than expected to complete.",
                "Added a new countermetric,sql.stats.activity.updates.failed, to measure the number of update attempts made by the SQL activity update job that failed with errors. The SQL activity update job is used to pre-aggregate top K information within the SQL stats subsystem and write the results tosystem.statement_activityandsystem.transaction_activity.",
                "Added a new countermetric,sql.stats.flush.fingerprint.count, that tracks the number of unique statement and transaction fingerprints included in the SQL stats flush.",
                "Added thesql.pgwire.pipeline.countmetric, which measures how many wire protocol commands have been received by the server, but have not yet started processing. This metric will only grow if clients are using thepipeline modeof the PostgreSQL wire protocol.",
                "Theclient_authentication_okandclient_session_endevents are now logged to theSESSIONSlog channelunconditionally. Previously, these would only be logged if theserver.auth_log.sql_sessions.enabledcluster settingwas set totrue. All otherSESSIONSlog messages are still only logged ifserver.auth_log.sql_sessions.enabledorserver.auth_log.sql_connections.enabledare set totrue. To not showclient_authentication_okandclient_session_endevents, disable theSESSIONSlog channel entirely.",
                "A minimumRaftscheduler concurrency is now enforced perstoreso that a node with many stores does not spread workers too thinly. This avoids high scheduler latency acrossreplicason a store when load is imbalanced.",
                "Achangefeedoptimization to reduce duplicates during aggregator restarts has been disabled due to poor performance.",
                "Expanded the--include-range-infoflag to include problem ranges. This flag still defaults totrue.",
                "In unredacteddebug zips, thecrdb_internal.transaction_contention_eventstable file has two new columns:waiting_stmt_query: the query of the waiting statement.blocking_txn_queries_unordered: the unordered list of the blocking transaction's queries.",
                "Per-nodehot rangeslogging now logs the top 5 hot ranges on the local node instead of the top 5 hot ranges cluster-wide.",
                "Introduced thecluster settingkv.gc.sticky_hint.enabledthat helps expeditinggarbage collectionafter range deletions. For example, when a SQL table or index is dropped.kv.gc.sticky_hint.enabledis enabled by default in v23.2. The setting has been deprecated in v23.2.",
                "Introduced a newenvironment variablethat allows an operator to configure thecompactionconcurrency.",
                "Debug zipwill now collect the active traces of all running or reverting traceable jobs. This includesrestores,imports,backups, andphysical cluster replication.",
                "Added a newcluster settingserver.http.base_paththat controls the redirection of the browser after successful login withOIDC SSO. It is unlikely that this setting would need adjustment. However, it is helpful in cases where CockroachDB is running behind a load balancer or proxy that serves CockroachDB under a subpath, such ashttps:// <hostname>/crdb/. In those cases, it is necessary for the browser to redirect to/ crdbafter login instead of/, which has always been the hard-coded default.",
                "Added the followingmetricsforRaftproposals and reproposals:raft.commands.proposed,raft.commands.reproposed.unchanged, andraft.commands.reproposed.new-lai.",
                "Removed thecluster settingspanconfig.store.enabledand the ability to use theCOCKROACH_DISABLE_SPAN_CONFIGSenvironment variable.",
                "Renamed themetricfluent.sink.conn.errorstolog.fluent.sink.conn.errors. The addition of thelog.prefix was to better group together logging-related metrics. The behavior and purpose of the metric remains unchanged.",
                "Set the Metric Type metadata on themetriclog.fluent.sink.conn.errors. Previously, the Metric Type was incorrectly left unset. Note that this is an update to the metric's metadata; the behavior and purpose of the metric remains unchanged.",
                "Added a newmetriclog.buffered.messages.dropped. Buffered network logging sinks have amax-buffer-sizeattribute, which determines, in bytes, how many log messages can be buffered. Anyfluent-serverorhttp-serverlog sink that makes use of abufferingattribute in its configuration (enabled by default) qualifies as a buffered network logging sink. If this buffer becomes full, and an additional log message is sent to the buffered log sink, the buffer would exceed thismax-buffer-size. Therefore, the buffered log sink drops older messages in the buffer to handle, in order to make room for the new.log.buffered.messages.droppedcounts the number of messages dropped from the buffer. Note that the count is shared across all buffered logging sinks.",
                "Added themetriclog.messages.count. This metric measures the count of messages logged on the node since startup. Note that this does not measure the fan-out of single log messages to the various configuredlogging sinks. This metric can be helpful in understanding log rates and volumes.",
                "Added thefile-based-headersfield found in thehttp-defaultssection of the log config, which accepts 'key-filepath' pairs. This allows values found at filepaths to be updated without restarting the cluster by sendingSIGHUPto notify that values need to be refreshed.",
                "Added thecluster settingkv.snapshot.ingest_as_write_threshold, which controls the size threshold below which snapshots are converted to regular writes. It defaults to100KiB.",
                "Removed the node-levelengine.stallstimeseries metric. This metric has not been updated for several releases.",
                "Removed a timeseries metric that has not been reported for several versions.",
                "Added two new metrics,range.snapshots.(send|recv)-queue-bytes, to track the total size of all snapshots waiting in the snapshot queue.",
                "Exposed a new metricstorage.compactions.duration, computed by the storage engine, that provides the cumulative time the storage engine has spent in compactions. This duration may exceed time elapsed, because of concurrent compactions, and may be useful in monitoring compaction concurrency.",
                "Two new store metrics,range.snapshots.cross-region.sent-bytesandrange.snapshots.cross-region.rcvd-bytes, were added to track the aggregate of snapshot bytes sent from and received at a store across different regions. Note that these metrics require the nodes' localities to include a â€œregionâ€ tier key. If a node lacks this key but is involved in cross-region batch activities, an error message will be logged.",
                "Added new store metrics to track the aggregate of snapshot bytes sent from and received at a store across different zones.range.snapshots.cross-zone.sent-bytesrange.snapshots.cross-zone.rcvd-bytesFor accurate metrics, follow these recommendations: - Configure region and zone tier keys consistently across nodes. - Within a node locality, ensure unique region and zone tier keys. - Maintain consistent configuration of region and zone tiers across nodes.",
                "Added new store metrics:raft.rcvd.bytesraft.sent.bytesraft.rcvd.cross_region.bytesraft.sent.cross_region.bytesraft.rcvd.cross_zone.bytesraft.sent.cross_zone.bytes",
                "Added new DistSender metrics:distsender.batch_requests.replica_addressed.bytesdistsender.batch_responses.replica_addressed.bytesdistsender.batch_requests.cross_region.bytesdistsender.batch_responses.cross_region.bytesdistsender.batch_requests.cross_zone.bytesdistsender.batch_responses.cross_zone.bytes.",
                "Added new Node metrics:batch_requests.bytesbatch_responses.bytesbatch_requests.cross_region.bytesbatch_responses.cross_region.bytesbatch_requests.cross_zone.bytesbatch_responses.cross_zone.bytes",
                "Added new RPC metrics to help you to diagnose RPC connection issues:grpc.connection.avg_round_trip_latencyrpc.connection.failuresrpc.connection.healthyrpc.connection.healthy_nanosrpc.connection.heartbeatsrpc.connection.unhealthyrpc.connection.unhealthy_nanos",
                "Added a new metricchangefeed.lagging_rangesthat shows the number of ranges which are behind in changefeeds. This metric can be used with themetrics_labelchangefeed option. Added a newchangefeed optionlagging_ranges_threshold, which is the amount of time a range needs to be behind to be considered lagging. By default this is 3 minutes. Added a new optionlagging_ranges_polling_interval, which controls how often the lagging ranges calculation is done. This setting defaults to polling every 1 minute. Note that polling adds latency to the metric being updated. For example, if a range falls behind by 3 minutes, the metric may not update for an additional minute afterwards. Also note that ranges undergoing an initial scan for longer than the threshold are considered to be lagging. Starting a changefeed with an initial scan on a large table will likely increment the metric for each range in the table. However, as ranges complete the initial scan, the number of ranges will decrease.",
                "A histogram metricraft.replication.latencywas added. It tracks the time between evaluation and application of the command. This includes time spent in the quota pool, in replication (including re-proposals) as well as log application, but notablynotsequencing latency (i.e., contention and latch acquisition).",
                "The default Raft scheduler concurrency cap has been increased from 96 to 128 workers, scaling with 8 workers per CPU up to the cap. The scheduler concurrency can be controlled using theCOCKROACH_SCHEDULER_CONCURRENCYenvironment variable.",
                "The new cluster settingserver.hot_ranges_request.node.timeoutcontrols the maximum amount of time that a hot ranges request will spend waiting for a node to provide a response. It defaults to 5 minutes. To disable timeouts, set it to0.",
                "Two new cluster settings control whether intent resolution is subject to admission control:kv.intent_resolver.send_immediately.bypass_admission_control.enabledandkv.intent_resolver.batch.bypass_admission_control.enabled.",
                "The new cluster settingadmission.l0_min_size_per_sub_levelreduces the probability ofadmission controlthrottling when there is a sequence of smallmemtableflushes or small files ingested into L0.",
                "The new cluster settingkv.intent_resolver.batcher.in_flight_backpressure_limit.enabledcontrols whether an in-flight RPC limit is enforced on intent resolution RPCs. It defaults tofalse.",
                "BACKUPnow skips contacting the ranges for tables on whichexclude_data_from_backupis set, and can thus succeed even if an excluded table is unavailable.",
                "Span stats requests will return a partial result if the request encounters any errors. Errors that would have previously terminated the request are now included in the response.",
                "The rangefeed closed timestamp interval controlled bykv.rangefeed.closed_timestamp_refresh_intervalnow defaults to 3 seconds. This affects how often rangefeeds emit resolved timestamps, and thus how often changefeeds can emit checkpoints. Previously, its default value of 0 would fall back tokv.closed_timestamp.side_transport_interval, which defaults to 200 milliseconds. Users who rely on the settingkv.closed_timestamp.side_transport_intervalto control the rangefeed closed timestamp interval should make sure they either setkv.rangefeed.closed_timestamp_refresh_intervalto 0 to retain the old behavior (preferably before upgrading), or to an appropriate value.",
                "The default value oftimeoutforhttp-serverslogging sinkshas been changed from0(i.e., \"no timeout\") to2s. This is reflected in thehttp-defaultssection of the log configuration. Users still maintain the ability to override the timeout, or disable it by explicitly setting it to0(e.g.timeout: 0).",
                "Changefeedmetrics now include achangefeed.checkpoint_progressmetric which is similar tochangefeed.max_behind_nanosbut supports metrics labels, as well as achangefeed.aggregator_progressmetric which can track the progress of individual aggregators (the lowest timestamp for which all aggregators with the label have emitted all values they're responsible for).",
                "Added support for Prometheus native histograms behind an environment variable flag.",
                "Requests for database details or table details from the UI, or usages of [SHOW RANGES WITH DETAILS]/docs/v23.2/show-ranges.html are no longer subject to errors if the number of requested spans is too large.",
                "Thecockroach debug zipcommand now has an option to omit goroutine stack dumps. This impacts the creation ofnodes/*/stacks.txtandnodes/*/stacks_with_labels.txtwithin debug ZIP bundles. Users can opt to exclude these goroutine stacks by using the--include-goroutine-stacks=falseflag. Note that fetching stack traces for all goroutines is a \"stop-the-world\" operation, which can momentarily have negative impacts on SQL service latency. Note also that any periodic goroutine dumps previously taken on the node will still be included innodes/*/goroutines/*.txt.gz, as these would have already been generated and don't require any stop-the-world operations.",
                "New rangefeed metrics help to troubleshoot rangefeed restarts. The metric names have the formatdistsender.rangefeed.retry.{reason}.",
                "Rangefeeds regularly attempt to push long-running transactions to a future timestamp in order to emit checkpoints. The interval at which this is attempted has been increased from 250 milliseconds to 1 seconds. This is now configurable via the environment variableCOCKROACH_RANGEFEED_PUSH_TXNS_INTERVAL."
            ],
            "total_bug_fixes": 390,
            "total_operational_changes": 71,
            "date": "September 4, 2025",
            "release_type": "LTS (Long Term Support)"
        }
    ]
}